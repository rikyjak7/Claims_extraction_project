<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images</title>
<!--Generated on Thu Oct  3 04:19:12 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<meta content="Segment Anything Model,  Melanoma Segmentation,  Whole Slide Images" lang="en" name="keywords"/>
<base href="/html/2410.02207v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S1" title="In Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S2" title="In Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3" title="In Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Method</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS1" title="In 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Overview of the Proposed Method</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS2" title="In 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>In-situ Melanoma Detection</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS3" title="In 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Low-Confidence Region Filtering</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS4" title="In 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Prompt Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS5" title="In 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.5 </span>Final Mask Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS6" title="In 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.6 </span>Training Strategy</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4" title="In Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.SS1" title="In 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Dataset</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.SS2" title="In 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Implementation Details</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.SS3" title="In 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.SS4" title="In 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Ablation Studies</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.SS4.SSS1" title="In 4.4 Ablation Studies ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4.1 </span>In-situ Melanoma Detection</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.SS4.SSS2" title="In 4.4 Ablation Studies ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4.2 </span>Low-Confidence Region Filtering</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.SS4.SSS3" title="In 4.4 Ablation Studies ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4.3 </span>Prompt Types</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.SS4.SSS4" title="In 4.4 Ablation Studies ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4.4 </span>Final Mask Generation</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S5" title="In Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Conclusion</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line"><span class="ltx_note ltx_role_institutetext" id="id1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">institutetext: </span>University of California, Berkeley
<br class="ltx_break"/><span class="ltx_note ltx_role_email" id="id1.1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">email: </span>{pixelled, avz}@berkeley.edu</span></span></span></span></span></span>
<h1 class="ltx_title ltx_title_document">Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Qingyuan Liu<span class="ltx_ERROR undefined" id="id1.1.id1">\orcidlink</span>0009-0003-3802-6628
</span><span class="ltx_author_notes">11</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Avideh Zakhor<span class="ltx_ERROR undefined" id="id2.1.id1">\orcidlink</span>0000-0003-4770-6353
</span><span class="ltx_author_notes">11</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id3.id1">Melanoma segmentation in Whole Slide Images (WSIs) is useful for prognosis and the measurement of crucial prognostic factors such as Breslow depth and primary invasive tumor size. In this paper, we present a novel approach that uses the Segment Anything Model (SAM) for automatic melanoma segmentation in microscopy slide images. Our method employs an initial semantic segmentation model to generate preliminary segmentation masks that are then used to prompt SAM. We design a dynamic prompting strategy that uses a combination of centroid and grid prompts to achieve optimal coverage of the super high-resolution slide images while maintaining the quality of generated prompts. To optimize for invasive melanoma segmentation, we further refine the prompt generation process by implementing in-situ melanoma detection and low-confidence region filtering. We select Segformer as the initial segmentation model and EfficientSAM as the segment anything model for parameter-efficient fine-tuning. Our experimental results demonstrate that this approach not only surpasses other state-of-the-art melanoma segmentation methods but also significantly outperforms the baseline Segformer by 9.1% in terms of IoU.</p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Keywords: </h6>Segment Anything Model, Melanoma Segmentation, Whole Slide Images
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Melanoma, one of the most serious forms of skin cancer, originates in melanocytes, the pigment-producing cells responsible for melanin production <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib22" title="">22</a>]</cite>. Based on its progression and location within the skin, melanoma can be categorized into two main types: in-situ melanoma and invasive melanoma. While in-situ melanoma represents cancerous melanocytes that are confined to the epidermis, invasive melanoma penetrates beyond the epidermis into the dermis, posing a significant risk of spreading to other vital organs. As invasive melanoma grows, it may invade blood vessels and lymphatic vessels, allowing cancer cells to detach from the primary tumor and cause metastatic cancer <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib1" title="">1</a>]</cite>. In this paper, we primarily focus on segmenting invasive melanoma to assist dermatologists in deciding on treatment options.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Early detection and accurate diagnosis of melanoma are crucial for improving the survival rate <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib3" title="">3</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib6" title="">6</a>]</cite>. The standard diagnosis practice begins with an initial examination of dermatoscopic features to determine the types of melanocyptic lesions. For suspicious and malignant lesions, a histopathologic analysis of skin biopsies stained with hematoxylin and eosin (H&amp;E) is required <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib11" title="">11</a>]</cite>. While traditional approach requires examination of tissue specimens under a microscope, the advent of Whole Slide Images (WSIs) has revolutionized this process by digitizing tissue samples into high resolution images. These digital slide images enable pathologists to examine various characteristics such as the celluar architecture, breslow depth and complex histologic features that are crucial for determining the stage and aggressiveness of melanoma.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Recent studies <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib16" title="">16</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib18" title="">18</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib2" title="">2</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib24" title="">24</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib17" title="">17</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib21" title="">21</a>]</cite> have focused on utilizing deep learning technology for melanoma segmentation in whole slide images. Melanoma segmentation results with sufficient accuracy in slide images have proven highly beneficial for aiding diagnosis and assisting manual measurement of breslow depth and primary invasive tumor size, which are crucial prognostic factors. This shows the potential for a fully automatic diagnosis procedure. Phillips et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib18" title="">18</a>]</cite> demonstrated the effectiveness of multi-scale FCN in segmentation the dermis, epidermis and tumor in whole slide images. Want et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib26" title="">26</a>]</cite> utilized more advanced transformer models including Hiearachical Pyramid Transformers (HIPT) and Segformers to achieve accurate segmentation of invasive melanoma and the epidermis in microscopy slide images.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">In this paper, we propose a novel method to use the Segment Anything Model (SAM) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib13" title="">13</a>]</cite> for automatic melanoma segmentation in microscopy slide images. SAM has demonstrated great success in various computer vision tasks and has achieved state-of-the-art performance in a diverse range of image segmentation tasks <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib13" title="">13</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib20" title="">20</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib4" title="">4</a>]</cite>. One of the key features of SAM is a prompt encoder that allows the model to adapt to diverse downstream segmentation tasks with prompt engineering. Despite SAM’s strong zero-shot generalization abilities, several studies <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib12" title="">12</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib32" title="">32</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib19" title="">19</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib8" title="">8</a>]</cite> have shown that its accuracy is limited in segmentation tasks that require specific domain knowledge. Recent studies <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib15" title="">15</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib27" title="">27</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib31" title="">31</a>]</cite> have proposed methods to adapt SAM for medical image segmentation, such as augmenting data with SAM’s predictions or fine-tuning SAM for better performance. Despite showing impressive performance in segmenting medical images such as CT and MRI scans, these methods do not generalize well to microscopy images, especially for melanoma segmentation in microscopy slide images.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">Our proposed method addresses these challenges by introducing an innovative framework that automatically generates prompts from an initial segmentation maps to guide SAM. We use Segformer, an effective semantic segmentation model for melanoma segmentation, to generate the initial segmentation map. We design a dynamic prompt strategy that uses a combination of centroid and grid prompts. Additionally, we incorporate in-situ melanoma detection and low-confidence region filtering to ensure precise prompt generation. Our experimental results demonstrate that this approach not only surpasses other state-of-the-art melanoma segmentation methods but also significantly improves upon the baseline performance of Segformer by over 9.1%.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.1"><span class="ltx_text ltx_font_bold" id="S2.p1.1.1">SAM in Medical Imaging</span>. Given SAM’s impressive results on various natural image segmentation tasks <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib13" title="">13</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib20" title="">20</a>]</cite>, recent works have explored its application to medical image segmentation. However, several studies <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib12" title="">12</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib32" title="">32</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib19" title="">19</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib8" title="">8</a>]</cite> have shown that SAM underperforms in medical image segmentation. This is attributed to the model’s lack of domain-specific medical knowledge, the uncertain and complex object boundaries, intricate structures, and the wide-range of scales unique to medical objects <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib12" title="">12</a>]</cite>. Recent efforts have focused on adapting SAM for medical images, primarily through fine-tuning or adapting SAM to labeled medical dataset. Ma et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib15" title="">15</a>]</cite> proposed to fine-tune SAM fully on labeled medical data, which is not cost-effective due to the vast number of parameters. Wu et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib27" title="">27</a>]</cite> proposed to integrate adapter modules into SAM, allowing efficient fine-tuning by freezing all modules except for the adapters during training. These studies all focus on utilizing SAM as an interactive model and evaluate its performance by providing accurate prompts based on the ground-truth annotations. For microscopy slide image segmentation, SAM’s interactive feature can assist annotators but cannot fully automate the labor-intensive process of segmenting high-resolution whole slide images. Although SAM offers automatic mask generation, this feature is designed for segmenting everything on an entire image rather than targeting specific small objects, such as scattered melanoma cells in microscopy slide images. Zhang et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib31" title="">31</a>]</cite> proposed to enhance medical images by adding semantic structures using SAM’s automatic mask generation. This approach combines generated masks, features and stability scores to help train other image segmentation models with enhanced data. The success of this method depends on SAM’s ability to generate useful structural information during the automatic mask generation process.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p2">
<p class="ltx_p" id="S2.p2.1"><span class="ltx_text ltx_font_bold" id="S2.p2.1.1">Melanoma Segmentation in Slide Images</span>. Melanoma semantic segmentation can be classified into two categories: 1) skin lesion segmentation based on images captured at a macroscopic scale; 2) microscopy slide image segmentation that involves WSIs captured at a microscopic scale. While skin lesion segmentation only segments a large rounded melanoma component at a macroscopic level, microscopy slide image segmentation requires segmenting irregular melanoma scattered across high-resolution, detailed views of tissue samples at the cellular level, making the task significantly more challenging. Our work focuses exclusively on the latter.</p>
</div>
<div class="ltx_para" id="S2.p3">
<p class="ltx_p" id="S2.p3.1">Most studies <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib16" title="">16</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib18" title="">18</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib2" title="">2</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib24" title="">24</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib17" title="">17</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib21" title="">21</a>]</cite> focus on utilizing CNN-based methods for melanoma segmentation in microscopy slide images. Phillips et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib18" title="">18</a>]</cite> devised a multi-stride fully convolutional network (FCN) that can effectively segment tumour, epidermis and dermis. Shah et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib21" title="">21</a>]</cite> developed a two-stage method to segment invasive melanoma by leveraging the difference between in-situ melanoma and invasive melanoma. They used HRNet-OCR <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib30" title="">30</a>]</cite> and HookNet <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib23" title="">23</a>]</cite> as backbones and trained two models, one for epidermis segmentation and one for tumor segmentation, to predict two separate segmentation masks for epidermis and melanoma. By removing all predicted melanoma from the epidermis mask, they obtained segmentation masks for invasive melanoma.</p>
</div>
<div class="ltx_para" id="S2.p4">
<p class="ltx_p" id="S2.p4.1">Recent works have applied transformer-based architectures <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib25" title="">25</a>]</cite> to melanoma segmentation. Wang et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib26" title="">26</a>]</cite> proposed to fine-tune the Hierarchical Pyramid Transformer (HIPT) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib5" title="">5</a>]</cite> and the Segformer <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib28" title="">28</a>]</cite> for invasive melanoma segmentation in microscopy slide images. Segformer has been shown to outperform all other CNN-based methods and HIPT in segmenting invasive melanoma, achieving state-of-the-art IoU <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib26" title="">26</a>]</cite>. Our method is designed with Segformer <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib28" title="">28</a>]</cite> as the initial segmentation model to achieve the best results.</p>
</div>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Method</h2>
<figure class="ltx_figure" id="S3.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="227" id="S3.F1.g1" src="extracted/5886878/images/framework.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S3.F1.10.5.1" style="font-size:90%;">Figure 1</span>: </span><span class="ltx_text" id="S3.F1.8.4" style="font-size:90%;">An overview of the proposed method. The initial mask <math alttext="X" class="ltx_Math" display="inline" id="S3.F1.5.1.m1.1"><semantics id="S3.F1.5.1.m1.1b"><mi id="S3.F1.5.1.m1.1.1" xref="S3.F1.5.1.m1.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="S3.F1.5.1.m1.1c"><ci id="S3.F1.5.1.m1.1.1.cmml" xref="S3.F1.5.1.m1.1.1">𝑋</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.F1.5.1.m1.1d">X</annotation><annotation encoding="application/x-llamapun" id="S3.F1.5.1.m1.1e">italic_X</annotation></semantics></math> generated by Segformer is post-processed to generate the mask <math alttext="\hat{X}^{m}" class="ltx_Math" display="inline" id="S3.F1.6.2.m2.1"><semantics id="S3.F1.6.2.m2.1b"><msup id="S3.F1.6.2.m2.1.1" xref="S3.F1.6.2.m2.1.1.cmml"><mover accent="true" id="S3.F1.6.2.m2.1.1.2" xref="S3.F1.6.2.m2.1.1.2.cmml"><mi id="S3.F1.6.2.m2.1.1.2.2" xref="S3.F1.6.2.m2.1.1.2.2.cmml">X</mi><mo id="S3.F1.6.2.m2.1.1.2.1" xref="S3.F1.6.2.m2.1.1.2.1.cmml">^</mo></mover><mi id="S3.F1.6.2.m2.1.1.3" xref="S3.F1.6.2.m2.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.F1.6.2.m2.1c"><apply id="S3.F1.6.2.m2.1.1.cmml" xref="S3.F1.6.2.m2.1.1"><csymbol cd="ambiguous" id="S3.F1.6.2.m2.1.1.1.cmml" xref="S3.F1.6.2.m2.1.1">superscript</csymbol><apply id="S3.F1.6.2.m2.1.1.2.cmml" xref="S3.F1.6.2.m2.1.1.2"><ci id="S3.F1.6.2.m2.1.1.2.1.cmml" xref="S3.F1.6.2.m2.1.1.2.1">^</ci><ci id="S3.F1.6.2.m2.1.1.2.2.cmml" xref="S3.F1.6.2.m2.1.1.2.2">𝑋</ci></apply><ci id="S3.F1.6.2.m2.1.1.3.cmml" xref="S3.F1.6.2.m2.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F1.6.2.m2.1d">\hat{X}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.F1.6.2.m2.1e">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>. We run SAM on the prompts generated from <math alttext="\hat{X}^{m}" class="ltx_Math" display="inline" id="S3.F1.7.3.m3.1"><semantics id="S3.F1.7.3.m3.1b"><msup id="S3.F1.7.3.m3.1.1" xref="S3.F1.7.3.m3.1.1.cmml"><mover accent="true" id="S3.F1.7.3.m3.1.1.2" xref="S3.F1.7.3.m3.1.1.2.cmml"><mi id="S3.F1.7.3.m3.1.1.2.2" xref="S3.F1.7.3.m3.1.1.2.2.cmml">X</mi><mo id="S3.F1.7.3.m3.1.1.2.1" xref="S3.F1.7.3.m3.1.1.2.1.cmml">^</mo></mover><mi id="S3.F1.7.3.m3.1.1.3" xref="S3.F1.7.3.m3.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.F1.7.3.m3.1c"><apply id="S3.F1.7.3.m3.1.1.cmml" xref="S3.F1.7.3.m3.1.1"><csymbol cd="ambiguous" id="S3.F1.7.3.m3.1.1.1.cmml" xref="S3.F1.7.3.m3.1.1">superscript</csymbol><apply id="S3.F1.7.3.m3.1.1.2.cmml" xref="S3.F1.7.3.m3.1.1.2"><ci id="S3.F1.7.3.m3.1.1.2.1.cmml" xref="S3.F1.7.3.m3.1.1.2.1">^</ci><ci id="S3.F1.7.3.m3.1.1.2.2.cmml" xref="S3.F1.7.3.m3.1.1.2.2">𝑋</ci></apply><ci id="S3.F1.7.3.m3.1.1.3.cmml" xref="S3.F1.7.3.m3.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F1.7.3.m3.1d">\hat{X}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.F1.7.3.m3.1e">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> to generate the mask <math alttext="\hat{Y}^{m}" class="ltx_Math" display="inline" id="S3.F1.8.4.m4.1"><semantics id="S3.F1.8.4.m4.1b"><msup id="S3.F1.8.4.m4.1.1" xref="S3.F1.8.4.m4.1.1.cmml"><mover accent="true" id="S3.F1.8.4.m4.1.1.2" xref="S3.F1.8.4.m4.1.1.2.cmml"><mi id="S3.F1.8.4.m4.1.1.2.2" xref="S3.F1.8.4.m4.1.1.2.2.cmml">Y</mi><mo id="S3.F1.8.4.m4.1.1.2.1" xref="S3.F1.8.4.m4.1.1.2.1.cmml">^</mo></mover><mi id="S3.F1.8.4.m4.1.1.3" xref="S3.F1.8.4.m4.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.F1.8.4.m4.1c"><apply id="S3.F1.8.4.m4.1.1.cmml" xref="S3.F1.8.4.m4.1.1"><csymbol cd="ambiguous" id="S3.F1.8.4.m4.1.1.1.cmml" xref="S3.F1.8.4.m4.1.1">superscript</csymbol><apply id="S3.F1.8.4.m4.1.1.2.cmml" xref="S3.F1.8.4.m4.1.1.2"><ci id="S3.F1.8.4.m4.1.1.2.1.cmml" xref="S3.F1.8.4.m4.1.1.2.1">^</ci><ci id="S3.F1.8.4.m4.1.1.2.2.cmml" xref="S3.F1.8.4.m4.1.1.2.2">𝑌</ci></apply><ci id="S3.F1.8.4.m4.1.1.3.cmml" xref="S3.F1.8.4.m4.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F1.8.4.m4.1d">\hat{Y}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.F1.8.4.m4.1e">over^ start_ARG italic_Y end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>. The two masks are combined to create the final mask Y.</span></figcaption>
</figure>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Overview of the Proposed Method </h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">Our proposed method comprises an initial semantic segmentation model and a segment anything model as illustrated in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.F1" title="In 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">1</span></a>. To segment invasive melanoma automatically, we prompt SAM with prompts generated from the mask produced by the initial segmentation model. To optimize for our task of segmenting invasive melanoma, we select Segformer as the initial segmentation model due to its superior performance compared to other models <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib26" title="">26</a>]</cite>. We choose EfficientSAM <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib29" title="">29</a>]</cite> as the segment anything model for parameter-efficient fine-tuning. The entire framework is described as follows.</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.8"><span class="ltx_text ltx_font_bold" id="S3.SS1.p2.8.1">Step 1. Initial Mask Generation</span>. We run Segformer<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib28" title="">28</a>]</cite> to generate the initial segmentation mask <math alttext="X" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.1"><semantics id="S3.SS1.p2.1.m1.1a"><mi id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><ci id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">𝑋</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">X</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.1d">italic_X</annotation></semantics></math>. Then we perform in-situ melanoma detection to separate <math alttext="X" class="ltx_Math" display="inline" id="S3.SS1.p2.2.m2.1"><semantics id="S3.SS1.p2.2.m2.1a"><mi id="S3.SS1.p2.2.m2.1.1" xref="S3.SS1.p2.2.m2.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.1b"><ci id="S3.SS1.p2.2.m2.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1">𝑋</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.1c">X</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.2.m2.1d">italic_X</annotation></semantics></math> into the estimated in-situ melanoma regions <math alttext="X^{s}" class="ltx_Math" display="inline" id="S3.SS1.p2.3.m3.1"><semantics id="S3.SS1.p2.3.m3.1a"><msup id="S3.SS1.p2.3.m3.1.1" xref="S3.SS1.p2.3.m3.1.1.cmml"><mi id="S3.SS1.p2.3.m3.1.1.2" xref="S3.SS1.p2.3.m3.1.1.2.cmml">X</mi><mi id="S3.SS1.p2.3.m3.1.1.3" xref="S3.SS1.p2.3.m3.1.1.3.cmml">s</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.3.m3.1b"><apply id="S3.SS1.p2.3.m3.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.3.m3.1.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1">superscript</csymbol><ci id="S3.SS1.p2.3.m3.1.1.2.cmml" xref="S3.SS1.p2.3.m3.1.1.2">𝑋</ci><ci id="S3.SS1.p2.3.m3.1.1.3.cmml" xref="S3.SS1.p2.3.m3.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.3.m3.1c">X^{s}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.3.m3.1d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT</annotation></semantics></math> and the remaining invasive melanoma regions <math alttext="X^{v}" class="ltx_Math" display="inline" id="S3.SS1.p2.4.m4.1"><semantics id="S3.SS1.p2.4.m4.1a"><msup id="S3.SS1.p2.4.m4.1.1" xref="S3.SS1.p2.4.m4.1.1.cmml"><mi id="S3.SS1.p2.4.m4.1.1.2" xref="S3.SS1.p2.4.m4.1.1.2.cmml">X</mi><mi id="S3.SS1.p2.4.m4.1.1.3" xref="S3.SS1.p2.4.m4.1.1.3.cmml">v</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.4.m4.1b"><apply id="S3.SS1.p2.4.m4.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m4.1.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1">superscript</csymbol><ci id="S3.SS1.p2.4.m4.1.1.2.cmml" xref="S3.SS1.p2.4.m4.1.1.2">𝑋</ci><ci id="S3.SS1.p2.4.m4.1.1.3.cmml" xref="S3.SS1.p2.4.m4.1.1.3">𝑣</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.4.m4.1c">X^{v}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.4.m4.1d">italic_X start_POSTSUPERSCRIPT italic_v end_POSTSUPERSCRIPT</annotation></semantics></math>. We filter out low-confidence regions from <math alttext="X_{s}" class="ltx_Math" display="inline" id="S3.SS1.p2.5.m5.1"><semantics id="S3.SS1.p2.5.m5.1a"><msub id="S3.SS1.p2.5.m5.1.1" xref="S3.SS1.p2.5.m5.1.1.cmml"><mi id="S3.SS1.p2.5.m5.1.1.2" xref="S3.SS1.p2.5.m5.1.1.2.cmml">X</mi><mi id="S3.SS1.p2.5.m5.1.1.3" xref="S3.SS1.p2.5.m5.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.5.m5.1b"><apply id="S3.SS1.p2.5.m5.1.1.cmml" xref="S3.SS1.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.5.m5.1.1.1.cmml" xref="S3.SS1.p2.5.m5.1.1">subscript</csymbol><ci id="S3.SS1.p2.5.m5.1.1.2.cmml" xref="S3.SS1.p2.5.m5.1.1.2">𝑋</ci><ci id="S3.SS1.p2.5.m5.1.1.3.cmml" xref="S3.SS1.p2.5.m5.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.5.m5.1c">X_{s}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.5.m5.1d">italic_X start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math> to obtain the filtered mask <math alttext="X^{s}_{c}" class="ltx_Math" display="inline" id="S3.SS1.p2.6.m6.1"><semantics id="S3.SS1.p2.6.m6.1a"><msubsup id="S3.SS1.p2.6.m6.1.1" xref="S3.SS1.p2.6.m6.1.1.cmml"><mi id="S3.SS1.p2.6.m6.1.1.2.2" xref="S3.SS1.p2.6.m6.1.1.2.2.cmml">X</mi><mi id="S3.SS1.p2.6.m6.1.1.3" xref="S3.SS1.p2.6.m6.1.1.3.cmml">c</mi><mi id="S3.SS1.p2.6.m6.1.1.2.3" xref="S3.SS1.p2.6.m6.1.1.2.3.cmml">s</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.6.m6.1b"><apply id="S3.SS1.p2.6.m6.1.1.cmml" xref="S3.SS1.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.6.m6.1.1.1.cmml" xref="S3.SS1.p2.6.m6.1.1">subscript</csymbol><apply id="S3.SS1.p2.6.m6.1.1.2.cmml" xref="S3.SS1.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.6.m6.1.1.2.1.cmml" xref="S3.SS1.p2.6.m6.1.1">superscript</csymbol><ci id="S3.SS1.p2.6.m6.1.1.2.2.cmml" xref="S3.SS1.p2.6.m6.1.1.2.2">𝑋</ci><ci id="S3.SS1.p2.6.m6.1.1.2.3.cmml" xref="S3.SS1.p2.6.m6.1.1.2.3">𝑠</ci></apply><ci id="S3.SS1.p2.6.m6.1.1.3.cmml" xref="S3.SS1.p2.6.m6.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.6.m6.1c">X^{s}_{c}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.6.m6.1d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_c end_POSTSUBSCRIPT</annotation></semantics></math> and combine it with <math alttext="X^{v}" class="ltx_Math" display="inline" id="S3.SS1.p2.7.m7.1"><semantics id="S3.SS1.p2.7.m7.1a"><msup id="S3.SS1.p2.7.m7.1.1" xref="S3.SS1.p2.7.m7.1.1.cmml"><mi id="S3.SS1.p2.7.m7.1.1.2" xref="S3.SS1.p2.7.m7.1.1.2.cmml">X</mi><mi id="S3.SS1.p2.7.m7.1.1.3" xref="S3.SS1.p2.7.m7.1.1.3.cmml">v</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.7.m7.1b"><apply id="S3.SS1.p2.7.m7.1.1.cmml" xref="S3.SS1.p2.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.7.m7.1.1.1.cmml" xref="S3.SS1.p2.7.m7.1.1">superscript</csymbol><ci id="S3.SS1.p2.7.m7.1.1.2.cmml" xref="S3.SS1.p2.7.m7.1.1.2">𝑋</ci><ci id="S3.SS1.p2.7.m7.1.1.3.cmml" xref="S3.SS1.p2.7.m7.1.1.3">𝑣</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.7.m7.1c">X^{v}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.7.m7.1d">italic_X start_POSTSUPERSCRIPT italic_v end_POSTSUPERSCRIPT</annotation></semantics></math> to obtain the post-processed mask <math alttext="\hat{X}^{m}" class="ltx_Math" display="inline" id="S3.SS1.p2.8.m8.1"><semantics id="S3.SS1.p2.8.m8.1a"><msup id="S3.SS1.p2.8.m8.1.1" xref="S3.SS1.p2.8.m8.1.1.cmml"><mover accent="true" id="S3.SS1.p2.8.m8.1.1.2" xref="S3.SS1.p2.8.m8.1.1.2.cmml"><mi id="S3.SS1.p2.8.m8.1.1.2.2" xref="S3.SS1.p2.8.m8.1.1.2.2.cmml">X</mi><mo id="S3.SS1.p2.8.m8.1.1.2.1" xref="S3.SS1.p2.8.m8.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS1.p2.8.m8.1.1.3" xref="S3.SS1.p2.8.m8.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.8.m8.1b"><apply id="S3.SS1.p2.8.m8.1.1.cmml" xref="S3.SS1.p2.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.8.m8.1.1.1.cmml" xref="S3.SS1.p2.8.m8.1.1">superscript</csymbol><apply id="S3.SS1.p2.8.m8.1.1.2.cmml" xref="S3.SS1.p2.8.m8.1.1.2"><ci id="S3.SS1.p2.8.m8.1.1.2.1.cmml" xref="S3.SS1.p2.8.m8.1.1.2.1">^</ci><ci id="S3.SS1.p2.8.m8.1.1.2.2.cmml" xref="S3.SS1.p2.8.m8.1.1.2.2">𝑋</ci></apply><ci id="S3.SS1.p2.8.m8.1.1.3.cmml" xref="S3.SS1.p2.8.m8.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.8.m8.1c">\hat{X}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.8.m8.1d">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>. The details are described in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS2" title="3.2 In-situ Melanoma Detection ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Secs.</span> <span class="ltx_text ltx_ref_tag">3.2</span></a> and <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS3" title="3.3 Low-Confidence Region Filtering ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">3.3</span></a>.</p>
</div>
<div class="ltx_para" id="S3.SS1.p3">
<p class="ltx_p" id="S3.SS1.p3.1"><span class="ltx_text ltx_font_bold" id="S3.SS1.p3.1.1">Step 2. Prompt Generation</span>. We generate single point prompts from the post-processed mask <math alttext="\hat{X}^{m}" class="ltx_Math" display="inline" id="S3.SS1.p3.1.m1.1"><semantics id="S3.SS1.p3.1.m1.1a"><msup id="S3.SS1.p3.1.m1.1.1" xref="S3.SS1.p3.1.m1.1.1.cmml"><mover accent="true" id="S3.SS1.p3.1.m1.1.1.2" xref="S3.SS1.p3.1.m1.1.1.2.cmml"><mi id="S3.SS1.p3.1.m1.1.1.2.2" xref="S3.SS1.p3.1.m1.1.1.2.2.cmml">X</mi><mo id="S3.SS1.p3.1.m1.1.1.2.1" xref="S3.SS1.p3.1.m1.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS1.p3.1.m1.1.1.3" xref="S3.SS1.p3.1.m1.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.1.m1.1b"><apply id="S3.SS1.p3.1.m1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1">superscript</csymbol><apply id="S3.SS1.p3.1.m1.1.1.2.cmml" xref="S3.SS1.p3.1.m1.1.1.2"><ci id="S3.SS1.p3.1.m1.1.1.2.1.cmml" xref="S3.SS1.p3.1.m1.1.1.2.1">^</ci><ci id="S3.SS1.p3.1.m1.1.1.2.2.cmml" xref="S3.SS1.p3.1.m1.1.1.2.2">𝑋</ci></apply><ci id="S3.SS1.p3.1.m1.1.1.3.cmml" xref="S3.SS1.p3.1.m1.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.1.m1.1c">\hat{X}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.1.m1.1d">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>. We determine the best prompt type for each connected component based on its shape distribution and geometric characteristics. The details of the prompt generation strategy are described in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS4" title="3.4 Prompt Generation ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Sec.</span> <span class="ltx_text ltx_ref_tag">3.4</span></a>.</p>
</div>
<div class="ltx_para" id="S3.SS1.p4">
<p class="ltx_p" id="S3.SS1.p4.2"><span class="ltx_text ltx_font_bold" id="S3.SS1.p4.2.1">Step 3. Final Mask Generation</span>. We run SAM on the generated prompts to produce its own invasive melanoma mask <math alttext="\hat{Y}^{m}" class="ltx_Math" display="inline" id="S3.SS1.p4.1.m1.1"><semantics id="S3.SS1.p4.1.m1.1a"><msup id="S3.SS1.p4.1.m1.1.1" xref="S3.SS1.p4.1.m1.1.1.cmml"><mover accent="true" id="S3.SS1.p4.1.m1.1.1.2" xref="S3.SS1.p4.1.m1.1.1.2.cmml"><mi id="S3.SS1.p4.1.m1.1.1.2.2" xref="S3.SS1.p4.1.m1.1.1.2.2.cmml">Y</mi><mo id="S3.SS1.p4.1.m1.1.1.2.1" xref="S3.SS1.p4.1.m1.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS1.p4.1.m1.1.1.3" xref="S3.SS1.p4.1.m1.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.1.m1.1b"><apply id="S3.SS1.p4.1.m1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.1.m1.1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1">superscript</csymbol><apply id="S3.SS1.p4.1.m1.1.1.2.cmml" xref="S3.SS1.p4.1.m1.1.1.2"><ci id="S3.SS1.p4.1.m1.1.1.2.1.cmml" xref="S3.SS1.p4.1.m1.1.1.2.1">^</ci><ci id="S3.SS1.p4.1.m1.1.1.2.2.cmml" xref="S3.SS1.p4.1.m1.1.1.2.2">𝑌</ci></apply><ci id="S3.SS1.p4.1.m1.1.1.3.cmml" xref="S3.SS1.p4.1.m1.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.1.m1.1c">\hat{Y}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.1.m1.1d">over^ start_ARG italic_Y end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>. We use SAM’s mask to refine the post-processed mask <math alttext="\hat{X}^{m}" class="ltx_Math" display="inline" id="S3.SS1.p4.2.m2.1"><semantics id="S3.SS1.p4.2.m2.1a"><msup id="S3.SS1.p4.2.m2.1.1" xref="S3.SS1.p4.2.m2.1.1.cmml"><mover accent="true" id="S3.SS1.p4.2.m2.1.1.2" xref="S3.SS1.p4.2.m2.1.1.2.cmml"><mi id="S3.SS1.p4.2.m2.1.1.2.2" xref="S3.SS1.p4.2.m2.1.1.2.2.cmml">X</mi><mo id="S3.SS1.p4.2.m2.1.1.2.1" xref="S3.SS1.p4.2.m2.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS1.p4.2.m2.1.1.3" xref="S3.SS1.p4.2.m2.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.2.m2.1b"><apply id="S3.SS1.p4.2.m2.1.1.cmml" xref="S3.SS1.p4.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.1.1.1.cmml" xref="S3.SS1.p4.2.m2.1.1">superscript</csymbol><apply id="S3.SS1.p4.2.m2.1.1.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2"><ci id="S3.SS1.p4.2.m2.1.1.2.1.cmml" xref="S3.SS1.p4.2.m2.1.1.2.1">^</ci><ci id="S3.SS1.p4.2.m2.1.1.2.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2">𝑋</ci></apply><ci id="S3.SS1.p4.2.m2.1.1.3.cmml" xref="S3.SS1.p4.2.m2.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.2.m2.1c">\hat{X}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.2.m2.1d">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> by combining the two masks together. This aims to enhance the overall accuracy and robustness of melanoma segmentation. The details are described in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS5" title="3.5 Final Mask Generation ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Sec.</span> <span class="ltx_text ltx_ref_tag">3.5</span></a>.</p>
</div>
<figure class="ltx_figure" id="S3.F2">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel" id="S3.F2.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="382" id="S3.F2.sf1.g1" src="extracted/5886878/images/detection.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S3.F2.sf1.2.1.1" style="font-size:90%;">(a)</span> </span><span class="ltx_text" id="S3.F2.sf1.3.2" style="font-size:90%;">In-situ Melanoma Detection</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S3.F2.sf2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="632" id="S3.F2.sf2.g1" src="extracted/5886878/images/filter.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S3.F2.sf2.2.1.1" style="font-size:90%;">(b)</span> </span><span class="ltx_text" id="S3.F2.sf2.3.2" style="font-size:90%;">Low-Confidence Region Filtering</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S3.F2.8.4.1" style="font-size:90%;">Figure 2</span>: </span><span class="ltx_text" id="S3.F2.6.3" style="font-size:90%;">In-situ melanoma detection finds the estimated in-situ melanoma regions <math alttext="X^{s}" class="ltx_Math" display="inline" id="S3.F2.4.1.m1.1"><semantics id="S3.F2.4.1.m1.1b"><msup id="S3.F2.4.1.m1.1.1" xref="S3.F2.4.1.m1.1.1.cmml"><mi id="S3.F2.4.1.m1.1.1.2" xref="S3.F2.4.1.m1.1.1.2.cmml">X</mi><mi id="S3.F2.4.1.m1.1.1.3" xref="S3.F2.4.1.m1.1.1.3.cmml">s</mi></msup><annotation-xml encoding="MathML-Content" id="S3.F2.4.1.m1.1c"><apply id="S3.F2.4.1.m1.1.1.cmml" xref="S3.F2.4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.F2.4.1.m1.1.1.1.cmml" xref="S3.F2.4.1.m1.1.1">superscript</csymbol><ci id="S3.F2.4.1.m1.1.1.2.cmml" xref="S3.F2.4.1.m1.1.1.2">𝑋</ci><ci id="S3.F2.4.1.m1.1.1.3.cmml" xref="S3.F2.4.1.m1.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F2.4.1.m1.1d">X^{s}</annotation><annotation encoding="application/x-llamapun" id="S3.F2.4.1.m1.1e">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT</annotation></semantics></math> from the initial mask <math alttext="X" class="ltx_Math" display="inline" id="S3.F2.5.2.m2.1"><semantics id="S3.F2.5.2.m2.1b"><mi id="S3.F2.5.2.m2.1.1" xref="S3.F2.5.2.m2.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="S3.F2.5.2.m2.1c"><ci id="S3.F2.5.2.m2.1.1.cmml" xref="S3.F2.5.2.m2.1.1">𝑋</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.F2.5.2.m2.1d">X</annotation><annotation encoding="application/x-llamapun" id="S3.F2.5.2.m2.1e">italic_X</annotation></semantics></math>. Low-confidence region filtering discards low-confidence connected components from <math alttext="X^{s}" class="ltx_Math" display="inline" id="S3.F2.6.3.m3.1"><semantics id="S3.F2.6.3.m3.1b"><msup id="S3.F2.6.3.m3.1.1" xref="S3.F2.6.3.m3.1.1.cmml"><mi id="S3.F2.6.3.m3.1.1.2" xref="S3.F2.6.3.m3.1.1.2.cmml">X</mi><mi id="S3.F2.6.3.m3.1.1.3" xref="S3.F2.6.3.m3.1.1.3.cmml">s</mi></msup><annotation-xml encoding="MathML-Content" id="S3.F2.6.3.m3.1c"><apply id="S3.F2.6.3.m3.1.1.cmml" xref="S3.F2.6.3.m3.1.1"><csymbol cd="ambiguous" id="S3.F2.6.3.m3.1.1.1.cmml" xref="S3.F2.6.3.m3.1.1">superscript</csymbol><ci id="S3.F2.6.3.m3.1.1.2.cmml" xref="S3.F2.6.3.m3.1.1.2">𝑋</ci><ci id="S3.F2.6.3.m3.1.1.3.cmml" xref="S3.F2.6.3.m3.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F2.6.3.m3.1d">X^{s}</annotation><annotation encoding="application/x-llamapun" id="S3.F2.6.3.m3.1e">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT</annotation></semantics></math>.</span></figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>In-situ Melanoma Detection </h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.9">We exclude low-confidence invasive melanoma predictions that touch the epidermis, since these are considered to be in-situ melanoma from a medical perspective. This process is shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.F2.sf1" title="In Figure 2 ‣ 3.1 Overview of the Proposed Method ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">2(a)</span></a>. The initial mask <math alttext="X" class="ltx_Math" display="inline" id="S3.SS2.p1.1.m1.1"><semantics id="S3.SS2.p1.1.m1.1a"><mi id="S3.SS2.p1.1.m1.1.1" xref="S3.SS2.p1.1.m1.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.1.m1.1b"><ci id="S3.SS2.p1.1.m1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1">𝑋</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.1.m1.1c">X</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.1.m1.1d">italic_X</annotation></semantics></math> produced by Segformer contains both the epidermis mask <math alttext="X^{e}" class="ltx_Math" display="inline" id="S3.SS2.p1.2.m2.1"><semantics id="S3.SS2.p1.2.m2.1a"><msup id="S3.SS2.p1.2.m2.1.1" xref="S3.SS2.p1.2.m2.1.1.cmml"><mi id="S3.SS2.p1.2.m2.1.1.2" xref="S3.SS2.p1.2.m2.1.1.2.cmml">X</mi><mi id="S3.SS2.p1.2.m2.1.1.3" xref="S3.SS2.p1.2.m2.1.1.3.cmml">e</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.2.m2.1b"><apply id="S3.SS2.p1.2.m2.1.1.cmml" xref="S3.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.2.m2.1.1.1.cmml" xref="S3.SS2.p1.2.m2.1.1">superscript</csymbol><ci id="S3.SS2.p1.2.m2.1.1.2.cmml" xref="S3.SS2.p1.2.m2.1.1.2">𝑋</ci><ci id="S3.SS2.p1.2.m2.1.1.3.cmml" xref="S3.SS2.p1.2.m2.1.1.3">𝑒</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.2.m2.1c">X^{e}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.2.m2.1d">italic_X start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT</annotation></semantics></math>, and the invasive melanoma mask <math alttext="X^{m}" class="ltx_Math" display="inline" id="S3.SS2.p1.3.m3.1"><semantics id="S3.SS2.p1.3.m3.1a"><msup id="S3.SS2.p1.3.m3.1.1" xref="S3.SS2.p1.3.m3.1.1.cmml"><mi id="S3.SS2.p1.3.m3.1.1.2" xref="S3.SS2.p1.3.m3.1.1.2.cmml">X</mi><mi id="S3.SS2.p1.3.m3.1.1.3" xref="S3.SS2.p1.3.m3.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.3.m3.1b"><apply id="S3.SS2.p1.3.m3.1.1.cmml" xref="S3.SS2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.3.m3.1.1.1.cmml" xref="S3.SS2.p1.3.m3.1.1">superscript</csymbol><ci id="S3.SS2.p1.3.m3.1.1.2.cmml" xref="S3.SS2.p1.3.m3.1.1.2">𝑋</ci><ci id="S3.SS2.p1.3.m3.1.1.3.cmml" xref="S3.SS2.p1.3.m3.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.3.m3.1c">X^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.3.m3.1d">italic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>. The invasive melanoma mask can be represented as a union of invasive melanoma connected components (CCs) <math alttext="X^{m}=\bigcup X^{m}_{i}" class="ltx_Math" display="inline" id="S3.SS2.p1.4.m4.1"><semantics id="S3.SS2.p1.4.m4.1a"><mrow id="S3.SS2.p1.4.m4.1.1" xref="S3.SS2.p1.4.m4.1.1.cmml"><msup id="S3.SS2.p1.4.m4.1.1.2" xref="S3.SS2.p1.4.m4.1.1.2.cmml"><mi id="S3.SS2.p1.4.m4.1.1.2.2" xref="S3.SS2.p1.4.m4.1.1.2.2.cmml">X</mi><mi id="S3.SS2.p1.4.m4.1.1.2.3" xref="S3.SS2.p1.4.m4.1.1.2.3.cmml">m</mi></msup><mo id="S3.SS2.p1.4.m4.1.1.1" rspace="0.111em" xref="S3.SS2.p1.4.m4.1.1.1.cmml">=</mo><mrow id="S3.SS2.p1.4.m4.1.1.3" xref="S3.SS2.p1.4.m4.1.1.3.cmml"><mo id="S3.SS2.p1.4.m4.1.1.3.1" xref="S3.SS2.p1.4.m4.1.1.3.1.cmml">⋃</mo><msubsup id="S3.SS2.p1.4.m4.1.1.3.2" xref="S3.SS2.p1.4.m4.1.1.3.2.cmml"><mi id="S3.SS2.p1.4.m4.1.1.3.2.2.2" xref="S3.SS2.p1.4.m4.1.1.3.2.2.2.cmml">X</mi><mi id="S3.SS2.p1.4.m4.1.1.3.2.3" xref="S3.SS2.p1.4.m4.1.1.3.2.3.cmml">i</mi><mi id="S3.SS2.p1.4.m4.1.1.3.2.2.3" xref="S3.SS2.p1.4.m4.1.1.3.2.2.3.cmml">m</mi></msubsup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.4.m4.1b"><apply id="S3.SS2.p1.4.m4.1.1.cmml" xref="S3.SS2.p1.4.m4.1.1"><eq id="S3.SS2.p1.4.m4.1.1.1.cmml" xref="S3.SS2.p1.4.m4.1.1.1"></eq><apply id="S3.SS2.p1.4.m4.1.1.2.cmml" xref="S3.SS2.p1.4.m4.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.p1.4.m4.1.1.2.1.cmml" xref="S3.SS2.p1.4.m4.1.1.2">superscript</csymbol><ci id="S3.SS2.p1.4.m4.1.1.2.2.cmml" xref="S3.SS2.p1.4.m4.1.1.2.2">𝑋</ci><ci id="S3.SS2.p1.4.m4.1.1.2.3.cmml" xref="S3.SS2.p1.4.m4.1.1.2.3">𝑚</ci></apply><apply id="S3.SS2.p1.4.m4.1.1.3.cmml" xref="S3.SS2.p1.4.m4.1.1.3"><union id="S3.SS2.p1.4.m4.1.1.3.1.cmml" xref="S3.SS2.p1.4.m4.1.1.3.1"></union><apply id="S3.SS2.p1.4.m4.1.1.3.2.cmml" xref="S3.SS2.p1.4.m4.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS2.p1.4.m4.1.1.3.2.1.cmml" xref="S3.SS2.p1.4.m4.1.1.3.2">subscript</csymbol><apply id="S3.SS2.p1.4.m4.1.1.3.2.2.cmml" xref="S3.SS2.p1.4.m4.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS2.p1.4.m4.1.1.3.2.2.1.cmml" xref="S3.SS2.p1.4.m4.1.1.3.2">superscript</csymbol><ci id="S3.SS2.p1.4.m4.1.1.3.2.2.2.cmml" xref="S3.SS2.p1.4.m4.1.1.3.2.2.2">𝑋</ci><ci id="S3.SS2.p1.4.m4.1.1.3.2.2.3.cmml" xref="S3.SS2.p1.4.m4.1.1.3.2.2.3">𝑚</ci></apply><ci id="S3.SS2.p1.4.m4.1.1.3.2.3.cmml" xref="S3.SS2.p1.4.m4.1.1.3.2.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.4.m4.1c">X^{m}=\bigcup X^{m}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.4.m4.1d">italic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT = ⋃ italic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, where <math alttext="i" class="ltx_Math" display="inline" id="S3.SS2.p1.5.m5.1"><semantics id="S3.SS2.p1.5.m5.1a"><mi id="S3.SS2.p1.5.m5.1.1" xref="S3.SS2.p1.5.m5.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.5.m5.1b"><ci id="S3.SS2.p1.5.m5.1.1.cmml" xref="S3.SS2.p1.5.m5.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.5.m5.1c">i</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.5.m5.1d">italic_i</annotation></semantics></math> denotes the <math alttext="i" class="ltx_Math" display="inline" id="S3.SS2.p1.6.m6.1"><semantics id="S3.SS2.p1.6.m6.1a"><mi id="S3.SS2.p1.6.m6.1.1" xref="S3.SS2.p1.6.m6.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.6.m6.1b"><ci id="S3.SS2.p1.6.m6.1.1.cmml" xref="S3.SS2.p1.6.m6.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.6.m6.1c">i</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.6.m6.1d">italic_i</annotation></semantics></math>th invasive melanoma connected component. Similarly, the mask for epidermis can be represented as <math alttext="X^{e}=\bigcup X^{e}_{j}" class="ltx_Math" display="inline" id="S3.SS2.p1.7.m7.1"><semantics id="S3.SS2.p1.7.m7.1a"><mrow id="S3.SS2.p1.7.m7.1.1" xref="S3.SS2.p1.7.m7.1.1.cmml"><msup id="S3.SS2.p1.7.m7.1.1.2" xref="S3.SS2.p1.7.m7.1.1.2.cmml"><mi id="S3.SS2.p1.7.m7.1.1.2.2" xref="S3.SS2.p1.7.m7.1.1.2.2.cmml">X</mi><mi id="S3.SS2.p1.7.m7.1.1.2.3" xref="S3.SS2.p1.7.m7.1.1.2.3.cmml">e</mi></msup><mo id="S3.SS2.p1.7.m7.1.1.1" rspace="0.111em" xref="S3.SS2.p1.7.m7.1.1.1.cmml">=</mo><mrow id="S3.SS2.p1.7.m7.1.1.3" xref="S3.SS2.p1.7.m7.1.1.3.cmml"><mo id="S3.SS2.p1.7.m7.1.1.3.1" xref="S3.SS2.p1.7.m7.1.1.3.1.cmml">⋃</mo><msubsup id="S3.SS2.p1.7.m7.1.1.3.2" xref="S3.SS2.p1.7.m7.1.1.3.2.cmml"><mi id="S3.SS2.p1.7.m7.1.1.3.2.2.2" xref="S3.SS2.p1.7.m7.1.1.3.2.2.2.cmml">X</mi><mi id="S3.SS2.p1.7.m7.1.1.3.2.3" xref="S3.SS2.p1.7.m7.1.1.3.2.3.cmml">j</mi><mi id="S3.SS2.p1.7.m7.1.1.3.2.2.3" xref="S3.SS2.p1.7.m7.1.1.3.2.2.3.cmml">e</mi></msubsup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.7.m7.1b"><apply id="S3.SS2.p1.7.m7.1.1.cmml" xref="S3.SS2.p1.7.m7.1.1"><eq id="S3.SS2.p1.7.m7.1.1.1.cmml" xref="S3.SS2.p1.7.m7.1.1.1"></eq><apply id="S3.SS2.p1.7.m7.1.1.2.cmml" xref="S3.SS2.p1.7.m7.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.p1.7.m7.1.1.2.1.cmml" xref="S3.SS2.p1.7.m7.1.1.2">superscript</csymbol><ci id="S3.SS2.p1.7.m7.1.1.2.2.cmml" xref="S3.SS2.p1.7.m7.1.1.2.2">𝑋</ci><ci id="S3.SS2.p1.7.m7.1.1.2.3.cmml" xref="S3.SS2.p1.7.m7.1.1.2.3">𝑒</ci></apply><apply id="S3.SS2.p1.7.m7.1.1.3.cmml" xref="S3.SS2.p1.7.m7.1.1.3"><union id="S3.SS2.p1.7.m7.1.1.3.1.cmml" xref="S3.SS2.p1.7.m7.1.1.3.1"></union><apply id="S3.SS2.p1.7.m7.1.1.3.2.cmml" xref="S3.SS2.p1.7.m7.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS2.p1.7.m7.1.1.3.2.1.cmml" xref="S3.SS2.p1.7.m7.1.1.3.2">subscript</csymbol><apply id="S3.SS2.p1.7.m7.1.1.3.2.2.cmml" xref="S3.SS2.p1.7.m7.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS2.p1.7.m7.1.1.3.2.2.1.cmml" xref="S3.SS2.p1.7.m7.1.1.3.2">superscript</csymbol><ci id="S3.SS2.p1.7.m7.1.1.3.2.2.2.cmml" xref="S3.SS2.p1.7.m7.1.1.3.2.2.2">𝑋</ci><ci id="S3.SS2.p1.7.m7.1.1.3.2.2.3.cmml" xref="S3.SS2.p1.7.m7.1.1.3.2.2.3">𝑒</ci></apply><ci id="S3.SS2.p1.7.m7.1.1.3.2.3.cmml" xref="S3.SS2.p1.7.m7.1.1.3.2.3">𝑗</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.7.m7.1c">X^{e}=\bigcup X^{e}_{j}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.7.m7.1d">italic_X start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT = ⋃ italic_X start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT</annotation></semantics></math>, where <math alttext="j" class="ltx_Math" display="inline" id="S3.SS2.p1.8.m8.1"><semantics id="S3.SS2.p1.8.m8.1a"><mi id="S3.SS2.p1.8.m8.1.1" xref="S3.SS2.p1.8.m8.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.8.m8.1b"><ci id="S3.SS2.p1.8.m8.1.1.cmml" xref="S3.SS2.p1.8.m8.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.8.m8.1c">j</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.8.m8.1d">italic_j</annotation></semantics></math> denotes the <math alttext="jth" class="ltx_Math" display="inline" id="S3.SS2.p1.9.m9.1"><semantics id="S3.SS2.p1.9.m9.1a"><mrow id="S3.SS2.p1.9.m9.1.1" xref="S3.SS2.p1.9.m9.1.1.cmml"><mi id="S3.SS2.p1.9.m9.1.1.2" xref="S3.SS2.p1.9.m9.1.1.2.cmml">j</mi><mo id="S3.SS2.p1.9.m9.1.1.1" xref="S3.SS2.p1.9.m9.1.1.1.cmml">⁢</mo><mi id="S3.SS2.p1.9.m9.1.1.3" xref="S3.SS2.p1.9.m9.1.1.3.cmml">t</mi><mo id="S3.SS2.p1.9.m9.1.1.1a" xref="S3.SS2.p1.9.m9.1.1.1.cmml">⁢</mo><mi id="S3.SS2.p1.9.m9.1.1.4" xref="S3.SS2.p1.9.m9.1.1.4.cmml">h</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.9.m9.1b"><apply id="S3.SS2.p1.9.m9.1.1.cmml" xref="S3.SS2.p1.9.m9.1.1"><times id="S3.SS2.p1.9.m9.1.1.1.cmml" xref="S3.SS2.p1.9.m9.1.1.1"></times><ci id="S3.SS2.p1.9.m9.1.1.2.cmml" xref="S3.SS2.p1.9.m9.1.1.2">𝑗</ci><ci id="S3.SS2.p1.9.m9.1.1.3.cmml" xref="S3.SS2.p1.9.m9.1.1.3">𝑡</ci><ci id="S3.SS2.p1.9.m9.1.1.4.cmml" xref="S3.SS2.p1.9.m9.1.1.4">ℎ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.9.m9.1c">jth</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.9.m9.1d">italic_j italic_t italic_h</annotation></semantics></math> epidermis connected component. Since SAM heavily relies on prompts to specify the exact objects to segment, inaccurate and ambiguous prompts can significantly degrade its performance. This can lead SAM to produce more false positives compared to the initial segmentation mask from which prompts are generated. Therefore, we filter out low-confidence invasive melanoma components to improve the accuracy of prompts so that it is clicked on true positives in most cases.</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.8">To begin with, we iterate over all connected components <math alttext="X^{m}_{i}" class="ltx_Math" display="inline" id="S3.SS2.p2.1.m1.1"><semantics id="S3.SS2.p2.1.m1.1a"><msubsup id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml"><mi id="S3.SS2.p2.1.m1.1.1.2.2" xref="S3.SS2.p2.1.m1.1.1.2.2.cmml">X</mi><mi id="S3.SS2.p2.1.m1.1.1.3" xref="S3.SS2.p2.1.m1.1.1.3.cmml">i</mi><mi id="S3.SS2.p2.1.m1.1.1.2.3" xref="S3.SS2.p2.1.m1.1.1.2.3.cmml">m</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><apply id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1">subscript</csymbol><apply id="S3.SS2.p2.1.m1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.2.1.cmml" xref="S3.SS2.p2.1.m1.1.1">superscript</csymbol><ci id="S3.SS2.p2.1.m1.1.1.2.2.cmml" xref="S3.SS2.p2.1.m1.1.1.2.2">𝑋</ci><ci id="S3.SS2.p2.1.m1.1.1.2.3.cmml" xref="S3.SS2.p2.1.m1.1.1.2.3">𝑚</ci></apply><ci id="S3.SS2.p2.1.m1.1.1.3.cmml" xref="S3.SS2.p2.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">X^{m}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.1.m1.1d">italic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> in the invasive melanoma mask <math alttext="X^{m}" class="ltx_Math" display="inline" id="S3.SS2.p2.2.m2.1"><semantics id="S3.SS2.p2.2.m2.1a"><msup id="S3.SS2.p2.2.m2.1.1" xref="S3.SS2.p2.2.m2.1.1.cmml"><mi id="S3.SS2.p2.2.m2.1.1.2" xref="S3.SS2.p2.2.m2.1.1.2.cmml">X</mi><mi id="S3.SS2.p2.2.m2.1.1.3" xref="S3.SS2.p2.2.m2.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.2.m2.1b"><apply id="S3.SS2.p2.2.m2.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.1.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1">superscript</csymbol><ci id="S3.SS2.p2.2.m2.1.1.2.cmml" xref="S3.SS2.p2.2.m2.1.1.2">𝑋</ci><ci id="S3.SS2.p2.2.m2.1.1.3.cmml" xref="S3.SS2.p2.2.m2.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.2.m2.1c">X^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.2.m2.1d">italic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>. For each connected component, we determine whether it touches any epidermis component <math alttext="X^{e}_{j}" class="ltx_Math" display="inline" id="S3.SS2.p2.3.m3.1"><semantics id="S3.SS2.p2.3.m3.1a"><msubsup id="S3.SS2.p2.3.m3.1.1" xref="S3.SS2.p2.3.m3.1.1.cmml"><mi id="S3.SS2.p2.3.m3.1.1.2.2" xref="S3.SS2.p2.3.m3.1.1.2.2.cmml">X</mi><mi id="S3.SS2.p2.3.m3.1.1.3" xref="S3.SS2.p2.3.m3.1.1.3.cmml">j</mi><mi id="S3.SS2.p2.3.m3.1.1.2.3" xref="S3.SS2.p2.3.m3.1.1.2.3.cmml">e</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.3.m3.1b"><apply id="S3.SS2.p2.3.m3.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.3.m3.1.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1">subscript</csymbol><apply id="S3.SS2.p2.3.m3.1.1.2.cmml" xref="S3.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.3.m3.1.1.2.1.cmml" xref="S3.SS2.p2.3.m3.1.1">superscript</csymbol><ci id="S3.SS2.p2.3.m3.1.1.2.2.cmml" xref="S3.SS2.p2.3.m3.1.1.2.2">𝑋</ci><ci id="S3.SS2.p2.3.m3.1.1.2.3.cmml" xref="S3.SS2.p2.3.m3.1.1.2.3">𝑒</ci></apply><ci id="S3.SS2.p2.3.m3.1.1.3.cmml" xref="S3.SS2.p2.3.m3.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.3.m3.1c">X^{e}_{j}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.3.m3.1d">italic_X start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT</annotation></semantics></math>. If such a touch exists, we compute the ratio between the area of the melanoma component <math alttext="X^{m}_{i}" class="ltx_Math" display="inline" id="S3.SS2.p2.4.m4.1"><semantics id="S3.SS2.p2.4.m4.1a"><msubsup id="S3.SS2.p2.4.m4.1.1" xref="S3.SS2.p2.4.m4.1.1.cmml"><mi id="S3.SS2.p2.4.m4.1.1.2.2" xref="S3.SS2.p2.4.m4.1.1.2.2.cmml">X</mi><mi id="S3.SS2.p2.4.m4.1.1.3" xref="S3.SS2.p2.4.m4.1.1.3.cmml">i</mi><mi id="S3.SS2.p2.4.m4.1.1.2.3" xref="S3.SS2.p2.4.m4.1.1.2.3.cmml">m</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.4.m4.1b"><apply id="S3.SS2.p2.4.m4.1.1.cmml" xref="S3.SS2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.4.m4.1.1.1.cmml" xref="S3.SS2.p2.4.m4.1.1">subscript</csymbol><apply id="S3.SS2.p2.4.m4.1.1.2.cmml" xref="S3.SS2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.4.m4.1.1.2.1.cmml" xref="S3.SS2.p2.4.m4.1.1">superscript</csymbol><ci id="S3.SS2.p2.4.m4.1.1.2.2.cmml" xref="S3.SS2.p2.4.m4.1.1.2.2">𝑋</ci><ci id="S3.SS2.p2.4.m4.1.1.2.3.cmml" xref="S3.SS2.p2.4.m4.1.1.2.3">𝑚</ci></apply><ci id="S3.SS2.p2.4.m4.1.1.3.cmml" xref="S3.SS2.p2.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.4.m4.1c">X^{m}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.4.m4.1d">italic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and the area of the touched epidermis region <math alttext="X^{e}_{j}" class="ltx_Math" display="inline" id="S3.SS2.p2.5.m5.1"><semantics id="S3.SS2.p2.5.m5.1a"><msubsup id="S3.SS2.p2.5.m5.1.1" xref="S3.SS2.p2.5.m5.1.1.cmml"><mi id="S3.SS2.p2.5.m5.1.1.2.2" xref="S3.SS2.p2.5.m5.1.1.2.2.cmml">X</mi><mi id="S3.SS2.p2.5.m5.1.1.3" xref="S3.SS2.p2.5.m5.1.1.3.cmml">j</mi><mi id="S3.SS2.p2.5.m5.1.1.2.3" xref="S3.SS2.p2.5.m5.1.1.2.3.cmml">e</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.5.m5.1b"><apply id="S3.SS2.p2.5.m5.1.1.cmml" xref="S3.SS2.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.5.m5.1.1.1.cmml" xref="S3.SS2.p2.5.m5.1.1">subscript</csymbol><apply id="S3.SS2.p2.5.m5.1.1.2.cmml" xref="S3.SS2.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.5.m5.1.1.2.1.cmml" xref="S3.SS2.p2.5.m5.1.1">superscript</csymbol><ci id="S3.SS2.p2.5.m5.1.1.2.2.cmml" xref="S3.SS2.p2.5.m5.1.1.2.2">𝑋</ci><ci id="S3.SS2.p2.5.m5.1.1.2.3.cmml" xref="S3.SS2.p2.5.m5.1.1.2.3">𝑒</ci></apply><ci id="S3.SS2.p2.5.m5.1.1.3.cmml" xref="S3.SS2.p2.5.m5.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.5.m5.1c">X^{e}_{j}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.5.m5.1d">italic_X start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT</annotation></semantics></math>. If this ratio falls below a specified threshold <math alttext="\alpha_{m}" class="ltx_Math" display="inline" id="S3.SS2.p2.6.m6.1"><semantics id="S3.SS2.p2.6.m6.1a"><msub id="S3.SS2.p2.6.m6.1.1" xref="S3.SS2.p2.6.m6.1.1.cmml"><mi id="S3.SS2.p2.6.m6.1.1.2" xref="S3.SS2.p2.6.m6.1.1.2.cmml">α</mi><mi id="S3.SS2.p2.6.m6.1.1.3" xref="S3.SS2.p2.6.m6.1.1.3.cmml">m</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.6.m6.1b"><apply id="S3.SS2.p2.6.m6.1.1.cmml" xref="S3.SS2.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.6.m6.1.1.1.cmml" xref="S3.SS2.p2.6.m6.1.1">subscript</csymbol><ci id="S3.SS2.p2.6.m6.1.1.2.cmml" xref="S3.SS2.p2.6.m6.1.1.2">𝛼</ci><ci id="S3.SS2.p2.6.m6.1.1.3.cmml" xref="S3.SS2.p2.6.m6.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.6.m6.1c">\alpha_{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.6.m6.1d">italic_α start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT</annotation></semantics></math>, we classify it as an estimated in-situ melanoma region, This is because careful inspection of Segformer’s predictions shows that in-situ melanoma that are misclassified as invasive melanoma tend to have a relatively small size compared to the epidermis. This process results in the estimated in-situ melanoma mask <math alttext="X^{s}" class="ltx_Math" display="inline" id="S3.SS2.p2.7.m7.1"><semantics id="S3.SS2.p2.7.m7.1a"><msup id="S3.SS2.p2.7.m7.1.1" xref="S3.SS2.p2.7.m7.1.1.cmml"><mi id="S3.SS2.p2.7.m7.1.1.2" xref="S3.SS2.p2.7.m7.1.1.2.cmml">X</mi><mi id="S3.SS2.p2.7.m7.1.1.3" xref="S3.SS2.p2.7.m7.1.1.3.cmml">s</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.7.m7.1b"><apply id="S3.SS2.p2.7.m7.1.1.cmml" xref="S3.SS2.p2.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.7.m7.1.1.1.cmml" xref="S3.SS2.p2.7.m7.1.1">superscript</csymbol><ci id="S3.SS2.p2.7.m7.1.1.2.cmml" xref="S3.SS2.p2.7.m7.1.1.2">𝑋</ci><ci id="S3.SS2.p2.7.m7.1.1.3.cmml" xref="S3.SS2.p2.7.m7.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.7.m7.1c">X^{s}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.7.m7.1d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT</annotation></semantics></math> and the remaining invasive melanoma regions <math alttext="X^{v}" class="ltx_Math" display="inline" id="S3.SS2.p2.8.m8.1"><semantics id="S3.SS2.p2.8.m8.1a"><msup id="S3.SS2.p2.8.m8.1.1" xref="S3.SS2.p2.8.m8.1.1.cmml"><mi id="S3.SS2.p2.8.m8.1.1.2" xref="S3.SS2.p2.8.m8.1.1.2.cmml">X</mi><mi id="S3.SS2.p2.8.m8.1.1.3" xref="S3.SS2.p2.8.m8.1.1.3.cmml">v</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.8.m8.1b"><apply id="S3.SS2.p2.8.m8.1.1.cmml" xref="S3.SS2.p2.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.8.m8.1.1.1.cmml" xref="S3.SS2.p2.8.m8.1.1">superscript</csymbol><ci id="S3.SS2.p2.8.m8.1.1.2.cmml" xref="S3.SS2.p2.8.m8.1.1.2">𝑋</ci><ci id="S3.SS2.p2.8.m8.1.1.3.cmml" xref="S3.SS2.p2.8.m8.1.1.3">𝑣</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.8.m8.1c">X^{v}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.8.m8.1d">italic_X start_POSTSUPERSCRIPT italic_v end_POSTSUPERSCRIPT</annotation></semantics></math>.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Low-Confidence Region Filtering </h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.4">We further filter out low-confidence estimated in-situ melanoma regions from <math alttext="X^{s}" class="ltx_Math" display="inline" id="S3.SS3.p1.1.m1.1"><semantics id="S3.SS3.p1.1.m1.1a"><msup id="S3.SS3.p1.1.m1.1.1" xref="S3.SS3.p1.1.m1.1.1.cmml"><mi id="S3.SS3.p1.1.m1.1.1.2" xref="S3.SS3.p1.1.m1.1.1.2.cmml">X</mi><mi id="S3.SS3.p1.1.m1.1.1.3" xref="S3.SS3.p1.1.m1.1.1.3.cmml">s</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.1.m1.1b"><apply id="S3.SS3.p1.1.m1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.1.m1.1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1">superscript</csymbol><ci id="S3.SS3.p1.1.m1.1.1.2.cmml" xref="S3.SS3.p1.1.m1.1.1.2">𝑋</ci><ci id="S3.SS3.p1.1.m1.1.1.3.cmml" xref="S3.SS3.p1.1.m1.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.1.m1.1c">X^{s}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.1.m1.1d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT</annotation></semantics></math>. We keep high-confidence regions even if they touch the epidermis, since this could result from false predictions in the epidermis that make them touch each other. We determine the confidence level based on the probability map generated by Segformer. As shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.F2.sf2" title="In Figure 2 ‣ 3.1 Overview of the Proposed Method ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">2(b)</span></a>, for each component <math alttext="X^{s}_{i}" class="ltx_Math" display="inline" id="S3.SS3.p1.2.m2.1"><semantics id="S3.SS3.p1.2.m2.1a"><msubsup id="S3.SS3.p1.2.m2.1.1" xref="S3.SS3.p1.2.m2.1.1.cmml"><mi id="S3.SS3.p1.2.m2.1.1.2.2" xref="S3.SS3.p1.2.m2.1.1.2.2.cmml">X</mi><mi id="S3.SS3.p1.2.m2.1.1.3" xref="S3.SS3.p1.2.m2.1.1.3.cmml">i</mi><mi id="S3.SS3.p1.2.m2.1.1.2.3" xref="S3.SS3.p1.2.m2.1.1.2.3.cmml">s</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.2.m2.1b"><apply id="S3.SS3.p1.2.m2.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.2.m2.1.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1">subscript</csymbol><apply id="S3.SS3.p1.2.m2.1.1.2.cmml" xref="S3.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.2.m2.1.1.2.1.cmml" xref="S3.SS3.p1.2.m2.1.1">superscript</csymbol><ci id="S3.SS3.p1.2.m2.1.1.2.2.cmml" xref="S3.SS3.p1.2.m2.1.1.2.2">𝑋</ci><ci id="S3.SS3.p1.2.m2.1.1.2.3.cmml" xref="S3.SS3.p1.2.m2.1.1.2.3">𝑠</ci></apply><ci id="S3.SS3.p1.2.m2.1.1.3.cmml" xref="S3.SS3.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.2.m2.1c">X^{s}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.2.m2.1d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, we first find its high-confidence sub-component <math alttext="X^{s}_{i,\beta}" class="ltx_Math" display="inline" id="S3.SS3.p1.3.m3.2"><semantics id="S3.SS3.p1.3.m3.2a"><msubsup id="S3.SS3.p1.3.m3.2.3" xref="S3.SS3.p1.3.m3.2.3.cmml"><mi id="S3.SS3.p1.3.m3.2.3.2.2" xref="S3.SS3.p1.3.m3.2.3.2.2.cmml">X</mi><mrow id="S3.SS3.p1.3.m3.2.2.2.4" xref="S3.SS3.p1.3.m3.2.2.2.3.cmml"><mi id="S3.SS3.p1.3.m3.1.1.1.1" xref="S3.SS3.p1.3.m3.1.1.1.1.cmml">i</mi><mo id="S3.SS3.p1.3.m3.2.2.2.4.1" xref="S3.SS3.p1.3.m3.2.2.2.3.cmml">,</mo><mi id="S3.SS3.p1.3.m3.2.2.2.2" xref="S3.SS3.p1.3.m3.2.2.2.2.cmml">β</mi></mrow><mi id="S3.SS3.p1.3.m3.2.3.2.3" xref="S3.SS3.p1.3.m3.2.3.2.3.cmml">s</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.3.m3.2b"><apply id="S3.SS3.p1.3.m3.2.3.cmml" xref="S3.SS3.p1.3.m3.2.3"><csymbol cd="ambiguous" id="S3.SS3.p1.3.m3.2.3.1.cmml" xref="S3.SS3.p1.3.m3.2.3">subscript</csymbol><apply id="S3.SS3.p1.3.m3.2.3.2.cmml" xref="S3.SS3.p1.3.m3.2.3"><csymbol cd="ambiguous" id="S3.SS3.p1.3.m3.2.3.2.1.cmml" xref="S3.SS3.p1.3.m3.2.3">superscript</csymbol><ci id="S3.SS3.p1.3.m3.2.3.2.2.cmml" xref="S3.SS3.p1.3.m3.2.3.2.2">𝑋</ci><ci id="S3.SS3.p1.3.m3.2.3.2.3.cmml" xref="S3.SS3.p1.3.m3.2.3.2.3">𝑠</ci></apply><list id="S3.SS3.p1.3.m3.2.2.2.3.cmml" xref="S3.SS3.p1.3.m3.2.2.2.4"><ci id="S3.SS3.p1.3.m3.1.1.1.1.cmml" xref="S3.SS3.p1.3.m3.1.1.1.1">𝑖</ci><ci id="S3.SS3.p1.3.m3.2.2.2.2.cmml" xref="S3.SS3.p1.3.m3.2.2.2.2">𝛽</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.3.m3.2c">X^{s}_{i,\beta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.3.m3.2d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i , italic_β end_POSTSUBSCRIPT</annotation></semantics></math> that has a probability exceeding the defined threshold <math alttext="\beta" class="ltx_Math" display="inline" id="S3.SS3.p1.4.m4.1"><semantics id="S3.SS3.p1.4.m4.1a"><mi id="S3.SS3.p1.4.m4.1.1" xref="S3.SS3.p1.4.m4.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.4.m4.1b"><ci id="S3.SS3.p1.4.m4.1.1.cmml" xref="S3.SS3.p1.4.m4.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.4.m4.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.4.m4.1d">italic_β</annotation></semantics></math>:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="X^{s}_{i,\beta}=\{x\mid P(x)&gt;\beta,x\in X^{s}_{i}\}." class="ltx_Math" display="block" id="S3.E1.m1.5"><semantics id="S3.E1.m1.5a"><mrow id="S3.E1.m1.5.5.1" xref="S3.E1.m1.5.5.1.1.cmml"><mrow id="S3.E1.m1.5.5.1.1" xref="S3.E1.m1.5.5.1.1.cmml"><msubsup id="S3.E1.m1.5.5.1.1.3" xref="S3.E1.m1.5.5.1.1.3.cmml"><mi id="S3.E1.m1.5.5.1.1.3.2.2" xref="S3.E1.m1.5.5.1.1.3.2.2.cmml">X</mi><mrow id="S3.E1.m1.2.2.2.4" xref="S3.E1.m1.2.2.2.3.cmml"><mi id="S3.E1.m1.1.1.1.1" xref="S3.E1.m1.1.1.1.1.cmml">i</mi><mo id="S3.E1.m1.2.2.2.4.1" xref="S3.E1.m1.2.2.2.3.cmml">,</mo><mi id="S3.E1.m1.2.2.2.2" xref="S3.E1.m1.2.2.2.2.cmml">β</mi></mrow><mi id="S3.E1.m1.5.5.1.1.3.2.3" xref="S3.E1.m1.5.5.1.1.3.2.3.cmml">s</mi></msubsup><mo id="S3.E1.m1.5.5.1.1.2" xref="S3.E1.m1.5.5.1.1.2.cmml">=</mo><mrow id="S3.E1.m1.5.5.1.1.1.1" xref="S3.E1.m1.5.5.1.1.1.2.cmml"><mo id="S3.E1.m1.5.5.1.1.1.1.2" stretchy="false" xref="S3.E1.m1.5.5.1.1.1.2.1.cmml">{</mo><mi id="S3.E1.m1.4.4" xref="S3.E1.m1.4.4.cmml">x</mi><mo fence="true" id="S3.E1.m1.5.5.1.1.1.1.3" lspace="0em" rspace="0em" xref="S3.E1.m1.5.5.1.1.1.2.1.cmml">∣</mo><mrow id="S3.E1.m1.5.5.1.1.1.1.1.2" xref="S3.E1.m1.5.5.1.1.1.1.1.3.cmml"><mrow id="S3.E1.m1.5.5.1.1.1.1.1.1.1" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.cmml"><mrow id="S3.E1.m1.5.5.1.1.1.1.1.1.1.2" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.2" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.2.cmml">P</mi><mo id="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.1" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.1.cmml">⁢</mo><mrow id="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.3.2" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.cmml"><mo id="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.3.2.1" stretchy="false" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.cmml">(</mo><mi id="S3.E1.m1.3.3" xref="S3.E1.m1.3.3.cmml">x</mi><mo id="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.3.2.2" stretchy="false" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.5.5.1.1.1.1.1.1.1.1" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.1.cmml">&gt;</mo><mi id="S3.E1.m1.5.5.1.1.1.1.1.1.1.3" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.3.cmml">β</mi></mrow><mo id="S3.E1.m1.5.5.1.1.1.1.1.2.3" xref="S3.E1.m1.5.5.1.1.1.1.1.3a.cmml">,</mo><mrow id="S3.E1.m1.5.5.1.1.1.1.1.2.2" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.cmml"><mi id="S3.E1.m1.5.5.1.1.1.1.1.2.2.2" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.2.cmml">x</mi><mo id="S3.E1.m1.5.5.1.1.1.1.1.2.2.1" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.1.cmml">∈</mo><msubsup id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.cmml"><mi id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.2" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.2.cmml">X</mi><mi id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.3" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.3.cmml">i</mi><mi id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.3" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.3.cmml">s</mi></msubsup></mrow></mrow><mo id="S3.E1.m1.5.5.1.1.1.1.4" stretchy="false" xref="S3.E1.m1.5.5.1.1.1.2.1.cmml">}</mo></mrow></mrow><mo id="S3.E1.m1.5.5.1.2" lspace="0em" xref="S3.E1.m1.5.5.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.5b"><apply id="S3.E1.m1.5.5.1.1.cmml" xref="S3.E1.m1.5.5.1"><eq id="S3.E1.m1.5.5.1.1.2.cmml" xref="S3.E1.m1.5.5.1.1.2"></eq><apply id="S3.E1.m1.5.5.1.1.3.cmml" xref="S3.E1.m1.5.5.1.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.1.1.3.1.cmml" xref="S3.E1.m1.5.5.1.1.3">subscript</csymbol><apply id="S3.E1.m1.5.5.1.1.3.2.cmml" xref="S3.E1.m1.5.5.1.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.1.1.3.2.1.cmml" xref="S3.E1.m1.5.5.1.1.3">superscript</csymbol><ci id="S3.E1.m1.5.5.1.1.3.2.2.cmml" xref="S3.E1.m1.5.5.1.1.3.2.2">𝑋</ci><ci id="S3.E1.m1.5.5.1.1.3.2.3.cmml" xref="S3.E1.m1.5.5.1.1.3.2.3">𝑠</ci></apply><list id="S3.E1.m1.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.4"><ci id="S3.E1.m1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1">𝑖</ci><ci id="S3.E1.m1.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2">𝛽</ci></list></apply><apply id="S3.E1.m1.5.5.1.1.1.2.cmml" xref="S3.E1.m1.5.5.1.1.1.1"><csymbol cd="latexml" id="S3.E1.m1.5.5.1.1.1.2.1.cmml" xref="S3.E1.m1.5.5.1.1.1.1.2">conditional-set</csymbol><ci id="S3.E1.m1.4.4.cmml" xref="S3.E1.m1.4.4">𝑥</ci><apply id="S3.E1.m1.5.5.1.1.1.1.1.3.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.1.1.1.1.1.3a.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.3">formulae-sequence</csymbol><apply id="S3.E1.m1.5.5.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1"><gt id="S3.E1.m1.5.5.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.1"></gt><apply id="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.2"><times id="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.1"></times><ci id="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.2.2">𝑃</ci><ci id="S3.E1.m1.3.3.cmml" xref="S3.E1.m1.3.3">𝑥</ci></apply><ci id="S3.E1.m1.5.5.1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.1.1.3">𝛽</ci></apply><apply id="S3.E1.m1.5.5.1.1.1.1.1.2.2.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2"><in id="S3.E1.m1.5.5.1.1.1.1.1.2.2.1.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.1"></in><ci id="S3.E1.m1.5.5.1.1.1.1.1.2.2.2.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.2">𝑥</ci><apply id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.1.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3">subscript</csymbol><apply id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.1.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3">superscript</csymbol><ci id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.2.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.2">𝑋</ci><ci id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.3.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.2.3">𝑠</ci></apply><ci id="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.3.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1.2.2.3.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.5c">X^{s}_{i,\beta}=\{x\mid P(x)&gt;\beta,x\in X^{s}_{i}\}.</annotation><annotation encoding="application/x-llamapun" id="S3.E1.m1.5d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i , italic_β end_POSTSUBSCRIPT = { italic_x ∣ italic_P ( italic_x ) &gt; italic_β , italic_x ∈ italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.p1.11">We then determine the confidence level by computing the ratio between the area of <math alttext="X^{s}_{i,\beta}" class="ltx_Math" display="inline" id="S3.SS3.p1.5.m1.2"><semantics id="S3.SS3.p1.5.m1.2a"><msubsup id="S3.SS3.p1.5.m1.2.3" xref="S3.SS3.p1.5.m1.2.3.cmml"><mi id="S3.SS3.p1.5.m1.2.3.2.2" xref="S3.SS3.p1.5.m1.2.3.2.2.cmml">X</mi><mrow id="S3.SS3.p1.5.m1.2.2.2.4" xref="S3.SS3.p1.5.m1.2.2.2.3.cmml"><mi id="S3.SS3.p1.5.m1.1.1.1.1" xref="S3.SS3.p1.5.m1.1.1.1.1.cmml">i</mi><mo id="S3.SS3.p1.5.m1.2.2.2.4.1" xref="S3.SS3.p1.5.m1.2.2.2.3.cmml">,</mo><mi id="S3.SS3.p1.5.m1.2.2.2.2" xref="S3.SS3.p1.5.m1.2.2.2.2.cmml">β</mi></mrow><mi id="S3.SS3.p1.5.m1.2.3.2.3" xref="S3.SS3.p1.5.m1.2.3.2.3.cmml">s</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.5.m1.2b"><apply id="S3.SS3.p1.5.m1.2.3.cmml" xref="S3.SS3.p1.5.m1.2.3"><csymbol cd="ambiguous" id="S3.SS3.p1.5.m1.2.3.1.cmml" xref="S3.SS3.p1.5.m1.2.3">subscript</csymbol><apply id="S3.SS3.p1.5.m1.2.3.2.cmml" xref="S3.SS3.p1.5.m1.2.3"><csymbol cd="ambiguous" id="S3.SS3.p1.5.m1.2.3.2.1.cmml" xref="S3.SS3.p1.5.m1.2.3">superscript</csymbol><ci id="S3.SS3.p1.5.m1.2.3.2.2.cmml" xref="S3.SS3.p1.5.m1.2.3.2.2">𝑋</ci><ci id="S3.SS3.p1.5.m1.2.3.2.3.cmml" xref="S3.SS3.p1.5.m1.2.3.2.3">𝑠</ci></apply><list id="S3.SS3.p1.5.m1.2.2.2.3.cmml" xref="S3.SS3.p1.5.m1.2.2.2.4"><ci id="S3.SS3.p1.5.m1.1.1.1.1.cmml" xref="S3.SS3.p1.5.m1.1.1.1.1">𝑖</ci><ci id="S3.SS3.p1.5.m1.2.2.2.2.cmml" xref="S3.SS3.p1.5.m1.2.2.2.2">𝛽</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.5.m1.2c">X^{s}_{i,\beta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.5.m1.2d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i , italic_β end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="X^{s}_{i}" class="ltx_Math" display="inline" id="S3.SS3.p1.6.m2.1"><semantics id="S3.SS3.p1.6.m2.1a"><msubsup id="S3.SS3.p1.6.m2.1.1" xref="S3.SS3.p1.6.m2.1.1.cmml"><mi id="S3.SS3.p1.6.m2.1.1.2.2" xref="S3.SS3.p1.6.m2.1.1.2.2.cmml">X</mi><mi id="S3.SS3.p1.6.m2.1.1.3" xref="S3.SS3.p1.6.m2.1.1.3.cmml">i</mi><mi id="S3.SS3.p1.6.m2.1.1.2.3" xref="S3.SS3.p1.6.m2.1.1.2.3.cmml">s</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.6.m2.1b"><apply id="S3.SS3.p1.6.m2.1.1.cmml" xref="S3.SS3.p1.6.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.6.m2.1.1.1.cmml" xref="S3.SS3.p1.6.m2.1.1">subscript</csymbol><apply id="S3.SS3.p1.6.m2.1.1.2.cmml" xref="S3.SS3.p1.6.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.6.m2.1.1.2.1.cmml" xref="S3.SS3.p1.6.m2.1.1">superscript</csymbol><ci id="S3.SS3.p1.6.m2.1.1.2.2.cmml" xref="S3.SS3.p1.6.m2.1.1.2.2">𝑋</ci><ci id="S3.SS3.p1.6.m2.1.1.2.3.cmml" xref="S3.SS3.p1.6.m2.1.1.2.3">𝑠</ci></apply><ci id="S3.SS3.p1.6.m2.1.1.3.cmml" xref="S3.SS3.p1.6.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.6.m2.1c">X^{s}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.6.m2.1d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. If the ratio fails to meet the confidence threshold <math alttext="\alpha_{c}" class="ltx_Math" display="inline" id="S3.SS3.p1.7.m3.1"><semantics id="S3.SS3.p1.7.m3.1a"><msub id="S3.SS3.p1.7.m3.1.1" xref="S3.SS3.p1.7.m3.1.1.cmml"><mi id="S3.SS3.p1.7.m3.1.1.2" xref="S3.SS3.p1.7.m3.1.1.2.cmml">α</mi><mi id="S3.SS3.p1.7.m3.1.1.3" xref="S3.SS3.p1.7.m3.1.1.3.cmml">c</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.7.m3.1b"><apply id="S3.SS3.p1.7.m3.1.1.cmml" xref="S3.SS3.p1.7.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.7.m3.1.1.1.cmml" xref="S3.SS3.p1.7.m3.1.1">subscript</csymbol><ci id="S3.SS3.p1.7.m3.1.1.2.cmml" xref="S3.SS3.p1.7.m3.1.1.2">𝛼</ci><ci id="S3.SS3.p1.7.m3.1.1.3.cmml" xref="S3.SS3.p1.7.m3.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.7.m3.1c">\alpha_{c}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.7.m3.1d">italic_α start_POSTSUBSCRIPT italic_c end_POSTSUBSCRIPT</annotation></semantics></math>, we discard this component and do not generate prompts from it. Careful inspections of Segformer’s mask show that it generally predicts a larger proportion of low-probability areas for in-situ melanoma compared to invasive melanoma. Therefore, if we keep only regions with a high proportion of high probability areas, we can significantly reduce the number of false positives in <math alttext="X^{m}" class="ltx_Math" display="inline" id="S3.SS3.p1.8.m4.1"><semantics id="S3.SS3.p1.8.m4.1a"><msup id="S3.SS3.p1.8.m4.1.1" xref="S3.SS3.p1.8.m4.1.1.cmml"><mi id="S3.SS3.p1.8.m4.1.1.2" xref="S3.SS3.p1.8.m4.1.1.2.cmml">X</mi><mi id="S3.SS3.p1.8.m4.1.1.3" xref="S3.SS3.p1.8.m4.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.8.m4.1b"><apply id="S3.SS3.p1.8.m4.1.1.cmml" xref="S3.SS3.p1.8.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.8.m4.1.1.1.cmml" xref="S3.SS3.p1.8.m4.1.1">superscript</csymbol><ci id="S3.SS3.p1.8.m4.1.1.2.cmml" xref="S3.SS3.p1.8.m4.1.1.2">𝑋</ci><ci id="S3.SS3.p1.8.m4.1.1.3.cmml" xref="S3.SS3.p1.8.m4.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.8.m4.1c">X^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.8.m4.1d">italic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>. Next, we combine the filtered melanoma regions <math alttext="X^{s}_{c}" class="ltx_Math" display="inline" id="S3.SS3.p1.9.m5.1"><semantics id="S3.SS3.p1.9.m5.1a"><msubsup id="S3.SS3.p1.9.m5.1.1" xref="S3.SS3.p1.9.m5.1.1.cmml"><mi id="S3.SS3.p1.9.m5.1.1.2.2" xref="S3.SS3.p1.9.m5.1.1.2.2.cmml">X</mi><mi id="S3.SS3.p1.9.m5.1.1.3" xref="S3.SS3.p1.9.m5.1.1.3.cmml">c</mi><mi id="S3.SS3.p1.9.m5.1.1.2.3" xref="S3.SS3.p1.9.m5.1.1.2.3.cmml">s</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.9.m5.1b"><apply id="S3.SS3.p1.9.m5.1.1.cmml" xref="S3.SS3.p1.9.m5.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.9.m5.1.1.1.cmml" xref="S3.SS3.p1.9.m5.1.1">subscript</csymbol><apply id="S3.SS3.p1.9.m5.1.1.2.cmml" xref="S3.SS3.p1.9.m5.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.9.m5.1.1.2.1.cmml" xref="S3.SS3.p1.9.m5.1.1">superscript</csymbol><ci id="S3.SS3.p1.9.m5.1.1.2.2.cmml" xref="S3.SS3.p1.9.m5.1.1.2.2">𝑋</ci><ci id="S3.SS3.p1.9.m5.1.1.2.3.cmml" xref="S3.SS3.p1.9.m5.1.1.2.3">𝑠</ci></apply><ci id="S3.SS3.p1.9.m5.1.1.3.cmml" xref="S3.SS3.p1.9.m5.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.9.m5.1c">X^{s}_{c}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.9.m5.1d">italic_X start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_c end_POSTSUBSCRIPT</annotation></semantics></math> and the rest invasive melanoma regions <math alttext="X^{v}" class="ltx_Math" display="inline" id="S3.SS3.p1.10.m6.1"><semantics id="S3.SS3.p1.10.m6.1a"><msup id="S3.SS3.p1.10.m6.1.1" xref="S3.SS3.p1.10.m6.1.1.cmml"><mi id="S3.SS3.p1.10.m6.1.1.2" xref="S3.SS3.p1.10.m6.1.1.2.cmml">X</mi><mi id="S3.SS3.p1.10.m6.1.1.3" xref="S3.SS3.p1.10.m6.1.1.3.cmml">v</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.10.m6.1b"><apply id="S3.SS3.p1.10.m6.1.1.cmml" xref="S3.SS3.p1.10.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.10.m6.1.1.1.cmml" xref="S3.SS3.p1.10.m6.1.1">superscript</csymbol><ci id="S3.SS3.p1.10.m6.1.1.2.cmml" xref="S3.SS3.p1.10.m6.1.1.2">𝑋</ci><ci id="S3.SS3.p1.10.m6.1.1.3.cmml" xref="S3.SS3.p1.10.m6.1.1.3">𝑣</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.10.m6.1c">X^{v}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.10.m6.1d">italic_X start_POSTSUPERSCRIPT italic_v end_POSTSUPERSCRIPT</annotation></semantics></math> to obtain the post-processed invasive melanoma mask <math alttext="\hat{X}^{m}" class="ltx_Math" display="inline" id="S3.SS3.p1.11.m7.1"><semantics id="S3.SS3.p1.11.m7.1a"><msup id="S3.SS3.p1.11.m7.1.1" xref="S3.SS3.p1.11.m7.1.1.cmml"><mover accent="true" id="S3.SS3.p1.11.m7.1.1.2" xref="S3.SS3.p1.11.m7.1.1.2.cmml"><mi id="S3.SS3.p1.11.m7.1.1.2.2" xref="S3.SS3.p1.11.m7.1.1.2.2.cmml">X</mi><mo id="S3.SS3.p1.11.m7.1.1.2.1" xref="S3.SS3.p1.11.m7.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS3.p1.11.m7.1.1.3" xref="S3.SS3.p1.11.m7.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.11.m7.1b"><apply id="S3.SS3.p1.11.m7.1.1.cmml" xref="S3.SS3.p1.11.m7.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.11.m7.1.1.1.cmml" xref="S3.SS3.p1.11.m7.1.1">superscript</csymbol><apply id="S3.SS3.p1.11.m7.1.1.2.cmml" xref="S3.SS3.p1.11.m7.1.1.2"><ci id="S3.SS3.p1.11.m7.1.1.2.1.cmml" xref="S3.SS3.p1.11.m7.1.1.2.1">^</ci><ci id="S3.SS3.p1.11.m7.1.1.2.2.cmml" xref="S3.SS3.p1.11.m7.1.1.2.2">𝑋</ci></apply><ci id="S3.SS3.p1.11.m7.1.1.3.cmml" xref="S3.SS3.p1.11.m7.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.11.m7.1c">\hat{X}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.11.m7.1d">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>.</p>
</div>
<figure class="ltx_figure" id="S3.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="210" id="S3.F3.g1" src="extracted/5886878/images/prompt.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S3.F3.2.1.1" style="font-size:90%;">Figure 3</span>: </span><span class="ltx_text" id="S3.F3.3.2" style="font-size:90%;">Prompt Generation Strategy. We apply the centroid prompt and the grid prompt to based on the geometric characteristics of each connected component. </span></figcaption>
</figure>
<figure class="ltx_figure" id="S3.SS3.fig1">
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.2.1.1">Algorithm 1</span> </span> Determine prompt type for a connected component</figcaption>
<div class="ltx_listing ltx_listing" id="alg1.3">
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l1.1.1.1" style="font-size:80%;">1:</span></span>
</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l2.1.1.1" style="font-size:80%;">2:</span></span>A connected component of invasive melanoma: <math alttext="x" class="ltx_Math" display="inline" id="alg1.l2.m1.1"><semantics id="alg1.l2.m1.1a"><mi id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.1b"><ci id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.1d">italic_x</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l3.1.1.1" style="font-size:80%;">3:</span></span>The length of the side of a patch: <math alttext="s" class="ltx_Math" display="inline" id="alg1.l3.m1.1"><semantics id="alg1.l3.m1.1a"><mi id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b"><ci id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1">𝑠</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">s</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.1d">italic_s</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l4.1.1.1" style="font-size:80%;">4:</span></span>The threshold for the ratio between sides of a minimum bounding box: <math alttext="\alpha_{b}" class="ltx_Math" display="inline" id="alg1.l4.m1.1"><semantics id="alg1.l4.m1.1a"><msub id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml"><mi id="alg1.l4.m1.1.1.2" xref="alg1.l4.m1.1.1.2.cmml">α</mi><mi id="alg1.l4.m1.1.1.3" xref="alg1.l4.m1.1.1.3.cmml">b</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b"><apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1"><csymbol cd="ambiguous" id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1">subscript</csymbol><ci id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2">𝛼</ci><ci id="alg1.l4.m1.1.1.3.cmml" xref="alg1.l4.m1.1.1.3">𝑏</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.1c">\alpha_{b}</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.1d">italic_α start_POSTSUBSCRIPT italic_b end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l5.1.1.1" style="font-size:80%;">5:</span></span>
</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l6.1.1.1" style="font-size:80%;">6:</span></span>The generated prompts (a set of single point prompts): <math alttext="P" class="ltx_Math" display="inline" id="alg1.l6.m1.1"><semantics id="alg1.l6.m1.1a"><mi id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="alg1.l6.m1.1b"><ci id="alg1.l6.m1.1.1.cmml" xref="alg1.l6.m1.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m1.1c">P</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m1.1d">italic_P</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l7.1.1.1" style="font-size:80%;">7:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l7.2">function</span> <span class="ltx_text ltx_font_smallcaps" id="alg1.l7.3">GeneratePrompts</span>(x)

</div>
<div class="ltx_listingline" id="alg1.l8">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l8.1.1.1" style="font-size:80%;">8:</span></span>     <math alttext="P=\emptyset" class="ltx_Math" display="inline" id="alg1.l8.m1.1"><semantics id="alg1.l8.m1.1a"><mrow id="alg1.l8.m1.1.1" xref="alg1.l8.m1.1.1.cmml"><mi id="alg1.l8.m1.1.1.2" xref="alg1.l8.m1.1.1.2.cmml">P</mi><mo id="alg1.l8.m1.1.1.1" xref="alg1.l8.m1.1.1.1.cmml">=</mo><mi id="alg1.l8.m1.1.1.3" mathvariant="normal" xref="alg1.l8.m1.1.1.3.cmml">∅</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l8.m1.1b"><apply id="alg1.l8.m1.1.1.cmml" xref="alg1.l8.m1.1.1"><eq id="alg1.l8.m1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1"></eq><ci id="alg1.l8.m1.1.1.2.cmml" xref="alg1.l8.m1.1.1.2">𝑃</ci><emptyset id="alg1.l8.m1.1.1.3.cmml" xref="alg1.l8.m1.1.1.3"></emptyset></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8.m1.1c">P=\emptyset</annotation><annotation encoding="application/x-llamapun" id="alg1.l8.m1.1d">italic_P = ∅</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l9">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l9.1.1.1" style="font-size:80%;">9:</span></span>     <math alttext="w_{s},h_{s}=\textsc{FindAABB}(x)" class="ltx_Math" display="inline" id="alg1.l9.m1.3"><semantics id="alg1.l9.m1.3a"><mrow id="alg1.l9.m1.3.3" xref="alg1.l9.m1.3.3.cmml"><mrow id="alg1.l9.m1.3.3.2.2" xref="alg1.l9.m1.3.3.2.3.cmml"><msub id="alg1.l9.m1.2.2.1.1.1" xref="alg1.l9.m1.2.2.1.1.1.cmml"><mi id="alg1.l9.m1.2.2.1.1.1.2" xref="alg1.l9.m1.2.2.1.1.1.2.cmml">w</mi><mi id="alg1.l9.m1.2.2.1.1.1.3" xref="alg1.l9.m1.2.2.1.1.1.3.cmml">s</mi></msub><mo id="alg1.l9.m1.3.3.2.2.3" xref="alg1.l9.m1.3.3.2.3.cmml">,</mo><msub id="alg1.l9.m1.3.3.2.2.2" xref="alg1.l9.m1.3.3.2.2.2.cmml"><mi id="alg1.l9.m1.3.3.2.2.2.2" xref="alg1.l9.m1.3.3.2.2.2.2.cmml">h</mi><mi id="alg1.l9.m1.3.3.2.2.2.3" xref="alg1.l9.m1.3.3.2.2.2.3.cmml">s</mi></msub></mrow><mo id="alg1.l9.m1.3.3.3" xref="alg1.l9.m1.3.3.3.cmml">=</mo><mrow id="alg1.l9.m1.3.3.4" xref="alg1.l9.m1.3.3.4.cmml"><mtext class="ltx_font_smallcaps" id="alg1.l9.m1.3.3.4.2" xref="alg1.l9.m1.3.3.4.2a.cmml">FindAABB</mtext><mo id="alg1.l9.m1.3.3.4.1" xref="alg1.l9.m1.3.3.4.1.cmml">⁢</mo><mrow id="alg1.l9.m1.3.3.4.3.2" xref="alg1.l9.m1.3.3.4.cmml"><mo id="alg1.l9.m1.3.3.4.3.2.1" stretchy="false" xref="alg1.l9.m1.3.3.4.cmml">(</mo><mi id="alg1.l9.m1.1.1" xref="alg1.l9.m1.1.1.cmml">x</mi><mo id="alg1.l9.m1.3.3.4.3.2.2" stretchy="false" xref="alg1.l9.m1.3.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l9.m1.3b"><apply id="alg1.l9.m1.3.3.cmml" xref="alg1.l9.m1.3.3"><eq id="alg1.l9.m1.3.3.3.cmml" xref="alg1.l9.m1.3.3.3"></eq><list id="alg1.l9.m1.3.3.2.3.cmml" xref="alg1.l9.m1.3.3.2.2"><apply id="alg1.l9.m1.2.2.1.1.1.cmml" xref="alg1.l9.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="alg1.l9.m1.2.2.1.1.1.1.cmml" xref="alg1.l9.m1.2.2.1.1.1">subscript</csymbol><ci id="alg1.l9.m1.2.2.1.1.1.2.cmml" xref="alg1.l9.m1.2.2.1.1.1.2">𝑤</ci><ci id="alg1.l9.m1.2.2.1.1.1.3.cmml" xref="alg1.l9.m1.2.2.1.1.1.3">𝑠</ci></apply><apply id="alg1.l9.m1.3.3.2.2.2.cmml" xref="alg1.l9.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="alg1.l9.m1.3.3.2.2.2.1.cmml" xref="alg1.l9.m1.3.3.2.2.2">subscript</csymbol><ci id="alg1.l9.m1.3.3.2.2.2.2.cmml" xref="alg1.l9.m1.3.3.2.2.2.2">ℎ</ci><ci id="alg1.l9.m1.3.3.2.2.2.3.cmml" xref="alg1.l9.m1.3.3.2.2.2.3">𝑠</ci></apply></list><apply id="alg1.l9.m1.3.3.4.cmml" xref="alg1.l9.m1.3.3.4"><times id="alg1.l9.m1.3.3.4.1.cmml" xref="alg1.l9.m1.3.3.4.1"></times><ci id="alg1.l9.m1.3.3.4.2a.cmml" xref="alg1.l9.m1.3.3.4.2"><mtext class="ltx_font_smallcaps" id="alg1.l9.m1.3.3.4.2.cmml" xref="alg1.l9.m1.3.3.4.2">FindAABB</mtext></ci><ci id="alg1.l9.m1.1.1.cmml" xref="alg1.l9.m1.1.1">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l9.m1.3c">w_{s},h_{s}=\textsc{FindAABB}(x)</annotation><annotation encoding="application/x-llamapun" id="alg1.l9.m1.3d">italic_w start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT , italic_h start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT = FindAABB ( italic_x )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l10">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l10.1.1.1" style="font-size:80%;">10:</span></span>     <math alttext="w_{m},h_{m}=\textsc{FindMinAreaBB}(x)" class="ltx_Math" display="inline" id="alg1.l10.m1.3"><semantics id="alg1.l10.m1.3a"><mrow id="alg1.l10.m1.3.3" xref="alg1.l10.m1.3.3.cmml"><mrow id="alg1.l10.m1.3.3.2.2" xref="alg1.l10.m1.3.3.2.3.cmml"><msub id="alg1.l10.m1.2.2.1.1.1" xref="alg1.l10.m1.2.2.1.1.1.cmml"><mi id="alg1.l10.m1.2.2.1.1.1.2" xref="alg1.l10.m1.2.2.1.1.1.2.cmml">w</mi><mi id="alg1.l10.m1.2.2.1.1.1.3" xref="alg1.l10.m1.2.2.1.1.1.3.cmml">m</mi></msub><mo id="alg1.l10.m1.3.3.2.2.3" xref="alg1.l10.m1.3.3.2.3.cmml">,</mo><msub id="alg1.l10.m1.3.3.2.2.2" xref="alg1.l10.m1.3.3.2.2.2.cmml"><mi id="alg1.l10.m1.3.3.2.2.2.2" xref="alg1.l10.m1.3.3.2.2.2.2.cmml">h</mi><mi id="alg1.l10.m1.3.3.2.2.2.3" xref="alg1.l10.m1.3.3.2.2.2.3.cmml">m</mi></msub></mrow><mo id="alg1.l10.m1.3.3.3" xref="alg1.l10.m1.3.3.3.cmml">=</mo><mrow id="alg1.l10.m1.3.3.4" xref="alg1.l10.m1.3.3.4.cmml"><mtext class="ltx_font_smallcaps" id="alg1.l10.m1.3.3.4.2" xref="alg1.l10.m1.3.3.4.2a.cmml">FindMinAreaBB</mtext><mo id="alg1.l10.m1.3.3.4.1" xref="alg1.l10.m1.3.3.4.1.cmml">⁢</mo><mrow id="alg1.l10.m1.3.3.4.3.2" xref="alg1.l10.m1.3.3.4.cmml"><mo id="alg1.l10.m1.3.3.4.3.2.1" stretchy="false" xref="alg1.l10.m1.3.3.4.cmml">(</mo><mi id="alg1.l10.m1.1.1" xref="alg1.l10.m1.1.1.cmml">x</mi><mo id="alg1.l10.m1.3.3.4.3.2.2" stretchy="false" xref="alg1.l10.m1.3.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l10.m1.3b"><apply id="alg1.l10.m1.3.3.cmml" xref="alg1.l10.m1.3.3"><eq id="alg1.l10.m1.3.3.3.cmml" xref="alg1.l10.m1.3.3.3"></eq><list id="alg1.l10.m1.3.3.2.3.cmml" xref="alg1.l10.m1.3.3.2.2"><apply id="alg1.l10.m1.2.2.1.1.1.cmml" xref="alg1.l10.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="alg1.l10.m1.2.2.1.1.1.1.cmml" xref="alg1.l10.m1.2.2.1.1.1">subscript</csymbol><ci id="alg1.l10.m1.2.2.1.1.1.2.cmml" xref="alg1.l10.m1.2.2.1.1.1.2">𝑤</ci><ci id="alg1.l10.m1.2.2.1.1.1.3.cmml" xref="alg1.l10.m1.2.2.1.1.1.3">𝑚</ci></apply><apply id="alg1.l10.m1.3.3.2.2.2.cmml" xref="alg1.l10.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="alg1.l10.m1.3.3.2.2.2.1.cmml" xref="alg1.l10.m1.3.3.2.2.2">subscript</csymbol><ci id="alg1.l10.m1.3.3.2.2.2.2.cmml" xref="alg1.l10.m1.3.3.2.2.2.2">ℎ</ci><ci id="alg1.l10.m1.3.3.2.2.2.3.cmml" xref="alg1.l10.m1.3.3.2.2.2.3">𝑚</ci></apply></list><apply id="alg1.l10.m1.3.3.4.cmml" xref="alg1.l10.m1.3.3.4"><times id="alg1.l10.m1.3.3.4.1.cmml" xref="alg1.l10.m1.3.3.4.1"></times><ci id="alg1.l10.m1.3.3.4.2a.cmml" xref="alg1.l10.m1.3.3.4.2"><mtext class="ltx_font_smallcaps" id="alg1.l10.m1.3.3.4.2.cmml" xref="alg1.l10.m1.3.3.4.2">FindMinAreaBB</mtext></ci><ci id="alg1.l10.m1.1.1.cmml" xref="alg1.l10.m1.1.1">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l10.m1.3c">w_{m},h_{m}=\textsc{FindMinAreaBB}(x)</annotation><annotation encoding="application/x-llamapun" id="alg1.l10.m1.3d">italic_w start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT , italic_h start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT = FindMinAreaBB ( italic_x )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l11">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l11.1.1.1" style="font-size:80%;">11:</span></span>     <span class="ltx_text ltx_font_bold" id="alg1.l11.2">if</span> <math alttext="w_{s}&gt;s" class="ltx_Math" display="inline" id="alg1.l11.m1.1"><semantics id="alg1.l11.m1.1a"><mrow id="alg1.l11.m1.1.1" xref="alg1.l11.m1.1.1.cmml"><msub id="alg1.l11.m1.1.1.2" xref="alg1.l11.m1.1.1.2.cmml"><mi id="alg1.l11.m1.1.1.2.2" xref="alg1.l11.m1.1.1.2.2.cmml">w</mi><mi id="alg1.l11.m1.1.1.2.3" xref="alg1.l11.m1.1.1.2.3.cmml">s</mi></msub><mo id="alg1.l11.m1.1.1.1" xref="alg1.l11.m1.1.1.1.cmml">&gt;</mo><mi id="alg1.l11.m1.1.1.3" xref="alg1.l11.m1.1.1.3.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l11.m1.1b"><apply id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1"><gt id="alg1.l11.m1.1.1.1.cmml" xref="alg1.l11.m1.1.1.1"></gt><apply id="alg1.l11.m1.1.1.2.cmml" xref="alg1.l11.m1.1.1.2"><csymbol cd="ambiguous" id="alg1.l11.m1.1.1.2.1.cmml" xref="alg1.l11.m1.1.1.2">subscript</csymbol><ci id="alg1.l11.m1.1.1.2.2.cmml" xref="alg1.l11.m1.1.1.2.2">𝑤</ci><ci id="alg1.l11.m1.1.1.2.3.cmml" xref="alg1.l11.m1.1.1.2.3">𝑠</ci></apply><ci id="alg1.l11.m1.1.1.3.cmml" xref="alg1.l11.m1.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m1.1c">w_{s}&gt;s</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m1.1d">italic_w start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT &gt; italic_s</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l11.3">or</span> <math alttext="h_{s}&gt;s" class="ltx_Math" display="inline" id="alg1.l11.m2.1"><semantics id="alg1.l11.m2.1a"><mrow id="alg1.l11.m2.1.1" xref="alg1.l11.m2.1.1.cmml"><msub id="alg1.l11.m2.1.1.2" xref="alg1.l11.m2.1.1.2.cmml"><mi id="alg1.l11.m2.1.1.2.2" xref="alg1.l11.m2.1.1.2.2.cmml">h</mi><mi id="alg1.l11.m2.1.1.2.3" xref="alg1.l11.m2.1.1.2.3.cmml">s</mi></msub><mo id="alg1.l11.m2.1.1.1" xref="alg1.l11.m2.1.1.1.cmml">&gt;</mo><mi id="alg1.l11.m2.1.1.3" xref="alg1.l11.m2.1.1.3.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l11.m2.1b"><apply id="alg1.l11.m2.1.1.cmml" xref="alg1.l11.m2.1.1"><gt id="alg1.l11.m2.1.1.1.cmml" xref="alg1.l11.m2.1.1.1"></gt><apply id="alg1.l11.m2.1.1.2.cmml" xref="alg1.l11.m2.1.1.2"><csymbol cd="ambiguous" id="alg1.l11.m2.1.1.2.1.cmml" xref="alg1.l11.m2.1.1.2">subscript</csymbol><ci id="alg1.l11.m2.1.1.2.2.cmml" xref="alg1.l11.m2.1.1.2.2">ℎ</ci><ci id="alg1.l11.m2.1.1.2.3.cmml" xref="alg1.l11.m2.1.1.2.3">𝑠</ci></apply><ci id="alg1.l11.m2.1.1.3.cmml" xref="alg1.l11.m2.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m2.1c">h_{s}&gt;s</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m2.1d">italic_h start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT &gt; italic_s</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l11.4">or</span> <math alttext="\frac{h_{m}}{w_{m}}&gt;\alpha_{b}" class="ltx_Math" display="inline" id="alg1.l11.m3.1"><semantics id="alg1.l11.m3.1a"><mrow id="alg1.l11.m3.1.1" xref="alg1.l11.m3.1.1.cmml"><mfrac id="alg1.l11.m3.1.1.2" xref="alg1.l11.m3.1.1.2.cmml"><msub id="alg1.l11.m3.1.1.2.2" xref="alg1.l11.m3.1.1.2.2.cmml"><mi id="alg1.l11.m3.1.1.2.2.2" xref="alg1.l11.m3.1.1.2.2.2.cmml">h</mi><mi id="alg1.l11.m3.1.1.2.2.3" xref="alg1.l11.m3.1.1.2.2.3.cmml">m</mi></msub><msub id="alg1.l11.m3.1.1.2.3" xref="alg1.l11.m3.1.1.2.3.cmml"><mi id="alg1.l11.m3.1.1.2.3.2" xref="alg1.l11.m3.1.1.2.3.2.cmml">w</mi><mi id="alg1.l11.m3.1.1.2.3.3" xref="alg1.l11.m3.1.1.2.3.3.cmml">m</mi></msub></mfrac><mo id="alg1.l11.m3.1.1.1" xref="alg1.l11.m3.1.1.1.cmml">&gt;</mo><msub id="alg1.l11.m3.1.1.3" xref="alg1.l11.m3.1.1.3.cmml"><mi id="alg1.l11.m3.1.1.3.2" xref="alg1.l11.m3.1.1.3.2.cmml">α</mi><mi id="alg1.l11.m3.1.1.3.3" xref="alg1.l11.m3.1.1.3.3.cmml">b</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="alg1.l11.m3.1b"><apply id="alg1.l11.m3.1.1.cmml" xref="alg1.l11.m3.1.1"><gt id="alg1.l11.m3.1.1.1.cmml" xref="alg1.l11.m3.1.1.1"></gt><apply id="alg1.l11.m3.1.1.2.cmml" xref="alg1.l11.m3.1.1.2"><divide id="alg1.l11.m3.1.1.2.1.cmml" xref="alg1.l11.m3.1.1.2"></divide><apply id="alg1.l11.m3.1.1.2.2.cmml" xref="alg1.l11.m3.1.1.2.2"><csymbol cd="ambiguous" id="alg1.l11.m3.1.1.2.2.1.cmml" xref="alg1.l11.m3.1.1.2.2">subscript</csymbol><ci id="alg1.l11.m3.1.1.2.2.2.cmml" xref="alg1.l11.m3.1.1.2.2.2">ℎ</ci><ci id="alg1.l11.m3.1.1.2.2.3.cmml" xref="alg1.l11.m3.1.1.2.2.3">𝑚</ci></apply><apply id="alg1.l11.m3.1.1.2.3.cmml" xref="alg1.l11.m3.1.1.2.3"><csymbol cd="ambiguous" id="alg1.l11.m3.1.1.2.3.1.cmml" xref="alg1.l11.m3.1.1.2.3">subscript</csymbol><ci id="alg1.l11.m3.1.1.2.3.2.cmml" xref="alg1.l11.m3.1.1.2.3.2">𝑤</ci><ci id="alg1.l11.m3.1.1.2.3.3.cmml" xref="alg1.l11.m3.1.1.2.3.3">𝑚</ci></apply></apply><apply id="alg1.l11.m3.1.1.3.cmml" xref="alg1.l11.m3.1.1.3"><csymbol cd="ambiguous" id="alg1.l11.m3.1.1.3.1.cmml" xref="alg1.l11.m3.1.1.3">subscript</csymbol><ci id="alg1.l11.m3.1.1.3.2.cmml" xref="alg1.l11.m3.1.1.3.2">𝛼</ci><ci id="alg1.l11.m3.1.1.3.3.cmml" xref="alg1.l11.m3.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m3.1c">\frac{h_{m}}{w_{m}}&gt;\alpha_{b}</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m3.1d">divide start_ARG italic_h start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT end_ARG start_ARG italic_w start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT end_ARG &gt; italic_α start_POSTSUBSCRIPT italic_b end_POSTSUBSCRIPT</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l11.5">then</span>
</div>
<div class="ltx_listingline" id="alg1.l12">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l12.1.1.1" style="font-size:80%;">12:</span></span>         <math alttext="P_{grid}=\textsc{GenerateGridPrompts}(x)" class="ltx_Math" display="inline" id="alg1.l12.m1.1"><semantics id="alg1.l12.m1.1a"><mrow id="alg1.l12.m1.1.2" xref="alg1.l12.m1.1.2.cmml"><msub id="alg1.l12.m1.1.2.2" xref="alg1.l12.m1.1.2.2.cmml"><mi id="alg1.l12.m1.1.2.2.2" xref="alg1.l12.m1.1.2.2.2.cmml">P</mi><mrow id="alg1.l12.m1.1.2.2.3" xref="alg1.l12.m1.1.2.2.3.cmml"><mi id="alg1.l12.m1.1.2.2.3.2" xref="alg1.l12.m1.1.2.2.3.2.cmml">g</mi><mo id="alg1.l12.m1.1.2.2.3.1" xref="alg1.l12.m1.1.2.2.3.1.cmml">⁢</mo><mi id="alg1.l12.m1.1.2.2.3.3" xref="alg1.l12.m1.1.2.2.3.3.cmml">r</mi><mo id="alg1.l12.m1.1.2.2.3.1a" xref="alg1.l12.m1.1.2.2.3.1.cmml">⁢</mo><mi id="alg1.l12.m1.1.2.2.3.4" xref="alg1.l12.m1.1.2.2.3.4.cmml">i</mi><mo id="alg1.l12.m1.1.2.2.3.1b" xref="alg1.l12.m1.1.2.2.3.1.cmml">⁢</mo><mi id="alg1.l12.m1.1.2.2.3.5" xref="alg1.l12.m1.1.2.2.3.5.cmml">d</mi></mrow></msub><mo id="alg1.l12.m1.1.2.1" xref="alg1.l12.m1.1.2.1.cmml">=</mo><mrow id="alg1.l12.m1.1.2.3" xref="alg1.l12.m1.1.2.3.cmml"><mtext class="ltx_font_smallcaps" id="alg1.l12.m1.1.2.3.2" xref="alg1.l12.m1.1.2.3.2a.cmml">GenerateGridPrompts</mtext><mo id="alg1.l12.m1.1.2.3.1" xref="alg1.l12.m1.1.2.3.1.cmml">⁢</mo><mrow id="alg1.l12.m1.1.2.3.3.2" xref="alg1.l12.m1.1.2.3.cmml"><mo id="alg1.l12.m1.1.2.3.3.2.1" stretchy="false" xref="alg1.l12.m1.1.2.3.cmml">(</mo><mi id="alg1.l12.m1.1.1" xref="alg1.l12.m1.1.1.cmml">x</mi><mo id="alg1.l12.m1.1.2.3.3.2.2" stretchy="false" xref="alg1.l12.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l12.m1.1b"><apply id="alg1.l12.m1.1.2.cmml" xref="alg1.l12.m1.1.2"><eq id="alg1.l12.m1.1.2.1.cmml" xref="alg1.l12.m1.1.2.1"></eq><apply id="alg1.l12.m1.1.2.2.cmml" xref="alg1.l12.m1.1.2.2"><csymbol cd="ambiguous" id="alg1.l12.m1.1.2.2.1.cmml" xref="alg1.l12.m1.1.2.2">subscript</csymbol><ci id="alg1.l12.m1.1.2.2.2.cmml" xref="alg1.l12.m1.1.2.2.2">𝑃</ci><apply id="alg1.l12.m1.1.2.2.3.cmml" xref="alg1.l12.m1.1.2.2.3"><times id="alg1.l12.m1.1.2.2.3.1.cmml" xref="alg1.l12.m1.1.2.2.3.1"></times><ci id="alg1.l12.m1.1.2.2.3.2.cmml" xref="alg1.l12.m1.1.2.2.3.2">𝑔</ci><ci id="alg1.l12.m1.1.2.2.3.3.cmml" xref="alg1.l12.m1.1.2.2.3.3">𝑟</ci><ci id="alg1.l12.m1.1.2.2.3.4.cmml" xref="alg1.l12.m1.1.2.2.3.4">𝑖</ci><ci id="alg1.l12.m1.1.2.2.3.5.cmml" xref="alg1.l12.m1.1.2.2.3.5">𝑑</ci></apply></apply><apply id="alg1.l12.m1.1.2.3.cmml" xref="alg1.l12.m1.1.2.3"><times id="alg1.l12.m1.1.2.3.1.cmml" xref="alg1.l12.m1.1.2.3.1"></times><ci id="alg1.l12.m1.1.2.3.2a.cmml" xref="alg1.l12.m1.1.2.3.2"><mtext class="ltx_font_smallcaps" id="alg1.l12.m1.1.2.3.2.cmml" xref="alg1.l12.m1.1.2.3.2">GenerateGridPrompts</mtext></ci><ci id="alg1.l12.m1.1.1.cmml" xref="alg1.l12.m1.1.1">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l12.m1.1c">P_{grid}=\textsc{GenerateGridPrompts}(x)</annotation><annotation encoding="application/x-llamapun" id="alg1.l12.m1.1d">italic_P start_POSTSUBSCRIPT italic_g italic_r italic_i italic_d end_POSTSUBSCRIPT = GenerateGridPrompts ( italic_x )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l13">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l13.1.1.1" style="font-size:80%;">13:</span></span>         <math alttext="P=P\cup P_{grid}" class="ltx_Math" display="inline" id="alg1.l13.m1.1"><semantics id="alg1.l13.m1.1a"><mrow id="alg1.l13.m1.1.1" xref="alg1.l13.m1.1.1.cmml"><mi id="alg1.l13.m1.1.1.2" xref="alg1.l13.m1.1.1.2.cmml">P</mi><mo id="alg1.l13.m1.1.1.1" xref="alg1.l13.m1.1.1.1.cmml">=</mo><mrow id="alg1.l13.m1.1.1.3" xref="alg1.l13.m1.1.1.3.cmml"><mi id="alg1.l13.m1.1.1.3.2" xref="alg1.l13.m1.1.1.3.2.cmml">P</mi><mo id="alg1.l13.m1.1.1.3.1" xref="alg1.l13.m1.1.1.3.1.cmml">∪</mo><msub id="alg1.l13.m1.1.1.3.3" xref="alg1.l13.m1.1.1.3.3.cmml"><mi id="alg1.l13.m1.1.1.3.3.2" xref="alg1.l13.m1.1.1.3.3.2.cmml">P</mi><mrow id="alg1.l13.m1.1.1.3.3.3" xref="alg1.l13.m1.1.1.3.3.3.cmml"><mi id="alg1.l13.m1.1.1.3.3.3.2" xref="alg1.l13.m1.1.1.3.3.3.2.cmml">g</mi><mo id="alg1.l13.m1.1.1.3.3.3.1" xref="alg1.l13.m1.1.1.3.3.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.3.3.3" xref="alg1.l13.m1.1.1.3.3.3.3.cmml">r</mi><mo id="alg1.l13.m1.1.1.3.3.3.1a" xref="alg1.l13.m1.1.1.3.3.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.3.3.4" xref="alg1.l13.m1.1.1.3.3.3.4.cmml">i</mi><mo id="alg1.l13.m1.1.1.3.3.3.1b" xref="alg1.l13.m1.1.1.3.3.3.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.3.3.3.5" xref="alg1.l13.m1.1.1.3.3.3.5.cmml">d</mi></mrow></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l13.m1.1b"><apply id="alg1.l13.m1.1.1.cmml" xref="alg1.l13.m1.1.1"><eq id="alg1.l13.m1.1.1.1.cmml" xref="alg1.l13.m1.1.1.1"></eq><ci id="alg1.l13.m1.1.1.2.cmml" xref="alg1.l13.m1.1.1.2">𝑃</ci><apply id="alg1.l13.m1.1.1.3.cmml" xref="alg1.l13.m1.1.1.3"><union id="alg1.l13.m1.1.1.3.1.cmml" xref="alg1.l13.m1.1.1.3.1"></union><ci id="alg1.l13.m1.1.1.3.2.cmml" xref="alg1.l13.m1.1.1.3.2">𝑃</ci><apply id="alg1.l13.m1.1.1.3.3.cmml" xref="alg1.l13.m1.1.1.3.3"><csymbol cd="ambiguous" id="alg1.l13.m1.1.1.3.3.1.cmml" xref="alg1.l13.m1.1.1.3.3">subscript</csymbol><ci id="alg1.l13.m1.1.1.3.3.2.cmml" xref="alg1.l13.m1.1.1.3.3.2">𝑃</ci><apply id="alg1.l13.m1.1.1.3.3.3.cmml" xref="alg1.l13.m1.1.1.3.3.3"><times id="alg1.l13.m1.1.1.3.3.3.1.cmml" xref="alg1.l13.m1.1.1.3.3.3.1"></times><ci id="alg1.l13.m1.1.1.3.3.3.2.cmml" xref="alg1.l13.m1.1.1.3.3.3.2">𝑔</ci><ci id="alg1.l13.m1.1.1.3.3.3.3.cmml" xref="alg1.l13.m1.1.1.3.3.3.3">𝑟</ci><ci id="alg1.l13.m1.1.1.3.3.3.4.cmml" xref="alg1.l13.m1.1.1.3.3.3.4">𝑖</ci><ci id="alg1.l13.m1.1.1.3.3.3.5.cmml" xref="alg1.l13.m1.1.1.3.3.3.5">𝑑</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l13.m1.1c">P=P\cup P_{grid}</annotation><annotation encoding="application/x-llamapun" id="alg1.l13.m1.1d">italic_P = italic_P ∪ italic_P start_POSTSUBSCRIPT italic_g italic_r italic_i italic_d end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l14">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l14.1.1.1" style="font-size:80%;">14:</span></span>         <math alttext="center=\textsc{FindCentroid}(x)" class="ltx_Math" display="inline" id="alg1.l14.m1.1"><semantics id="alg1.l14.m1.1a"><mrow id="alg1.l14.m1.1.2" xref="alg1.l14.m1.1.2.cmml"><mrow id="alg1.l14.m1.1.2.2" xref="alg1.l14.m1.1.2.2.cmml"><mi id="alg1.l14.m1.1.2.2.2" xref="alg1.l14.m1.1.2.2.2.cmml">c</mi><mo id="alg1.l14.m1.1.2.2.1" xref="alg1.l14.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.2.2.3" xref="alg1.l14.m1.1.2.2.3.cmml">e</mi><mo id="alg1.l14.m1.1.2.2.1a" xref="alg1.l14.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.2.2.4" xref="alg1.l14.m1.1.2.2.4.cmml">n</mi><mo id="alg1.l14.m1.1.2.2.1b" xref="alg1.l14.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.2.2.5" xref="alg1.l14.m1.1.2.2.5.cmml">t</mi><mo id="alg1.l14.m1.1.2.2.1c" xref="alg1.l14.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.2.2.6" xref="alg1.l14.m1.1.2.2.6.cmml">e</mi><mo id="alg1.l14.m1.1.2.2.1d" xref="alg1.l14.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.2.2.7" xref="alg1.l14.m1.1.2.2.7.cmml">r</mi></mrow><mo id="alg1.l14.m1.1.2.1" xref="alg1.l14.m1.1.2.1.cmml">=</mo><mrow id="alg1.l14.m1.1.2.3" xref="alg1.l14.m1.1.2.3.cmml"><mtext class="ltx_font_smallcaps" id="alg1.l14.m1.1.2.3.2" xref="alg1.l14.m1.1.2.3.2a.cmml">FindCentroid</mtext><mo id="alg1.l14.m1.1.2.3.1" xref="alg1.l14.m1.1.2.3.1.cmml">⁢</mo><mrow id="alg1.l14.m1.1.2.3.3.2" xref="alg1.l14.m1.1.2.3.cmml"><mo id="alg1.l14.m1.1.2.3.3.2.1" stretchy="false" xref="alg1.l14.m1.1.2.3.cmml">(</mo><mi id="alg1.l14.m1.1.1" xref="alg1.l14.m1.1.1.cmml">x</mi><mo id="alg1.l14.m1.1.2.3.3.2.2" stretchy="false" xref="alg1.l14.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l14.m1.1b"><apply id="alg1.l14.m1.1.2.cmml" xref="alg1.l14.m1.1.2"><eq id="alg1.l14.m1.1.2.1.cmml" xref="alg1.l14.m1.1.2.1"></eq><apply id="alg1.l14.m1.1.2.2.cmml" xref="alg1.l14.m1.1.2.2"><times id="alg1.l14.m1.1.2.2.1.cmml" xref="alg1.l14.m1.1.2.2.1"></times><ci id="alg1.l14.m1.1.2.2.2.cmml" xref="alg1.l14.m1.1.2.2.2">𝑐</ci><ci id="alg1.l14.m1.1.2.2.3.cmml" xref="alg1.l14.m1.1.2.2.3">𝑒</ci><ci id="alg1.l14.m1.1.2.2.4.cmml" xref="alg1.l14.m1.1.2.2.4">𝑛</ci><ci id="alg1.l14.m1.1.2.2.5.cmml" xref="alg1.l14.m1.1.2.2.5">𝑡</ci><ci id="alg1.l14.m1.1.2.2.6.cmml" xref="alg1.l14.m1.1.2.2.6">𝑒</ci><ci id="alg1.l14.m1.1.2.2.7.cmml" xref="alg1.l14.m1.1.2.2.7">𝑟</ci></apply><apply id="alg1.l14.m1.1.2.3.cmml" xref="alg1.l14.m1.1.2.3"><times id="alg1.l14.m1.1.2.3.1.cmml" xref="alg1.l14.m1.1.2.3.1"></times><ci id="alg1.l14.m1.1.2.3.2a.cmml" xref="alg1.l14.m1.1.2.3.2"><mtext class="ltx_font_smallcaps" id="alg1.l14.m1.1.2.3.2.cmml" xref="alg1.l14.m1.1.2.3.2">FindCentroid</mtext></ci><ci id="alg1.l14.m1.1.1.cmml" xref="alg1.l14.m1.1.1">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l14.m1.1c">center=\textsc{FindCentroid}(x)</annotation><annotation encoding="application/x-llamapun" id="alg1.l14.m1.1d">italic_c italic_e italic_n italic_t italic_e italic_r = FindCentroid ( italic_x )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l15">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l15.1.1.1" style="font-size:80%;">15:</span></span>         <span class="ltx_text ltx_font_bold" id="alg1.l15.2">if</span> <math alttext="center\in x" class="ltx_Math" display="inline" id="alg1.l15.m1.1"><semantics id="alg1.l15.m1.1a"><mrow id="alg1.l15.m1.1.1" xref="alg1.l15.m1.1.1.cmml"><mrow id="alg1.l15.m1.1.1.2" xref="alg1.l15.m1.1.1.2.cmml"><mi id="alg1.l15.m1.1.1.2.2" xref="alg1.l15.m1.1.1.2.2.cmml">c</mi><mo id="alg1.l15.m1.1.1.2.1" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.3" xref="alg1.l15.m1.1.1.2.3.cmml">e</mi><mo id="alg1.l15.m1.1.1.2.1a" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.4" xref="alg1.l15.m1.1.1.2.4.cmml">n</mi><mo id="alg1.l15.m1.1.1.2.1b" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.5" xref="alg1.l15.m1.1.1.2.5.cmml">t</mi><mo id="alg1.l15.m1.1.1.2.1c" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.6" xref="alg1.l15.m1.1.1.2.6.cmml">e</mi><mo id="alg1.l15.m1.1.1.2.1d" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.7" xref="alg1.l15.m1.1.1.2.7.cmml">r</mi></mrow><mo id="alg1.l15.m1.1.1.1" xref="alg1.l15.m1.1.1.1.cmml">∈</mo><mi id="alg1.l15.m1.1.1.3" xref="alg1.l15.m1.1.1.3.cmml">x</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l15.m1.1b"><apply id="alg1.l15.m1.1.1.cmml" xref="alg1.l15.m1.1.1"><in id="alg1.l15.m1.1.1.1.cmml" xref="alg1.l15.m1.1.1.1"></in><apply id="alg1.l15.m1.1.1.2.cmml" xref="alg1.l15.m1.1.1.2"><times id="alg1.l15.m1.1.1.2.1.cmml" xref="alg1.l15.m1.1.1.2.1"></times><ci id="alg1.l15.m1.1.1.2.2.cmml" xref="alg1.l15.m1.1.1.2.2">𝑐</ci><ci id="alg1.l15.m1.1.1.2.3.cmml" xref="alg1.l15.m1.1.1.2.3">𝑒</ci><ci id="alg1.l15.m1.1.1.2.4.cmml" xref="alg1.l15.m1.1.1.2.4">𝑛</ci><ci id="alg1.l15.m1.1.1.2.5.cmml" xref="alg1.l15.m1.1.1.2.5">𝑡</ci><ci id="alg1.l15.m1.1.1.2.6.cmml" xref="alg1.l15.m1.1.1.2.6">𝑒</ci><ci id="alg1.l15.m1.1.1.2.7.cmml" xref="alg1.l15.m1.1.1.2.7">𝑟</ci></apply><ci id="alg1.l15.m1.1.1.3.cmml" xref="alg1.l15.m1.1.1.3">𝑥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l15.m1.1c">center\in x</annotation><annotation encoding="application/x-llamapun" id="alg1.l15.m1.1d">italic_c italic_e italic_n italic_t italic_e italic_r ∈ italic_x</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l15.3">then</span>
</div>
<div class="ltx_listingline" id="alg1.l16">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l16.1.1.1" style="font-size:80%;">16:</span></span>              <math alttext="P=P\cup\{center\}" class="ltx_Math" display="inline" id="alg1.l16.m1.1"><semantics id="alg1.l16.m1.1a"><mrow id="alg1.l16.m1.1.1" xref="alg1.l16.m1.1.1.cmml"><mi id="alg1.l16.m1.1.1.3" xref="alg1.l16.m1.1.1.3.cmml">P</mi><mo id="alg1.l16.m1.1.1.2" xref="alg1.l16.m1.1.1.2.cmml">=</mo><mrow id="alg1.l16.m1.1.1.1" xref="alg1.l16.m1.1.1.1.cmml"><mi id="alg1.l16.m1.1.1.1.3" xref="alg1.l16.m1.1.1.1.3.cmml">P</mi><mo id="alg1.l16.m1.1.1.1.2" xref="alg1.l16.m1.1.1.1.2.cmml">∪</mo><mrow id="alg1.l16.m1.1.1.1.1.1" xref="alg1.l16.m1.1.1.1.1.2.cmml"><mo id="alg1.l16.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l16.m1.1.1.1.1.2.cmml">{</mo><mrow id="alg1.l16.m1.1.1.1.1.1.1" xref="alg1.l16.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l16.m1.1.1.1.1.1.1.2" xref="alg1.l16.m1.1.1.1.1.1.1.2.cmml">c</mi><mo id="alg1.l16.m1.1.1.1.1.1.1.1" xref="alg1.l16.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l16.m1.1.1.1.1.1.1.3" xref="alg1.l16.m1.1.1.1.1.1.1.3.cmml">e</mi><mo id="alg1.l16.m1.1.1.1.1.1.1.1a" xref="alg1.l16.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l16.m1.1.1.1.1.1.1.4" xref="alg1.l16.m1.1.1.1.1.1.1.4.cmml">n</mi><mo id="alg1.l16.m1.1.1.1.1.1.1.1b" xref="alg1.l16.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l16.m1.1.1.1.1.1.1.5" xref="alg1.l16.m1.1.1.1.1.1.1.5.cmml">t</mi><mo id="alg1.l16.m1.1.1.1.1.1.1.1c" xref="alg1.l16.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l16.m1.1.1.1.1.1.1.6" xref="alg1.l16.m1.1.1.1.1.1.1.6.cmml">e</mi><mo id="alg1.l16.m1.1.1.1.1.1.1.1d" xref="alg1.l16.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l16.m1.1.1.1.1.1.1.7" xref="alg1.l16.m1.1.1.1.1.1.1.7.cmml">r</mi></mrow><mo id="alg1.l16.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l16.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l16.m1.1b"><apply id="alg1.l16.m1.1.1.cmml" xref="alg1.l16.m1.1.1"><eq id="alg1.l16.m1.1.1.2.cmml" xref="alg1.l16.m1.1.1.2"></eq><ci id="alg1.l16.m1.1.1.3.cmml" xref="alg1.l16.m1.1.1.3">𝑃</ci><apply id="alg1.l16.m1.1.1.1.cmml" xref="alg1.l16.m1.1.1.1"><union id="alg1.l16.m1.1.1.1.2.cmml" xref="alg1.l16.m1.1.1.1.2"></union><ci id="alg1.l16.m1.1.1.1.3.cmml" xref="alg1.l16.m1.1.1.1.3">𝑃</ci><set id="alg1.l16.m1.1.1.1.1.2.cmml" xref="alg1.l16.m1.1.1.1.1.1"><apply id="alg1.l16.m1.1.1.1.1.1.1.cmml" xref="alg1.l16.m1.1.1.1.1.1.1"><times id="alg1.l16.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l16.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.3">𝑒</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.4">𝑛</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.5">𝑡</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.6">𝑒</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.7">𝑟</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l16.m1.1c">P=P\cup\{center\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l16.m1.1d">italic_P = italic_P ∪ { italic_c italic_e italic_n italic_t italic_e italic_r }</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l17">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l17.1.1.1" style="font-size:80%;">17:</span></span>         <span class="ltx_text ltx_font_bold" id="alg1.l17.2">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l17.3">if</span>
</div>
<div class="ltx_listingline" id="alg1.l18">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l18.1.1.1" style="font-size:80%;">18:</span></span>     <span class="ltx_text ltx_font_bold" id="alg1.l18.2">else</span>
</div>
<div class="ltx_listingline" id="alg1.l19">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l19.1.1.1" style="font-size:80%;">19:</span></span>         <math alttext="center=\textsc{FindCentroid}(x)" class="ltx_Math" display="inline" id="alg1.l19.m1.1"><semantics id="alg1.l19.m1.1a"><mrow id="alg1.l19.m1.1.2" xref="alg1.l19.m1.1.2.cmml"><mrow id="alg1.l19.m1.1.2.2" xref="alg1.l19.m1.1.2.2.cmml"><mi id="alg1.l19.m1.1.2.2.2" xref="alg1.l19.m1.1.2.2.2.cmml">c</mi><mo id="alg1.l19.m1.1.2.2.1" xref="alg1.l19.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.2.2.3" xref="alg1.l19.m1.1.2.2.3.cmml">e</mi><mo id="alg1.l19.m1.1.2.2.1a" xref="alg1.l19.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.2.2.4" xref="alg1.l19.m1.1.2.2.4.cmml">n</mi><mo id="alg1.l19.m1.1.2.2.1b" xref="alg1.l19.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.2.2.5" xref="alg1.l19.m1.1.2.2.5.cmml">t</mi><mo id="alg1.l19.m1.1.2.2.1c" xref="alg1.l19.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.2.2.6" xref="alg1.l19.m1.1.2.2.6.cmml">e</mi><mo id="alg1.l19.m1.1.2.2.1d" xref="alg1.l19.m1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.2.2.7" xref="alg1.l19.m1.1.2.2.7.cmml">r</mi></mrow><mo id="alg1.l19.m1.1.2.1" xref="alg1.l19.m1.1.2.1.cmml">=</mo><mrow id="alg1.l19.m1.1.2.3" xref="alg1.l19.m1.1.2.3.cmml"><mtext class="ltx_font_smallcaps" id="alg1.l19.m1.1.2.3.2" xref="alg1.l19.m1.1.2.3.2a.cmml">FindCentroid</mtext><mo id="alg1.l19.m1.1.2.3.1" xref="alg1.l19.m1.1.2.3.1.cmml">⁢</mo><mrow id="alg1.l19.m1.1.2.3.3.2" xref="alg1.l19.m1.1.2.3.cmml"><mo id="alg1.l19.m1.1.2.3.3.2.1" stretchy="false" xref="alg1.l19.m1.1.2.3.cmml">(</mo><mi id="alg1.l19.m1.1.1" xref="alg1.l19.m1.1.1.cmml">x</mi><mo id="alg1.l19.m1.1.2.3.3.2.2" stretchy="false" xref="alg1.l19.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l19.m1.1b"><apply id="alg1.l19.m1.1.2.cmml" xref="alg1.l19.m1.1.2"><eq id="alg1.l19.m1.1.2.1.cmml" xref="alg1.l19.m1.1.2.1"></eq><apply id="alg1.l19.m1.1.2.2.cmml" xref="alg1.l19.m1.1.2.2"><times id="alg1.l19.m1.1.2.2.1.cmml" xref="alg1.l19.m1.1.2.2.1"></times><ci id="alg1.l19.m1.1.2.2.2.cmml" xref="alg1.l19.m1.1.2.2.2">𝑐</ci><ci id="alg1.l19.m1.1.2.2.3.cmml" xref="alg1.l19.m1.1.2.2.3">𝑒</ci><ci id="alg1.l19.m1.1.2.2.4.cmml" xref="alg1.l19.m1.1.2.2.4">𝑛</ci><ci id="alg1.l19.m1.1.2.2.5.cmml" xref="alg1.l19.m1.1.2.2.5">𝑡</ci><ci id="alg1.l19.m1.1.2.2.6.cmml" xref="alg1.l19.m1.1.2.2.6">𝑒</ci><ci id="alg1.l19.m1.1.2.2.7.cmml" xref="alg1.l19.m1.1.2.2.7">𝑟</ci></apply><apply id="alg1.l19.m1.1.2.3.cmml" xref="alg1.l19.m1.1.2.3"><times id="alg1.l19.m1.1.2.3.1.cmml" xref="alg1.l19.m1.1.2.3.1"></times><ci id="alg1.l19.m1.1.2.3.2a.cmml" xref="alg1.l19.m1.1.2.3.2"><mtext class="ltx_font_smallcaps" id="alg1.l19.m1.1.2.3.2.cmml" xref="alg1.l19.m1.1.2.3.2">FindCentroid</mtext></ci><ci id="alg1.l19.m1.1.1.cmml" xref="alg1.l19.m1.1.1">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l19.m1.1c">center=\textsc{FindCentroid}(x)</annotation><annotation encoding="application/x-llamapun" id="alg1.l19.m1.1d">italic_c italic_e italic_n italic_t italic_e italic_r = FindCentroid ( italic_x )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l20">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l20.1.1.1" style="font-size:80%;">20:</span></span>         <math alttext="P=P\cup\{center\}" class="ltx_Math" display="inline" id="alg1.l20.m1.1"><semantics id="alg1.l20.m1.1a"><mrow id="alg1.l20.m1.1.1" xref="alg1.l20.m1.1.1.cmml"><mi id="alg1.l20.m1.1.1.3" xref="alg1.l20.m1.1.1.3.cmml">P</mi><mo id="alg1.l20.m1.1.1.2" xref="alg1.l20.m1.1.1.2.cmml">=</mo><mrow id="alg1.l20.m1.1.1.1" xref="alg1.l20.m1.1.1.1.cmml"><mi id="alg1.l20.m1.1.1.1.3" xref="alg1.l20.m1.1.1.1.3.cmml">P</mi><mo id="alg1.l20.m1.1.1.1.2" xref="alg1.l20.m1.1.1.1.2.cmml">∪</mo><mrow id="alg1.l20.m1.1.1.1.1.1" xref="alg1.l20.m1.1.1.1.1.2.cmml"><mo id="alg1.l20.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l20.m1.1.1.1.1.2.cmml">{</mo><mrow id="alg1.l20.m1.1.1.1.1.1.1" xref="alg1.l20.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l20.m1.1.1.1.1.1.1.2" xref="alg1.l20.m1.1.1.1.1.1.1.2.cmml">c</mi><mo id="alg1.l20.m1.1.1.1.1.1.1.1" xref="alg1.l20.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.1.1.1.1.3" xref="alg1.l20.m1.1.1.1.1.1.1.3.cmml">e</mi><mo id="alg1.l20.m1.1.1.1.1.1.1.1a" xref="alg1.l20.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.1.1.1.1.4" xref="alg1.l20.m1.1.1.1.1.1.1.4.cmml">n</mi><mo id="alg1.l20.m1.1.1.1.1.1.1.1b" xref="alg1.l20.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.1.1.1.1.5" xref="alg1.l20.m1.1.1.1.1.1.1.5.cmml">t</mi><mo id="alg1.l20.m1.1.1.1.1.1.1.1c" xref="alg1.l20.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.1.1.1.1.6" xref="alg1.l20.m1.1.1.1.1.1.1.6.cmml">e</mi><mo id="alg1.l20.m1.1.1.1.1.1.1.1d" xref="alg1.l20.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.1.1.1.1.7" xref="alg1.l20.m1.1.1.1.1.1.1.7.cmml">r</mi></mrow><mo id="alg1.l20.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l20.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l20.m1.1b"><apply id="alg1.l20.m1.1.1.cmml" xref="alg1.l20.m1.1.1"><eq id="alg1.l20.m1.1.1.2.cmml" xref="alg1.l20.m1.1.1.2"></eq><ci id="alg1.l20.m1.1.1.3.cmml" xref="alg1.l20.m1.1.1.3">𝑃</ci><apply id="alg1.l20.m1.1.1.1.cmml" xref="alg1.l20.m1.1.1.1"><union id="alg1.l20.m1.1.1.1.2.cmml" xref="alg1.l20.m1.1.1.1.2"></union><ci id="alg1.l20.m1.1.1.1.3.cmml" xref="alg1.l20.m1.1.1.1.3">𝑃</ci><set id="alg1.l20.m1.1.1.1.1.2.cmml" xref="alg1.l20.m1.1.1.1.1.1"><apply id="alg1.l20.m1.1.1.1.1.1.1.cmml" xref="alg1.l20.m1.1.1.1.1.1.1"><times id="alg1.l20.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l20.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l20.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l20.m1.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l20.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l20.m1.1.1.1.1.1.1.3">𝑒</ci><ci id="alg1.l20.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l20.m1.1.1.1.1.1.1.4">𝑛</ci><ci id="alg1.l20.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l20.m1.1.1.1.1.1.1.5">𝑡</ci><ci id="alg1.l20.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l20.m1.1.1.1.1.1.1.6">𝑒</ci><ci id="alg1.l20.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l20.m1.1.1.1.1.1.1.7">𝑟</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l20.m1.1c">P=P\cup\{center\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l20.m1.1d">italic_P = italic_P ∪ { italic_c italic_e italic_n italic_t italic_e italic_r }</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l21">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l21.1.1.1" style="font-size:80%;">21:</span></span>     <span class="ltx_text ltx_font_bold" id="alg1.l21.2">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l21.3">if</span>
</div>
<div class="ltx_listingline" id="alg1.l22">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l22.1.1.1" style="font-size:80%;">22:</span></span>     <span class="ltx_text ltx_font_bold" id="alg1.l22.2">return</span> P

</div>
<div class="ltx_listingline" id="alg1.l23">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l23.1.1.1" style="font-size:80%;">23:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l23.2">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l23.3">function</span>
</div>
</div>
</figure>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Prompt Generation </h3>
<div class="ltx_para" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.1">Melanoma can be in various forms in microscopy slide images, ranging from rounded clusters to jagged streaks or any combination of irregular shapes. To facilitate accurate segmentation of diverse morphologies, we design two types of point prompts: centroid and grid. Centroid prompts consist of a single point placed at the centroid of a connected component. On the other hand, grid prompts comprise a grid of points distributed within a connected component. As shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.F3" title="In 3.3 Low-Confidence Region Filtering ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">3</span></a>, we choose a prompt type for each connected component <math alttext="\hat{X}^{m}_{i}" class="ltx_Math" display="inline" id="S3.SS4.p1.1.m1.1"><semantics id="S3.SS4.p1.1.m1.1a"><msubsup id="S3.SS4.p1.1.m1.1.1" xref="S3.SS4.p1.1.m1.1.1.cmml"><mover accent="true" id="S3.SS4.p1.1.m1.1.1.2.2" xref="S3.SS4.p1.1.m1.1.1.2.2.cmml"><mi id="S3.SS4.p1.1.m1.1.1.2.2.2" xref="S3.SS4.p1.1.m1.1.1.2.2.2.cmml">X</mi><mo id="S3.SS4.p1.1.m1.1.1.2.2.1" xref="S3.SS4.p1.1.m1.1.1.2.2.1.cmml">^</mo></mover><mi id="S3.SS4.p1.1.m1.1.1.3" xref="S3.SS4.p1.1.m1.1.1.3.cmml">i</mi><mi id="S3.SS4.p1.1.m1.1.1.2.3" xref="S3.SS4.p1.1.m1.1.1.2.3.cmml">m</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.1.m1.1b"><apply id="S3.SS4.p1.1.m1.1.1.cmml" xref="S3.SS4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p1.1.m1.1.1.1.cmml" xref="S3.SS4.p1.1.m1.1.1">subscript</csymbol><apply id="S3.SS4.p1.1.m1.1.1.2.cmml" xref="S3.SS4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p1.1.m1.1.1.2.1.cmml" xref="S3.SS4.p1.1.m1.1.1">superscript</csymbol><apply id="S3.SS4.p1.1.m1.1.1.2.2.cmml" xref="S3.SS4.p1.1.m1.1.1.2.2"><ci id="S3.SS4.p1.1.m1.1.1.2.2.1.cmml" xref="S3.SS4.p1.1.m1.1.1.2.2.1">^</ci><ci id="S3.SS4.p1.1.m1.1.1.2.2.2.cmml" xref="S3.SS4.p1.1.m1.1.1.2.2.2">𝑋</ci></apply><ci id="S3.SS4.p1.1.m1.1.1.2.3.cmml" xref="S3.SS4.p1.1.m1.1.1.2.3">𝑚</ci></apply><ci id="S3.SS4.p1.1.m1.1.1.3.cmml" xref="S3.SS4.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.1.m1.1c">\hat{X}^{m}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.1.m1.1d">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and serve each point as a single point prompt for the SAM prompt encoder. We feed a patch centered at the point to the SAM image encoder, since this ideally provides maximum context.</p>
</div>
<div class="ltx_para" id="S3.SS4.p2">
<p class="ltx_p" id="S3.SS4.p2.1">We choose prompts dynamically based on the characteristics of the connected components. Centroid prompts excel in providing optimal context for small, regularly shaped melanoma, but often fail to provide sufficient context for those covering large regions and those with irregular shapes. In cases where a connected component is too large to fit inside a patch, numerous melanoma predictions are lost in a centered patch and not enough context is provided for its surroundings. Furthermore, if the centroid falls outside the component, it turns out to be a point prompt not clicked on invasive melanoma, resulting in false positives.</p>
</div>
<div class="ltx_para" id="S3.SS4.p3">
<p class="ltx_p" id="S3.SS4.p3.9">For each connected component <math alttext="\hat{X}^{m}_{i}" class="ltx_Math" display="inline" id="S3.SS4.p3.1.m1.1"><semantics id="S3.SS4.p3.1.m1.1a"><msubsup id="S3.SS4.p3.1.m1.1.1" xref="S3.SS4.p3.1.m1.1.1.cmml"><mover accent="true" id="S3.SS4.p3.1.m1.1.1.2.2" xref="S3.SS4.p3.1.m1.1.1.2.2.cmml"><mi id="S3.SS4.p3.1.m1.1.1.2.2.2" xref="S3.SS4.p3.1.m1.1.1.2.2.2.cmml">X</mi><mo id="S3.SS4.p3.1.m1.1.1.2.2.1" xref="S3.SS4.p3.1.m1.1.1.2.2.1.cmml">^</mo></mover><mi id="S3.SS4.p3.1.m1.1.1.3" xref="S3.SS4.p3.1.m1.1.1.3.cmml">i</mi><mi id="S3.SS4.p3.1.m1.1.1.2.3" xref="S3.SS4.p3.1.m1.1.1.2.3.cmml">m</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.1.m1.1b"><apply id="S3.SS4.p3.1.m1.1.1.cmml" xref="S3.SS4.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.1.m1.1.1.1.cmml" xref="S3.SS4.p3.1.m1.1.1">subscript</csymbol><apply id="S3.SS4.p3.1.m1.1.1.2.cmml" xref="S3.SS4.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.1.m1.1.1.2.1.cmml" xref="S3.SS4.p3.1.m1.1.1">superscript</csymbol><apply id="S3.SS4.p3.1.m1.1.1.2.2.cmml" xref="S3.SS4.p3.1.m1.1.1.2.2"><ci id="S3.SS4.p3.1.m1.1.1.2.2.1.cmml" xref="S3.SS4.p3.1.m1.1.1.2.2.1">^</ci><ci id="S3.SS4.p3.1.m1.1.1.2.2.2.cmml" xref="S3.SS4.p3.1.m1.1.1.2.2.2">𝑋</ci></apply><ci id="S3.SS4.p3.1.m1.1.1.2.3.cmml" xref="S3.SS4.p3.1.m1.1.1.2.3">𝑚</ci></apply><ci id="S3.SS4.p3.1.m1.1.1.3.cmml" xref="S3.SS4.p3.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.1.m1.1c">\hat{X}^{m}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.1.m1.1d">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, we determine the prompt type based on its shape distribution and geometric attributes, as detailed in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#alg1" title="In 3.3 Low-Confidence Region Filtering ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Algorithm</span> <span class="ltx_text ltx_ref_tag">1</span></a>. As shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.F3" title="In 3.3 Low-Confidence Region Filtering ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">3</span></a>, we find the width <math alttext="w_{s}" class="ltx_Math" display="inline" id="S3.SS4.p3.2.m2.1"><semantics id="S3.SS4.p3.2.m2.1a"><msub id="S3.SS4.p3.2.m2.1.1" xref="S3.SS4.p3.2.m2.1.1.cmml"><mi id="S3.SS4.p3.2.m2.1.1.2" xref="S3.SS4.p3.2.m2.1.1.2.cmml">w</mi><mi id="S3.SS4.p3.2.m2.1.1.3" xref="S3.SS4.p3.2.m2.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.2.m2.1b"><apply id="S3.SS4.p3.2.m2.1.1.cmml" xref="S3.SS4.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.2.m2.1.1.1.cmml" xref="S3.SS4.p3.2.m2.1.1">subscript</csymbol><ci id="S3.SS4.p3.2.m2.1.1.2.cmml" xref="S3.SS4.p3.2.m2.1.1.2">𝑤</ci><ci id="S3.SS4.p3.2.m2.1.1.3.cmml" xref="S3.SS4.p3.2.m2.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.2.m2.1c">w_{s}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.2.m2.1d">italic_w start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math> and height <math alttext="h_{s}" class="ltx_Math" display="inline" id="S3.SS4.p3.3.m3.1"><semantics id="S3.SS4.p3.3.m3.1a"><msub id="S3.SS4.p3.3.m3.1.1" xref="S3.SS4.p3.3.m3.1.1.cmml"><mi id="S3.SS4.p3.3.m3.1.1.2" xref="S3.SS4.p3.3.m3.1.1.2.cmml">h</mi><mi id="S3.SS4.p3.3.m3.1.1.3" xref="S3.SS4.p3.3.m3.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.3.m3.1b"><apply id="S3.SS4.p3.3.m3.1.1.cmml" xref="S3.SS4.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.3.m3.1.1.1.cmml" xref="S3.SS4.p3.3.m3.1.1">subscript</csymbol><ci id="S3.SS4.p3.3.m3.1.1.2.cmml" xref="S3.SS4.p3.3.m3.1.1.2">ℎ</ci><ci id="S3.SS4.p3.3.m3.1.1.3.cmml" xref="S3.SS4.p3.3.m3.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.3.m3.1c">h_{s}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.3.m3.1d">italic_h start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math> of an axis aligned bounding box (AABB). If either dimension exceeds the patch length, we use grid prompts. Then we find the width <math alttext="w_{m}" class="ltx_Math" display="inline" id="S3.SS4.p3.4.m4.1"><semantics id="S3.SS4.p3.4.m4.1a"><msub id="S3.SS4.p3.4.m4.1.1" xref="S3.SS4.p3.4.m4.1.1.cmml"><mi id="S3.SS4.p3.4.m4.1.1.2" xref="S3.SS4.p3.4.m4.1.1.2.cmml">w</mi><mi id="S3.SS4.p3.4.m4.1.1.3" xref="S3.SS4.p3.4.m4.1.1.3.cmml">m</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.4.m4.1b"><apply id="S3.SS4.p3.4.m4.1.1.cmml" xref="S3.SS4.p3.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.4.m4.1.1.1.cmml" xref="S3.SS4.p3.4.m4.1.1">subscript</csymbol><ci id="S3.SS4.p3.4.m4.1.1.2.cmml" xref="S3.SS4.p3.4.m4.1.1.2">𝑤</ci><ci id="S3.SS4.p3.4.m4.1.1.3.cmml" xref="S3.SS4.p3.4.m4.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.4.m4.1c">w_{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.4.m4.1d">italic_w start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT</annotation></semantics></math> and height <math alttext="h_{m}" class="ltx_Math" display="inline" id="S3.SS4.p3.5.m5.1"><semantics id="S3.SS4.p3.5.m5.1a"><msub id="S3.SS4.p3.5.m5.1.1" xref="S3.SS4.p3.5.m5.1.1.cmml"><mi id="S3.SS4.p3.5.m5.1.1.2" xref="S3.SS4.p3.5.m5.1.1.2.cmml">h</mi><mi id="S3.SS4.p3.5.m5.1.1.3" xref="S3.SS4.p3.5.m5.1.1.3.cmml">m</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.5.m5.1b"><apply id="S3.SS4.p3.5.m5.1.1.cmml" xref="S3.SS4.p3.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.5.m5.1.1.1.cmml" xref="S3.SS4.p3.5.m5.1.1">subscript</csymbol><ci id="S3.SS4.p3.5.m5.1.1.2.cmml" xref="S3.SS4.p3.5.m5.1.1.2">ℎ</ci><ci id="S3.SS4.p3.5.m5.1.1.3.cmml" xref="S3.SS4.p3.5.m5.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.5.m5.1c">h_{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.5.m5.1d">italic_h start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT</annotation></semantics></math> of an arbitrarily oriented bounding box with minimum area and check whether the ratio between <math alttext="h_{m}" class="ltx_Math" display="inline" id="S3.SS4.p3.6.m6.1"><semantics id="S3.SS4.p3.6.m6.1a"><msub id="S3.SS4.p3.6.m6.1.1" xref="S3.SS4.p3.6.m6.1.1.cmml"><mi id="S3.SS4.p3.6.m6.1.1.2" xref="S3.SS4.p3.6.m6.1.1.2.cmml">h</mi><mi id="S3.SS4.p3.6.m6.1.1.3" xref="S3.SS4.p3.6.m6.1.1.3.cmml">m</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.6.m6.1b"><apply id="S3.SS4.p3.6.m6.1.1.cmml" xref="S3.SS4.p3.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.6.m6.1.1.1.cmml" xref="S3.SS4.p3.6.m6.1.1">subscript</csymbol><ci id="S3.SS4.p3.6.m6.1.1.2.cmml" xref="S3.SS4.p3.6.m6.1.1.2">ℎ</ci><ci id="S3.SS4.p3.6.m6.1.1.3.cmml" xref="S3.SS4.p3.6.m6.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.6.m6.1c">h_{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.6.m6.1d">italic_h start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="w_{m}" class="ltx_Math" display="inline" id="S3.SS4.p3.7.m7.1"><semantics id="S3.SS4.p3.7.m7.1a"><msub id="S3.SS4.p3.7.m7.1.1" xref="S3.SS4.p3.7.m7.1.1.cmml"><mi id="S3.SS4.p3.7.m7.1.1.2" xref="S3.SS4.p3.7.m7.1.1.2.cmml">w</mi><mi id="S3.SS4.p3.7.m7.1.1.3" xref="S3.SS4.p3.7.m7.1.1.3.cmml">m</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.7.m7.1b"><apply id="S3.SS4.p3.7.m7.1.1.cmml" xref="S3.SS4.p3.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.7.m7.1.1.1.cmml" xref="S3.SS4.p3.7.m7.1.1">subscript</csymbol><ci id="S3.SS4.p3.7.m7.1.1.2.cmml" xref="S3.SS4.p3.7.m7.1.1.2">𝑤</ci><ci id="S3.SS4.p3.7.m7.1.1.3.cmml" xref="S3.SS4.p3.7.m7.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.7.m7.1c">w_{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.7.m7.1d">italic_w start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT</annotation></semantics></math> exceeds a threshold <math alttext="\alpha_{b}" class="ltx_Math" display="inline" id="S3.SS4.p3.8.m8.1"><semantics id="S3.SS4.p3.8.m8.1a"><msub id="S3.SS4.p3.8.m8.1.1" xref="S3.SS4.p3.8.m8.1.1.cmml"><mi id="S3.SS4.p3.8.m8.1.1.2" xref="S3.SS4.p3.8.m8.1.1.2.cmml">α</mi><mi id="S3.SS4.p3.8.m8.1.1.3" xref="S3.SS4.p3.8.m8.1.1.3.cmml">b</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.8.m8.1b"><apply id="S3.SS4.p3.8.m8.1.1.cmml" xref="S3.SS4.p3.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.8.m8.1.1.1.cmml" xref="S3.SS4.p3.8.m8.1.1">subscript</csymbol><ci id="S3.SS4.p3.8.m8.1.1.2.cmml" xref="S3.SS4.p3.8.m8.1.1.2">𝛼</ci><ci id="S3.SS4.p3.8.m8.1.1.3.cmml" xref="S3.SS4.p3.8.m8.1.1.3">𝑏</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.8.m8.1c">\alpha_{b}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.8.m8.1d">italic_α start_POSTSUBSCRIPT italic_b end_POSTSUBSCRIPT</annotation></semantics></math> assuming <math alttext="h_{m}" class="ltx_Math" display="inline" id="S3.SS4.p3.9.m9.1"><semantics id="S3.SS4.p3.9.m9.1a"><msub id="S3.SS4.p3.9.m9.1.1" xref="S3.SS4.p3.9.m9.1.1.cmml"><mi id="S3.SS4.p3.9.m9.1.1.2" xref="S3.SS4.p3.9.m9.1.1.2.cmml">h</mi><mi id="S3.SS4.p3.9.m9.1.1.3" xref="S3.SS4.p3.9.m9.1.1.3.cmml">m</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.9.m9.1b"><apply id="S3.SS4.p3.9.m9.1.1.cmml" xref="S3.SS4.p3.9.m9.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.9.m9.1.1.1.cmml" xref="S3.SS4.p3.9.m9.1.1">subscript</csymbol><ci id="S3.SS4.p3.9.m9.1.1.2.cmml" xref="S3.SS4.p3.9.m9.1.1.2">ℎ</ci><ci id="S3.SS4.p3.9.m9.1.1.3.cmml" xref="S3.SS4.p3.9.m9.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.9.m9.1c">h_{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.9.m9.1d">italic_h start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT</annotation></semantics></math> is the longer side. A high ratio implies that the shape of the component resembles a narrow rectangle or any other irregular shape where one dimension is larger than the other, in which case centroid prompt is ambiguous for segmenting the whole component. In such cases, we also choose to use grid prompts. Additionally, we include its centroid as part of the prompt if it is inside the component as a supplementary to the grid prompts. For all other cases, we use centroid prompt only.</p>
</div>
<div class="ltx_para" id="S3.SS4.p4">
<p class="ltx_p" id="S3.SS4.p4.1">If a connected component that meets the criteria for grid prompts has more than <math alttext="\frac{1}{4}" class="ltx_Math" display="inline" id="S3.SS4.p4.1.m1.1"><semantics id="S3.SS4.p4.1.m1.1a"><mfrac id="S3.SS4.p4.1.m1.1.1" xref="S3.SS4.p4.1.m1.1.1.cmml"><mn id="S3.SS4.p4.1.m1.1.1.2" xref="S3.SS4.p4.1.m1.1.1.2.cmml">1</mn><mn id="S3.SS4.p4.1.m1.1.1.3" xref="S3.SS4.p4.1.m1.1.1.3.cmml">4</mn></mfrac><annotation-xml encoding="MathML-Content" id="S3.SS4.p4.1.m1.1b"><apply id="S3.SS4.p4.1.m1.1.1.cmml" xref="S3.SS4.p4.1.m1.1.1"><divide id="S3.SS4.p4.1.m1.1.1.1.cmml" xref="S3.SS4.p4.1.m1.1.1"></divide><cn id="S3.SS4.p4.1.m1.1.1.2.cmml" type="integer" xref="S3.SS4.p4.1.m1.1.1.2">1</cn><cn id="S3.SS4.p4.1.m1.1.1.3.cmml" type="integer" xref="S3.SS4.p4.1.m1.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p4.1.m1.1c">\frac{1}{4}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p4.1.m1.1d">divide start_ARG 1 end_ARG start_ARG 4 end_ARG</annotation></semantics></math> of the patch area, we apply grid prompts to all connected components in the slide image instead of evaluating each one individually. This is because neighboring melanomas often share similar shapes, even if they don’t fit a single morphology. When a large melanoma with an irregular shape is present, nearby melanomas usually have similar shapes, making grid prompts the most effective for covering all components.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.5 </span>Final Mask Generation </h3>
<div class="ltx_para" id="S3.SS5.p1">
<p class="ltx_p" id="S3.SS5.p1.3">After deriving the prompts, we run SAM to generate its own mask <math alttext="\hat{Y}^{m}" class="ltx_Math" display="inline" id="S3.SS5.p1.1.m1.1"><semantics id="S3.SS5.p1.1.m1.1a"><msup id="S3.SS5.p1.1.m1.1.1" xref="S3.SS5.p1.1.m1.1.1.cmml"><mover accent="true" id="S3.SS5.p1.1.m1.1.1.2" xref="S3.SS5.p1.1.m1.1.1.2.cmml"><mi id="S3.SS5.p1.1.m1.1.1.2.2" xref="S3.SS5.p1.1.m1.1.1.2.2.cmml">Y</mi><mo id="S3.SS5.p1.1.m1.1.1.2.1" xref="S3.SS5.p1.1.m1.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS5.p1.1.m1.1.1.3" xref="S3.SS5.p1.1.m1.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.1.m1.1b"><apply id="S3.SS5.p1.1.m1.1.1.cmml" xref="S3.SS5.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS5.p1.1.m1.1.1.1.cmml" xref="S3.SS5.p1.1.m1.1.1">superscript</csymbol><apply id="S3.SS5.p1.1.m1.1.1.2.cmml" xref="S3.SS5.p1.1.m1.1.1.2"><ci id="S3.SS5.p1.1.m1.1.1.2.1.cmml" xref="S3.SS5.p1.1.m1.1.1.2.1">^</ci><ci id="S3.SS5.p1.1.m1.1.1.2.2.cmml" xref="S3.SS5.p1.1.m1.1.1.2.2">𝑌</ci></apply><ci id="S3.SS5.p1.1.m1.1.1.3.cmml" xref="S3.SS5.p1.1.m1.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.1.m1.1c">\hat{Y}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.1.m1.1d">over^ start_ARG italic_Y end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> as shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.F1" title="In 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">1</span></a>. To obtain the final mask, we combine the post-processed Segformer’s mask <math alttext="\hat{X}^{m}" class="ltx_Math" display="inline" id="S3.SS5.p1.2.m2.1"><semantics id="S3.SS5.p1.2.m2.1a"><msup id="S3.SS5.p1.2.m2.1.1" xref="S3.SS5.p1.2.m2.1.1.cmml"><mover accent="true" id="S3.SS5.p1.2.m2.1.1.2" xref="S3.SS5.p1.2.m2.1.1.2.cmml"><mi id="S3.SS5.p1.2.m2.1.1.2.2" xref="S3.SS5.p1.2.m2.1.1.2.2.cmml">X</mi><mo id="S3.SS5.p1.2.m2.1.1.2.1" xref="S3.SS5.p1.2.m2.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS5.p1.2.m2.1.1.3" xref="S3.SS5.p1.2.m2.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.2.m2.1b"><apply id="S3.SS5.p1.2.m2.1.1.cmml" xref="S3.SS5.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS5.p1.2.m2.1.1.1.cmml" xref="S3.SS5.p1.2.m2.1.1">superscript</csymbol><apply id="S3.SS5.p1.2.m2.1.1.2.cmml" xref="S3.SS5.p1.2.m2.1.1.2"><ci id="S3.SS5.p1.2.m2.1.1.2.1.cmml" xref="S3.SS5.p1.2.m2.1.1.2.1">^</ci><ci id="S3.SS5.p1.2.m2.1.1.2.2.cmml" xref="S3.SS5.p1.2.m2.1.1.2.2">𝑋</ci></apply><ci id="S3.SS5.p1.2.m2.1.1.3.cmml" xref="S3.SS5.p1.2.m2.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.2.m2.1c">\hat{X}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.2.m2.1d">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> and SAM’s mask <math alttext="\hat{Y}^{m}" class="ltx_Math" display="inline" id="S3.SS5.p1.3.m3.1"><semantics id="S3.SS5.p1.3.m3.1a"><msup id="S3.SS5.p1.3.m3.1.1" xref="S3.SS5.p1.3.m3.1.1.cmml"><mover accent="true" id="S3.SS5.p1.3.m3.1.1.2" xref="S3.SS5.p1.3.m3.1.1.2.cmml"><mi id="S3.SS5.p1.3.m3.1.1.2.2" xref="S3.SS5.p1.3.m3.1.1.2.2.cmml">Y</mi><mo id="S3.SS5.p1.3.m3.1.1.2.1" xref="S3.SS5.p1.3.m3.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS5.p1.3.m3.1.1.3" xref="S3.SS5.p1.3.m3.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.3.m3.1b"><apply id="S3.SS5.p1.3.m3.1.1.cmml" xref="S3.SS5.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS5.p1.3.m3.1.1.1.cmml" xref="S3.SS5.p1.3.m3.1.1">superscript</csymbol><apply id="S3.SS5.p1.3.m3.1.1.2.cmml" xref="S3.SS5.p1.3.m3.1.1.2"><ci id="S3.SS5.p1.3.m3.1.1.2.1.cmml" xref="S3.SS5.p1.3.m3.1.1.2.1">^</ci><ci id="S3.SS5.p1.3.m3.1.1.2.2.cmml" xref="S3.SS5.p1.3.m3.1.1.2.2">𝑌</ci></apply><ci id="S3.SS5.p1.3.m3.1.1.3.cmml" xref="S3.SS5.p1.3.m3.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.3.m3.1c">\hat{Y}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.3.m3.1d">over^ start_ARG italic_Y end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> by performing a union between the two:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="Y=\hat{Y}^{m}\cup\hat{X}^{m}" class="ltx_Math" display="block" id="S3.E2.m1.1"><semantics id="S3.E2.m1.1a"><mrow id="S3.E2.m1.1.1" xref="S3.E2.m1.1.1.cmml"><mi id="S3.E2.m1.1.1.2" xref="S3.E2.m1.1.1.2.cmml">Y</mi><mo id="S3.E2.m1.1.1.1" xref="S3.E2.m1.1.1.1.cmml">=</mo><mrow id="S3.E2.m1.1.1.3" xref="S3.E2.m1.1.1.3.cmml"><msup id="S3.E2.m1.1.1.3.2" xref="S3.E2.m1.1.1.3.2.cmml"><mover accent="true" id="S3.E2.m1.1.1.3.2.2" xref="S3.E2.m1.1.1.3.2.2.cmml"><mi id="S3.E2.m1.1.1.3.2.2.2" xref="S3.E2.m1.1.1.3.2.2.2.cmml">Y</mi><mo id="S3.E2.m1.1.1.3.2.2.1" xref="S3.E2.m1.1.1.3.2.2.1.cmml">^</mo></mover><mi id="S3.E2.m1.1.1.3.2.3" xref="S3.E2.m1.1.1.3.2.3.cmml">m</mi></msup><mo id="S3.E2.m1.1.1.3.1" xref="S3.E2.m1.1.1.3.1.cmml">∪</mo><msup id="S3.E2.m1.1.1.3.3" xref="S3.E2.m1.1.1.3.3.cmml"><mover accent="true" id="S3.E2.m1.1.1.3.3.2" xref="S3.E2.m1.1.1.3.3.2.cmml"><mi id="S3.E2.m1.1.1.3.3.2.2" xref="S3.E2.m1.1.1.3.3.2.2.cmml">X</mi><mo id="S3.E2.m1.1.1.3.3.2.1" xref="S3.E2.m1.1.1.3.3.2.1.cmml">^</mo></mover><mi id="S3.E2.m1.1.1.3.3.3" xref="S3.E2.m1.1.1.3.3.3.cmml">m</mi></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.1b"><apply id="S3.E2.m1.1.1.cmml" xref="S3.E2.m1.1.1"><eq id="S3.E2.m1.1.1.1.cmml" xref="S3.E2.m1.1.1.1"></eq><ci id="S3.E2.m1.1.1.2.cmml" xref="S3.E2.m1.1.1.2">𝑌</ci><apply id="S3.E2.m1.1.1.3.cmml" xref="S3.E2.m1.1.1.3"><union id="S3.E2.m1.1.1.3.1.cmml" xref="S3.E2.m1.1.1.3.1"></union><apply id="S3.E2.m1.1.1.3.2.cmml" xref="S3.E2.m1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E2.m1.1.1.3.2.1.cmml" xref="S3.E2.m1.1.1.3.2">superscript</csymbol><apply id="S3.E2.m1.1.1.3.2.2.cmml" xref="S3.E2.m1.1.1.3.2.2"><ci id="S3.E2.m1.1.1.3.2.2.1.cmml" xref="S3.E2.m1.1.1.3.2.2.1">^</ci><ci id="S3.E2.m1.1.1.3.2.2.2.cmml" xref="S3.E2.m1.1.1.3.2.2.2">𝑌</ci></apply><ci id="S3.E2.m1.1.1.3.2.3.cmml" xref="S3.E2.m1.1.1.3.2.3">𝑚</ci></apply><apply id="S3.E2.m1.1.1.3.3.cmml" xref="S3.E2.m1.1.1.3.3"><csymbol cd="ambiguous" id="S3.E2.m1.1.1.3.3.1.cmml" xref="S3.E2.m1.1.1.3.3">superscript</csymbol><apply id="S3.E2.m1.1.1.3.3.2.cmml" xref="S3.E2.m1.1.1.3.3.2"><ci id="S3.E2.m1.1.1.3.3.2.1.cmml" xref="S3.E2.m1.1.1.3.3.2.1">^</ci><ci id="S3.E2.m1.1.1.3.3.2.2.cmml" xref="S3.E2.m1.1.1.3.3.2.2">𝑋</ci></apply><ci id="S3.E2.m1.1.1.3.3.3.cmml" xref="S3.E2.m1.1.1.3.3.3">𝑚</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.1c">Y=\hat{Y}^{m}\cup\hat{X}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.E2.m1.1d">italic_Y = over^ start_ARG italic_Y end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT ∪ over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS5.p1.5">We choose to combine these two masks because single point prompts are sparse and may not comprehensively cover all regions. This sparsity can lead to ambiguity and result in missing some high-confidence predictions from Segformer. Therefore, we choose to include the post-processed mask <math alttext="\hat{X}^{m}" class="ltx_Math" display="inline" id="S3.SS5.p1.4.m1.1"><semantics id="S3.SS5.p1.4.m1.1a"><msup id="S3.SS5.p1.4.m1.1.1" xref="S3.SS5.p1.4.m1.1.1.cmml"><mover accent="true" id="S3.SS5.p1.4.m1.1.1.2" xref="S3.SS5.p1.4.m1.1.1.2.cmml"><mi id="S3.SS5.p1.4.m1.1.1.2.2" xref="S3.SS5.p1.4.m1.1.1.2.2.cmml">X</mi><mo id="S3.SS5.p1.4.m1.1.1.2.1" xref="S3.SS5.p1.4.m1.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS5.p1.4.m1.1.1.3" xref="S3.SS5.p1.4.m1.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.4.m1.1b"><apply id="S3.SS5.p1.4.m1.1.1.cmml" xref="S3.SS5.p1.4.m1.1.1"><csymbol cd="ambiguous" id="S3.SS5.p1.4.m1.1.1.1.cmml" xref="S3.SS5.p1.4.m1.1.1">superscript</csymbol><apply id="S3.SS5.p1.4.m1.1.1.2.cmml" xref="S3.SS5.p1.4.m1.1.1.2"><ci id="S3.SS5.p1.4.m1.1.1.2.1.cmml" xref="S3.SS5.p1.4.m1.1.1.2.1">^</ci><ci id="S3.SS5.p1.4.m1.1.1.2.2.cmml" xref="S3.SS5.p1.4.m1.1.1.2.2">𝑋</ci></apply><ci id="S3.SS5.p1.4.m1.1.1.3.cmml" xref="S3.SS5.p1.4.m1.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.4.m1.1c">\hat{X}^{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.4.m1.1d">over^ start_ARG italic_X end_ARG start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> to ensure that high-confidence regions are kept in the final mask <math alttext="Y" class="ltx_Math" display="inline" id="S3.SS5.p1.5.m2.1"><semantics id="S3.SS5.p1.5.m2.1a"><mi id="S3.SS5.p1.5.m2.1.1" xref="S3.SS5.p1.5.m2.1.1.cmml">Y</mi><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.5.m2.1b"><ci id="S3.SS5.p1.5.m2.1.1.cmml" xref="S3.SS5.p1.5.m2.1.1">𝑌</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.5.m2.1c">Y</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.5.m2.1d">italic_Y</annotation></semantics></math>.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS6">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.6 </span>Training Strategy</h3>
<div class="ltx_para" id="S3.SS6.p1">
<p class="ltx_p" id="S3.SS6.p1.1">We devise a training strategy involving two stages that optimizes SAM for the way we use prompts. Since we only use single point prompts, we first train SAM on single point prompts for melanoma. For each patch sampled from a microscopy slide image, we first find all connected components and for each connected component we generate a single point prompt clicked at a random position inside it. This enables the model to learn to segment melanoma anywhere in a patch. After the initial training on random point prompts, we fine-tune our model on patches centered at each individual single point prompt. Each patch might contain multiple components, but we only set the component containing the point prompt as the target to reduce ambiguity. This allows the model to optimize for inference using our SAM-based method.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Dataset </h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.2">Our dataset comprises 101 microscopy slide images, with sizes ranging from <math alttext="23700\times 21199" class="ltx_Math" display="inline" id="S4.SS1.p1.1.m1.1"><semantics id="S4.SS1.p1.1.m1.1a"><mrow id="S4.SS1.p1.1.m1.1.1" xref="S4.SS1.p1.1.m1.1.1.cmml"><mn id="S4.SS1.p1.1.m1.1.1.2" xref="S4.SS1.p1.1.m1.1.1.2.cmml">23700</mn><mo id="S4.SS1.p1.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS1.p1.1.m1.1.1.1.cmml">×</mo><mn id="S4.SS1.p1.1.m1.1.1.3" xref="S4.SS1.p1.1.m1.1.1.3.cmml">21199</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.1.m1.1b"><apply id="S4.SS1.p1.1.m1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1"><times id="S4.SS1.p1.1.m1.1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1.1"></times><cn id="S4.SS1.p1.1.m1.1.1.2.cmml" type="integer" xref="S4.SS1.p1.1.m1.1.1.2">23700</cn><cn id="S4.SS1.p1.1.m1.1.1.3.cmml" type="integer" xref="S4.SS1.p1.1.m1.1.1.3">21199</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.1.m1.1c">23700\times 21199</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p1.1.m1.1d">23700 × 21199</annotation></semantics></math> pixels to <math alttext="1996\times 1679" class="ltx_Math" display="inline" id="S4.SS1.p1.2.m2.1"><semantics id="S4.SS1.p1.2.m2.1a"><mrow id="S4.SS1.p1.2.m2.1.1" xref="S4.SS1.p1.2.m2.1.1.cmml"><mn id="S4.SS1.p1.2.m2.1.1.2" xref="S4.SS1.p1.2.m2.1.1.2.cmml">1996</mn><mo id="S4.SS1.p1.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS1.p1.2.m2.1.1.1.cmml">×</mo><mn id="S4.SS1.p1.2.m2.1.1.3" xref="S4.SS1.p1.2.m2.1.1.3.cmml">1679</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.2.m2.1b"><apply id="S4.SS1.p1.2.m2.1.1.cmml" xref="S4.SS1.p1.2.m2.1.1"><times id="S4.SS1.p1.2.m2.1.1.1.cmml" xref="S4.SS1.p1.2.m2.1.1.1"></times><cn id="S4.SS1.p1.2.m2.1.1.2.cmml" type="integer" xref="S4.SS1.p1.2.m2.1.1.2">1996</cn><cn id="S4.SS1.p1.2.m2.1.1.3.cmml" type="integer" xref="S4.SS1.p1.2.m2.1.1.3">1679</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.2.m2.1c">1996\times 1679</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p1.2.m2.1d">1996 × 1679</annotation></semantics></math> pixels. These images are derived from skin biopsies stained with H&amp;E <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib10" title="">10</a>]</cite> and captured under a microscope at 40x magnification. Detailed Annotations at this magnification level are provided by an expert dermatopathologist. Each image in the dataset is carefully selected and cropped from the original WSIs by the dermatopathologist. This is because whole slide images often contain multiple focal planes of the same tissue, leading to redundancy in the data. By selecting the most informative regions at a single focal plane, we reduce the redundancy and ensure that the dataset focuses on the most relevant tissue structures. The annotations for our microscopy images include seven classes: air, background cells, epidermis, invasive melanoma, inflamed tumor, fibrotic tumor, and uncertain tumor. It is important to note that invasive melanoma is the only type of melanoma precisely annotated. In-situ melanoma is labeled as epidermis in our dataset due to its confinement to the epidermis and due to our focus on segmenting invasive melanoma.</p>
</div>
<div class="ltx_para" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.4"><span class="ltx_text ltx_font_bold" id="S4.SS1.p2.4.1">Segformer Dataset Generation</span>. To generate the dataset for Segformer, We follow the approach described by Wang et al <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib26" title="">26</a>]</cite>. Given the extremely high resolution of microscopy slide images, we divide each slide into non-overlapping patches of <math alttext="512\times 512" class="ltx_Math" display="inline" id="S4.SS1.p2.1.m1.1"><semantics id="S4.SS1.p2.1.m1.1a"><mrow id="S4.SS1.p2.1.m1.1.1" xref="S4.SS1.p2.1.m1.1.1.cmml"><mn id="S4.SS1.p2.1.m1.1.1.2" xref="S4.SS1.p2.1.m1.1.1.2.cmml">512</mn><mo id="S4.SS1.p2.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS1.p2.1.m1.1.1.1.cmml">×</mo><mn id="S4.SS1.p2.1.m1.1.1.3" xref="S4.SS1.p2.1.m1.1.1.3.cmml">512</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.1.m1.1b"><apply id="S4.SS1.p2.1.m1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1"><times id="S4.SS1.p2.1.m1.1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1.1"></times><cn id="S4.SS1.p2.1.m1.1.1.2.cmml" type="integer" xref="S4.SS1.p2.1.m1.1.1.2">512</cn><cn id="S4.SS1.p2.1.m1.1.1.3.cmml" type="integer" xref="S4.SS1.p2.1.m1.1.1.3">512</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.1.m1.1c">512\times 512</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.1.m1.1d">512 × 512</annotation></semantics></math> and <math alttext="1024\times 1024" class="ltx_Math" display="inline" id="S4.SS1.p2.2.m2.1"><semantics id="S4.SS1.p2.2.m2.1a"><mrow id="S4.SS1.p2.2.m2.1.1" xref="S4.SS1.p2.2.m2.1.1.cmml"><mn id="S4.SS1.p2.2.m2.1.1.2" xref="S4.SS1.p2.2.m2.1.1.2.cmml">1024</mn><mo id="S4.SS1.p2.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS1.p2.2.m2.1.1.1.cmml">×</mo><mn id="S4.SS1.p2.2.m2.1.1.3" xref="S4.SS1.p2.2.m2.1.1.3.cmml">1024</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.2.m2.1b"><apply id="S4.SS1.p2.2.m2.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1"><times id="S4.SS1.p2.2.m2.1.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1.1"></times><cn id="S4.SS1.p2.2.m2.1.1.2.cmml" type="integer" xref="S4.SS1.p2.2.m2.1.1.2">1024</cn><cn id="S4.SS1.p2.2.m2.1.1.3.cmml" type="integer" xref="S4.SS1.p2.2.m2.1.1.3">1024</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.2.m2.1c">1024\times 1024</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.2.m2.1d">1024 × 1024</annotation></semantics></math> pixels. We re-categorize the original annotations into three distinct classes: invasive melanoma, epidermis, and others. This reclassification is essential since the ambiguous boundaries of fibrotic and inflamed tumor make them less suitable for effective segmentation model training. We under-sample the background by discarding patches with 97% of background cells and air to address class imbalance issues. The resulting dataset comprises 14885 patches of around 3.9 billion pixels for <math alttext="512\times 512" class="ltx_Math" display="inline" id="S4.SS1.p2.3.m3.1"><semantics id="S4.SS1.p2.3.m3.1a"><mrow id="S4.SS1.p2.3.m3.1.1" xref="S4.SS1.p2.3.m3.1.1.cmml"><mn id="S4.SS1.p2.3.m3.1.1.2" xref="S4.SS1.p2.3.m3.1.1.2.cmml">512</mn><mo id="S4.SS1.p2.3.m3.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS1.p2.3.m3.1.1.1.cmml">×</mo><mn id="S4.SS1.p2.3.m3.1.1.3" xref="S4.SS1.p2.3.m3.1.1.3.cmml">512</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.3.m3.1b"><apply id="S4.SS1.p2.3.m3.1.1.cmml" xref="S4.SS1.p2.3.m3.1.1"><times id="S4.SS1.p2.3.m3.1.1.1.cmml" xref="S4.SS1.p2.3.m3.1.1.1"></times><cn id="S4.SS1.p2.3.m3.1.1.2.cmml" type="integer" xref="S4.SS1.p2.3.m3.1.1.2">512</cn><cn id="S4.SS1.p2.3.m3.1.1.3.cmml" type="integer" xref="S4.SS1.p2.3.m3.1.1.3">512</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.3.m3.1c">512\times 512</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.3.m3.1d">512 × 512</annotation></semantics></math> resolution and 4326 patches of around 4.5 billion pixels for <math alttext="1024\times 1024" class="ltx_Math" display="inline" id="S4.SS1.p2.4.m4.1"><semantics id="S4.SS1.p2.4.m4.1a"><mrow id="S4.SS1.p2.4.m4.1.1" xref="S4.SS1.p2.4.m4.1.1.cmml"><mn id="S4.SS1.p2.4.m4.1.1.2" xref="S4.SS1.p2.4.m4.1.1.2.cmml">1024</mn><mo id="S4.SS1.p2.4.m4.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS1.p2.4.m4.1.1.1.cmml">×</mo><mn id="S4.SS1.p2.4.m4.1.1.3" xref="S4.SS1.p2.4.m4.1.1.3.cmml">1024</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.4.m4.1b"><apply id="S4.SS1.p2.4.m4.1.1.cmml" xref="S4.SS1.p2.4.m4.1.1"><times id="S4.SS1.p2.4.m4.1.1.1.cmml" xref="S4.SS1.p2.4.m4.1.1.1"></times><cn id="S4.SS1.p2.4.m4.1.1.2.cmml" type="integer" xref="S4.SS1.p2.4.m4.1.1.2">1024</cn><cn id="S4.SS1.p2.4.m4.1.1.3.cmml" type="integer" xref="S4.SS1.p2.4.m4.1.1.3">1024</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.4.m4.1c">1024\times 1024</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.4.m4.1d">1024 × 1024</annotation></semantics></math> resolution. This preprocessing approach ensures a balanced and representative dataset for training the Segformer model.</p>
</div>
<div class="ltx_para" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.2"><span class="ltx_text ltx_font_bold" id="S4.SS1.p3.2.1">SAM Dataset Generation</span>. We generate the SAM dataset corresponding to the two-stage training process described in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS6" title="3.6 Training Strategy ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Sec.</span> <span class="ltx_text ltx_ref_tag">3.6</span></a>. For the first stage, we divide each microscopy image into non-overlapping patches and generate a single point prompt within each connected component randomly. The ground truth for each prompt is the mask corresponding solely to that particular connected component, rather than all components in the patch. This aims to minimize the ambiguity of single point prompts as much as possible and facilitates model convergence. For the second stage, we use both the centroid and randomly sampled points as the training prompts. We use patches centered at each prompt to optimize SAM specifically for our method. This stage’s dataset comprises 8357 patches of <math alttext="512\times 512" class="ltx_Math" display="inline" id="S4.SS1.p3.1.m1.1"><semantics id="S4.SS1.p3.1.m1.1a"><mrow id="S4.SS1.p3.1.m1.1.1" xref="S4.SS1.p3.1.m1.1.1.cmml"><mn id="S4.SS1.p3.1.m1.1.1.2" xref="S4.SS1.p3.1.m1.1.1.2.cmml">512</mn><mo id="S4.SS1.p3.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS1.p3.1.m1.1.1.1.cmml">×</mo><mn id="S4.SS1.p3.1.m1.1.1.3" xref="S4.SS1.p3.1.m1.1.1.3.cmml">512</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.1.m1.1b"><apply id="S4.SS1.p3.1.m1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1"><times id="S4.SS1.p3.1.m1.1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1.1"></times><cn id="S4.SS1.p3.1.m1.1.1.2.cmml" type="integer" xref="S4.SS1.p3.1.m1.1.1.2">512</cn><cn id="S4.SS1.p3.1.m1.1.1.3.cmml" type="integer" xref="S4.SS1.p3.1.m1.1.1.3">512</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.1.m1.1c">512\times 512</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p3.1.m1.1d">512 × 512</annotation></semantics></math> pixel resolution and 6170 patches of <math alttext="1024\times 1024" class="ltx_Math" display="inline" id="S4.SS1.p3.2.m2.1"><semantics id="S4.SS1.p3.2.m2.1a"><mrow id="S4.SS1.p3.2.m2.1.1" xref="S4.SS1.p3.2.m2.1.1.cmml"><mn id="S4.SS1.p3.2.m2.1.1.2" xref="S4.SS1.p3.2.m2.1.1.2.cmml">1024</mn><mo id="S4.SS1.p3.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS1.p3.2.m2.1.1.1.cmml">×</mo><mn id="S4.SS1.p3.2.m2.1.1.3" xref="S4.SS1.p3.2.m2.1.1.3.cmml">1024</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.2.m2.1b"><apply id="S4.SS1.p3.2.m2.1.1.cmml" xref="S4.SS1.p3.2.m2.1.1"><times id="S4.SS1.p3.2.m2.1.1.1.cmml" xref="S4.SS1.p3.2.m2.1.1.1"></times><cn id="S4.SS1.p3.2.m2.1.1.2.cmml" type="integer" xref="S4.SS1.p3.2.m2.1.1.2">1024</cn><cn id="S4.SS1.p3.2.m2.1.1.3.cmml" type="integer" xref="S4.SS1.p3.2.m2.1.1.3">1024</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.2.m2.1c">1024\times 1024</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p3.2.m2.1d">1024 × 1024</annotation></semantics></math> pixel resolution.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Implementation Details </h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.4"><span class="ltx_text ltx_font_bold" id="S4.SS2.p1.4.1">Model Settings</span>. We use Segformer B0 and B1 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib28" title="">28</a>]</cite> as the initial segmentation model and EfficientSAM-S <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib29" title="">29</a>]</cite> as the segment anything model in our approach. We choose EfficientSAM-S since it is the most efficient variant of SAM that reconstructs the image embeddings of ViT-H <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib9" title="">9</a>]</cite> in the original SAM. To further improve training efficiency, we integrate adapters into the ViT <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib9" title="">9</a>]</cite> image encoder following the approach described in Med-SA <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib27" title="">27</a>]</cite>. We use adapters with an input and output dimensionality of <math alttext="d_{a}=768" class="ltx_Math" display="inline" id="S4.SS2.p1.1.m1.1"><semantics id="S4.SS2.p1.1.m1.1a"><mrow id="S4.SS2.p1.1.m1.1.1" xref="S4.SS2.p1.1.m1.1.1.cmml"><msub id="S4.SS2.p1.1.m1.1.1.2" xref="S4.SS2.p1.1.m1.1.1.2.cmml"><mi id="S4.SS2.p1.1.m1.1.1.2.2" xref="S4.SS2.p1.1.m1.1.1.2.2.cmml">d</mi><mi id="S4.SS2.p1.1.m1.1.1.2.3" xref="S4.SS2.p1.1.m1.1.1.2.3.cmml">a</mi></msub><mo id="S4.SS2.p1.1.m1.1.1.1" xref="S4.SS2.p1.1.m1.1.1.1.cmml">=</mo><mn id="S4.SS2.p1.1.m1.1.1.3" xref="S4.SS2.p1.1.m1.1.1.3.cmml">768</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.m1.1b"><apply id="S4.SS2.p1.1.m1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1"><eq id="S4.SS2.p1.1.m1.1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1.1"></eq><apply id="S4.SS2.p1.1.m1.1.1.2.cmml" xref="S4.SS2.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S4.SS2.p1.1.m1.1.1.2.1.cmml" xref="S4.SS2.p1.1.m1.1.1.2">subscript</csymbol><ci id="S4.SS2.p1.1.m1.1.1.2.2.cmml" xref="S4.SS2.p1.1.m1.1.1.2.2">𝑑</ci><ci id="S4.SS2.p1.1.m1.1.1.2.3.cmml" xref="S4.SS2.p1.1.m1.1.1.2.3">𝑎</ci></apply><cn id="S4.SS2.p1.1.m1.1.1.3.cmml" type="integer" xref="S4.SS2.p1.1.m1.1.1.3">768</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.1.m1.1c">d_{a}=768</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.1.m1.1d">italic_d start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT = 768</annotation></semantics></math> and set the dimensionality of hidden layers to <math alttext="d_{h}=1024" class="ltx_Math" display="inline" id="S4.SS2.p1.2.m2.1"><semantics id="S4.SS2.p1.2.m2.1a"><mrow id="S4.SS2.p1.2.m2.1.1" xref="S4.SS2.p1.2.m2.1.1.cmml"><msub id="S4.SS2.p1.2.m2.1.1.2" xref="S4.SS2.p1.2.m2.1.1.2.cmml"><mi id="S4.SS2.p1.2.m2.1.1.2.2" xref="S4.SS2.p1.2.m2.1.1.2.2.cmml">d</mi><mi id="S4.SS2.p1.2.m2.1.1.2.3" xref="S4.SS2.p1.2.m2.1.1.2.3.cmml">h</mi></msub><mo id="S4.SS2.p1.2.m2.1.1.1" xref="S4.SS2.p1.2.m2.1.1.1.cmml">=</mo><mn id="S4.SS2.p1.2.m2.1.1.3" xref="S4.SS2.p1.2.m2.1.1.3.cmml">1024</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.2.m2.1b"><apply id="S4.SS2.p1.2.m2.1.1.cmml" xref="S4.SS2.p1.2.m2.1.1"><eq id="S4.SS2.p1.2.m2.1.1.1.cmml" xref="S4.SS2.p1.2.m2.1.1.1"></eq><apply id="S4.SS2.p1.2.m2.1.1.2.cmml" xref="S4.SS2.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="S4.SS2.p1.2.m2.1.1.2.1.cmml" xref="S4.SS2.p1.2.m2.1.1.2">subscript</csymbol><ci id="S4.SS2.p1.2.m2.1.1.2.2.cmml" xref="S4.SS2.p1.2.m2.1.1.2.2">𝑑</ci><ci id="S4.SS2.p1.2.m2.1.1.2.3.cmml" xref="S4.SS2.p1.2.m2.1.1.2.3">ℎ</ci></apply><cn id="S4.SS2.p1.2.m2.1.1.3.cmml" type="integer" xref="S4.SS2.p1.2.m2.1.1.3">1024</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.2.m2.1c">d_{h}=1024</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.2.m2.1d">italic_d start_POSTSUBSCRIPT italic_h end_POSTSUBSCRIPT = 1024</annotation></semantics></math>. With adapters, we only fine-tune <math alttext="6.7\text{M}" class="ltx_Math" display="inline" id="S4.SS2.p1.3.m3.1"><semantics id="S4.SS2.p1.3.m3.1a"><mrow id="S4.SS2.p1.3.m3.1.1" xref="S4.SS2.p1.3.m3.1.1.cmml"><mn id="S4.SS2.p1.3.m3.1.1.2" xref="S4.SS2.p1.3.m3.1.1.2.cmml">6.7</mn><mo id="S4.SS2.p1.3.m3.1.1.1" xref="S4.SS2.p1.3.m3.1.1.1.cmml">⁢</mo><mtext id="S4.SS2.p1.3.m3.1.1.3" xref="S4.SS2.p1.3.m3.1.1.3a.cmml">M</mtext></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.3.m3.1b"><apply id="S4.SS2.p1.3.m3.1.1.cmml" xref="S4.SS2.p1.3.m3.1.1"><times id="S4.SS2.p1.3.m3.1.1.1.cmml" xref="S4.SS2.p1.3.m3.1.1.1"></times><cn id="S4.SS2.p1.3.m3.1.1.2.cmml" type="float" xref="S4.SS2.p1.3.m3.1.1.2">6.7</cn><ci id="S4.SS2.p1.3.m3.1.1.3a.cmml" xref="S4.SS2.p1.3.m3.1.1.3"><mtext id="S4.SS2.p1.3.m3.1.1.3.cmml" xref="S4.SS2.p1.3.m3.1.1.3">M</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.3.m3.1c">6.7\text{M}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.3.m3.1d">6.7 M</annotation></semantics></math> parameters for EfficientSAM-S with a total of <math alttext="29.3\text{M}" class="ltx_Math" display="inline" id="S4.SS2.p1.4.m4.1"><semantics id="S4.SS2.p1.4.m4.1a"><mrow id="S4.SS2.p1.4.m4.1.1" xref="S4.SS2.p1.4.m4.1.1.cmml"><mn id="S4.SS2.p1.4.m4.1.1.2" xref="S4.SS2.p1.4.m4.1.1.2.cmml">29.3</mn><mo id="S4.SS2.p1.4.m4.1.1.1" xref="S4.SS2.p1.4.m4.1.1.1.cmml">⁢</mo><mtext id="S4.SS2.p1.4.m4.1.1.3" xref="S4.SS2.p1.4.m4.1.1.3a.cmml">M</mtext></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.4.m4.1b"><apply id="S4.SS2.p1.4.m4.1.1.cmml" xref="S4.SS2.p1.4.m4.1.1"><times id="S4.SS2.p1.4.m4.1.1.1.cmml" xref="S4.SS2.p1.4.m4.1.1.1"></times><cn id="S4.SS2.p1.4.m4.1.1.2.cmml" type="float" xref="S4.SS2.p1.4.m4.1.1.2">29.3</cn><ci id="S4.SS2.p1.4.m4.1.1.3a.cmml" xref="S4.SS2.p1.4.m4.1.1.3"><mtext id="S4.SS2.p1.4.m4.1.1.3.cmml" xref="S4.SS2.p1.4.m4.1.1.3">M</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.4.m4.1c">29.3\text{M}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.4.m4.1d">29.3 M</annotation></semantics></math> parameters.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p2">
<p class="ltx_p" id="S4.SS2.p2.12"><span class="ltx_text ltx_font_bold" id="S4.SS2.p2.12.1">Training</span>. For Segformer, we use AdamW <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib14" title="">14</a>]</cite> optimizer with <math alttext="\beta_{1}=0.9" class="ltx_Math" display="inline" id="S4.SS2.p2.1.m1.1"><semantics id="S4.SS2.p2.1.m1.1a"><mrow id="S4.SS2.p2.1.m1.1.1" xref="S4.SS2.p2.1.m1.1.1.cmml"><msub id="S4.SS2.p2.1.m1.1.1.2" xref="S4.SS2.p2.1.m1.1.1.2.cmml"><mi id="S4.SS2.p2.1.m1.1.1.2.2" xref="S4.SS2.p2.1.m1.1.1.2.2.cmml">β</mi><mn id="S4.SS2.p2.1.m1.1.1.2.3" xref="S4.SS2.p2.1.m1.1.1.2.3.cmml">1</mn></msub><mo id="S4.SS2.p2.1.m1.1.1.1" xref="S4.SS2.p2.1.m1.1.1.1.cmml">=</mo><mn id="S4.SS2.p2.1.m1.1.1.3" xref="S4.SS2.p2.1.m1.1.1.3.cmml">0.9</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.1.m1.1b"><apply id="S4.SS2.p2.1.m1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1"><eq id="S4.SS2.p2.1.m1.1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1.1"></eq><apply id="S4.SS2.p2.1.m1.1.1.2.cmml" xref="S4.SS2.p2.1.m1.1.1.2"><csymbol cd="ambiguous" id="S4.SS2.p2.1.m1.1.1.2.1.cmml" xref="S4.SS2.p2.1.m1.1.1.2">subscript</csymbol><ci id="S4.SS2.p2.1.m1.1.1.2.2.cmml" xref="S4.SS2.p2.1.m1.1.1.2.2">𝛽</ci><cn id="S4.SS2.p2.1.m1.1.1.2.3.cmml" type="integer" xref="S4.SS2.p2.1.m1.1.1.2.3">1</cn></apply><cn id="S4.SS2.p2.1.m1.1.1.3.cmml" type="float" xref="S4.SS2.p2.1.m1.1.1.3">0.9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.1.m1.1c">\beta_{1}=0.9</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.1.m1.1d">italic_β start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT = 0.9</annotation></semantics></math> and <math alttext="\beta_{2}=0.999" class="ltx_Math" display="inline" id="S4.SS2.p2.2.m2.1"><semantics id="S4.SS2.p2.2.m2.1a"><mrow id="S4.SS2.p2.2.m2.1.1" xref="S4.SS2.p2.2.m2.1.1.cmml"><msub id="S4.SS2.p2.2.m2.1.1.2" xref="S4.SS2.p2.2.m2.1.1.2.cmml"><mi id="S4.SS2.p2.2.m2.1.1.2.2" xref="S4.SS2.p2.2.m2.1.1.2.2.cmml">β</mi><mn id="S4.SS2.p2.2.m2.1.1.2.3" xref="S4.SS2.p2.2.m2.1.1.2.3.cmml">2</mn></msub><mo id="S4.SS2.p2.2.m2.1.1.1" xref="S4.SS2.p2.2.m2.1.1.1.cmml">=</mo><mn id="S4.SS2.p2.2.m2.1.1.3" xref="S4.SS2.p2.2.m2.1.1.3.cmml">0.999</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.2.m2.1b"><apply id="S4.SS2.p2.2.m2.1.1.cmml" xref="S4.SS2.p2.2.m2.1.1"><eq id="S4.SS2.p2.2.m2.1.1.1.cmml" xref="S4.SS2.p2.2.m2.1.1.1"></eq><apply id="S4.SS2.p2.2.m2.1.1.2.cmml" xref="S4.SS2.p2.2.m2.1.1.2"><csymbol cd="ambiguous" id="S4.SS2.p2.2.m2.1.1.2.1.cmml" xref="S4.SS2.p2.2.m2.1.1.2">subscript</csymbol><ci id="S4.SS2.p2.2.m2.1.1.2.2.cmml" xref="S4.SS2.p2.2.m2.1.1.2.2">𝛽</ci><cn id="S4.SS2.p2.2.m2.1.1.2.3.cmml" type="integer" xref="S4.SS2.p2.2.m2.1.1.2.3">2</cn></apply><cn id="S4.SS2.p2.2.m2.1.1.3.cmml" type="float" xref="S4.SS2.p2.2.m2.1.1.3">0.999</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.2.m2.1c">\beta_{2}=0.999</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.2.m2.1d">italic_β start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT = 0.999</annotation></semantics></math>, and a weight decay of <math alttext="0.01" class="ltx_Math" display="inline" id="S4.SS2.p2.3.m3.1"><semantics id="S4.SS2.p2.3.m3.1a"><mn id="S4.SS2.p2.3.m3.1.1" xref="S4.SS2.p2.3.m3.1.1.cmml">0.01</mn><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.3.m3.1b"><cn id="S4.SS2.p2.3.m3.1.1.cmml" type="float" xref="S4.SS2.p2.3.m3.1.1">0.01</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.3.m3.1c">0.01</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.3.m3.1d">0.01</annotation></semantics></math>. We use an initial learning rate of <math alttext="5e-4" class="ltx_Math" display="inline" id="S4.SS2.p2.4.m4.1"><semantics id="S4.SS2.p2.4.m4.1a"><mrow id="S4.SS2.p2.4.m4.1.1" xref="S4.SS2.p2.4.m4.1.1.cmml"><mrow id="S4.SS2.p2.4.m4.1.1.2" xref="S4.SS2.p2.4.m4.1.1.2.cmml"><mn id="S4.SS2.p2.4.m4.1.1.2.2" xref="S4.SS2.p2.4.m4.1.1.2.2.cmml">5</mn><mo id="S4.SS2.p2.4.m4.1.1.2.1" xref="S4.SS2.p2.4.m4.1.1.2.1.cmml">⁢</mo><mi id="S4.SS2.p2.4.m4.1.1.2.3" xref="S4.SS2.p2.4.m4.1.1.2.3.cmml">e</mi></mrow><mo id="S4.SS2.p2.4.m4.1.1.1" xref="S4.SS2.p2.4.m4.1.1.1.cmml">−</mo><mn id="S4.SS2.p2.4.m4.1.1.3" xref="S4.SS2.p2.4.m4.1.1.3.cmml">4</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.4.m4.1b"><apply id="S4.SS2.p2.4.m4.1.1.cmml" xref="S4.SS2.p2.4.m4.1.1"><minus id="S4.SS2.p2.4.m4.1.1.1.cmml" xref="S4.SS2.p2.4.m4.1.1.1"></minus><apply id="S4.SS2.p2.4.m4.1.1.2.cmml" xref="S4.SS2.p2.4.m4.1.1.2"><times id="S4.SS2.p2.4.m4.1.1.2.1.cmml" xref="S4.SS2.p2.4.m4.1.1.2.1"></times><cn id="S4.SS2.p2.4.m4.1.1.2.2.cmml" type="integer" xref="S4.SS2.p2.4.m4.1.1.2.2">5</cn><ci id="S4.SS2.p2.4.m4.1.1.2.3.cmml" xref="S4.SS2.p2.4.m4.1.1.2.3">𝑒</ci></apply><cn id="S4.SS2.p2.4.m4.1.1.3.cmml" type="integer" xref="S4.SS2.p2.4.m4.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.4.m4.1c">5e-4</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.4.m4.1d">5 italic_e - 4</annotation></semantics></math> and a polynomial decay scheduler. We use the weights of Segformer pretrained on ImageNet <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib7" title="">7</a>]</cite> as our starting point and train the model for 150 epochs. For EfficientSAM, we use the Adam optimizer with an initial learning rate of <math alttext="1e-4" class="ltx_Math" display="inline" id="S4.SS2.p2.5.m5.1"><semantics id="S4.SS2.p2.5.m5.1a"><mrow id="S4.SS2.p2.5.m5.1.1" xref="S4.SS2.p2.5.m5.1.1.cmml"><mrow id="S4.SS2.p2.5.m5.1.1.2" xref="S4.SS2.p2.5.m5.1.1.2.cmml"><mn id="S4.SS2.p2.5.m5.1.1.2.2" xref="S4.SS2.p2.5.m5.1.1.2.2.cmml">1</mn><mo id="S4.SS2.p2.5.m5.1.1.2.1" xref="S4.SS2.p2.5.m5.1.1.2.1.cmml">⁢</mo><mi id="S4.SS2.p2.5.m5.1.1.2.3" xref="S4.SS2.p2.5.m5.1.1.2.3.cmml">e</mi></mrow><mo id="S4.SS2.p2.5.m5.1.1.1" xref="S4.SS2.p2.5.m5.1.1.1.cmml">−</mo><mn id="S4.SS2.p2.5.m5.1.1.3" xref="S4.SS2.p2.5.m5.1.1.3.cmml">4</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.5.m5.1b"><apply id="S4.SS2.p2.5.m5.1.1.cmml" xref="S4.SS2.p2.5.m5.1.1"><minus id="S4.SS2.p2.5.m5.1.1.1.cmml" xref="S4.SS2.p2.5.m5.1.1.1"></minus><apply id="S4.SS2.p2.5.m5.1.1.2.cmml" xref="S4.SS2.p2.5.m5.1.1.2"><times id="S4.SS2.p2.5.m5.1.1.2.1.cmml" xref="S4.SS2.p2.5.m5.1.1.2.1"></times><cn id="S4.SS2.p2.5.m5.1.1.2.2.cmml" type="integer" xref="S4.SS2.p2.5.m5.1.1.2.2">1</cn><ci id="S4.SS2.p2.5.m5.1.1.2.3.cmml" xref="S4.SS2.p2.5.m5.1.1.2.3">𝑒</ci></apply><cn id="S4.SS2.p2.5.m5.1.1.3.cmml" type="integer" xref="S4.SS2.p2.5.m5.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.5.m5.1c">1e-4</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.5.m5.1d">1 italic_e - 4</annotation></semantics></math>, an exponential decay rate of <math alttext="\beta_{1}=0.9" class="ltx_Math" display="inline" id="S4.SS2.p2.6.m6.1"><semantics id="S4.SS2.p2.6.m6.1a"><mrow id="S4.SS2.p2.6.m6.1.1" xref="S4.SS2.p2.6.m6.1.1.cmml"><msub id="S4.SS2.p2.6.m6.1.1.2" xref="S4.SS2.p2.6.m6.1.1.2.cmml"><mi id="S4.SS2.p2.6.m6.1.1.2.2" xref="S4.SS2.p2.6.m6.1.1.2.2.cmml">β</mi><mn id="S4.SS2.p2.6.m6.1.1.2.3" xref="S4.SS2.p2.6.m6.1.1.2.3.cmml">1</mn></msub><mo id="S4.SS2.p2.6.m6.1.1.1" xref="S4.SS2.p2.6.m6.1.1.1.cmml">=</mo><mn id="S4.SS2.p2.6.m6.1.1.3" xref="S4.SS2.p2.6.m6.1.1.3.cmml">0.9</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.6.m6.1b"><apply id="S4.SS2.p2.6.m6.1.1.cmml" xref="S4.SS2.p2.6.m6.1.1"><eq id="S4.SS2.p2.6.m6.1.1.1.cmml" xref="S4.SS2.p2.6.m6.1.1.1"></eq><apply id="S4.SS2.p2.6.m6.1.1.2.cmml" xref="S4.SS2.p2.6.m6.1.1.2"><csymbol cd="ambiguous" id="S4.SS2.p2.6.m6.1.1.2.1.cmml" xref="S4.SS2.p2.6.m6.1.1.2">subscript</csymbol><ci id="S4.SS2.p2.6.m6.1.1.2.2.cmml" xref="S4.SS2.p2.6.m6.1.1.2.2">𝛽</ci><cn id="S4.SS2.p2.6.m6.1.1.2.3.cmml" type="integer" xref="S4.SS2.p2.6.m6.1.1.2.3">1</cn></apply><cn id="S4.SS2.p2.6.m6.1.1.3.cmml" type="float" xref="S4.SS2.p2.6.m6.1.1.3">0.9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.6.m6.1c">\beta_{1}=0.9</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.6.m6.1d">italic_β start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT = 0.9</annotation></semantics></math> and <math alttext="\beta_{2}=0.999" class="ltx_Math" display="inline" id="S4.SS2.p2.7.m7.1"><semantics id="S4.SS2.p2.7.m7.1a"><mrow id="S4.SS2.p2.7.m7.1.1" xref="S4.SS2.p2.7.m7.1.1.cmml"><msub id="S4.SS2.p2.7.m7.1.1.2" xref="S4.SS2.p2.7.m7.1.1.2.cmml"><mi id="S4.SS2.p2.7.m7.1.1.2.2" xref="S4.SS2.p2.7.m7.1.1.2.2.cmml">β</mi><mn id="S4.SS2.p2.7.m7.1.1.2.3" xref="S4.SS2.p2.7.m7.1.1.2.3.cmml">2</mn></msub><mo id="S4.SS2.p2.7.m7.1.1.1" xref="S4.SS2.p2.7.m7.1.1.1.cmml">=</mo><mn id="S4.SS2.p2.7.m7.1.1.3" xref="S4.SS2.p2.7.m7.1.1.3.cmml">0.999</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.7.m7.1b"><apply id="S4.SS2.p2.7.m7.1.1.cmml" xref="S4.SS2.p2.7.m7.1.1"><eq id="S4.SS2.p2.7.m7.1.1.1.cmml" xref="S4.SS2.p2.7.m7.1.1.1"></eq><apply id="S4.SS2.p2.7.m7.1.1.2.cmml" xref="S4.SS2.p2.7.m7.1.1.2"><csymbol cd="ambiguous" id="S4.SS2.p2.7.m7.1.1.2.1.cmml" xref="S4.SS2.p2.7.m7.1.1.2">subscript</csymbol><ci id="S4.SS2.p2.7.m7.1.1.2.2.cmml" xref="S4.SS2.p2.7.m7.1.1.2.2">𝛽</ci><cn id="S4.SS2.p2.7.m7.1.1.2.3.cmml" type="integer" xref="S4.SS2.p2.7.m7.1.1.2.3">2</cn></apply><cn id="S4.SS2.p2.7.m7.1.1.3.cmml" type="float" xref="S4.SS2.p2.7.m7.1.1.3">0.999</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.7.m7.1c">\beta_{2}=0.999</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.7.m7.1d">italic_β start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT = 0.999</annotation></semantics></math>, and a weight decay of <math alttext="0.05" class="ltx_Math" display="inline" id="S4.SS2.p2.8.m8.1"><semantics id="S4.SS2.p2.8.m8.1a"><mn id="S4.SS2.p2.8.m8.1.1" xref="S4.SS2.p2.8.m8.1.1.cmml">0.05</mn><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.8.m8.1b"><cn id="S4.SS2.p2.8.m8.1.1.cmml" type="float" xref="S4.SS2.p2.8.m8.1.1">0.05</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.8.m8.1c">0.05</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.8.m8.1d">0.05</annotation></semantics></math>. We use the initial learning rate for the first <math alttext="10" class="ltx_Math" display="inline" id="S4.SS2.p2.9.m9.1"><semantics id="S4.SS2.p2.9.m9.1a"><mn id="S4.SS2.p2.9.m9.1.1" xref="S4.SS2.p2.9.m9.1.1.cmml">10</mn><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.9.m9.1b"><cn id="S4.SS2.p2.9.m9.1.1.cmml" type="integer" xref="S4.SS2.p2.9.m9.1.1">10</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.9.m9.1c">10</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.9.m9.1d">10</annotation></semantics></math> epochs and apply a learning rate decay factor of <math alttext="0.5" class="ltx_Math" display="inline" id="S4.SS2.p2.10.m10.1"><semantics id="S4.SS2.p2.10.m10.1a"><mn id="S4.SS2.p2.10.m10.1.1" xref="S4.SS2.p2.10.m10.1.1.cmml">0.5</mn><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.10.m10.1b"><cn id="S4.SS2.p2.10.m10.1.1.cmml" type="float" xref="S4.SS2.p2.10.m10.1.1">0.5</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.10.m10.1c">0.5</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.10.m10.1d">0.5</annotation></semantics></math> every 10 epochs. We use a batch size of 8 for patch resolution <math alttext="512\times 512" class="ltx_Math" display="inline" id="S4.SS2.p2.11.m11.1"><semantics id="S4.SS2.p2.11.m11.1a"><mrow id="S4.SS2.p2.11.m11.1.1" xref="S4.SS2.p2.11.m11.1.1.cmml"><mn id="S4.SS2.p2.11.m11.1.1.2" xref="S4.SS2.p2.11.m11.1.1.2.cmml">512</mn><mo id="S4.SS2.p2.11.m11.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS2.p2.11.m11.1.1.1.cmml">×</mo><mn id="S4.SS2.p2.11.m11.1.1.3" xref="S4.SS2.p2.11.m11.1.1.3.cmml">512</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.11.m11.1b"><apply id="S4.SS2.p2.11.m11.1.1.cmml" xref="S4.SS2.p2.11.m11.1.1"><times id="S4.SS2.p2.11.m11.1.1.1.cmml" xref="S4.SS2.p2.11.m11.1.1.1"></times><cn id="S4.SS2.p2.11.m11.1.1.2.cmml" type="integer" xref="S4.SS2.p2.11.m11.1.1.2">512</cn><cn id="S4.SS2.p2.11.m11.1.1.3.cmml" type="integer" xref="S4.SS2.p2.11.m11.1.1.3">512</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.11.m11.1c">512\times 512</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.11.m11.1d">512 × 512</annotation></semantics></math>, and a batch size of 6 for patch resolution <math alttext="1024\times 1024" class="ltx_Math" display="inline" id="S4.SS2.p2.12.m12.1"><semantics id="S4.SS2.p2.12.m12.1a"><mrow id="S4.SS2.p2.12.m12.1.1" xref="S4.SS2.p2.12.m12.1.1.cmml"><mn id="S4.SS2.p2.12.m12.1.1.2" xref="S4.SS2.p2.12.m12.1.1.2.cmml">1024</mn><mo id="S4.SS2.p2.12.m12.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS2.p2.12.m12.1.1.1.cmml">×</mo><mn id="S4.SS2.p2.12.m12.1.1.3" xref="S4.SS2.p2.12.m12.1.1.3.cmml">1024</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.12.m12.1b"><apply id="S4.SS2.p2.12.m12.1.1.cmml" xref="S4.SS2.p2.12.m12.1.1"><times id="S4.SS2.p2.12.m12.1.1.1.cmml" xref="S4.SS2.p2.12.m12.1.1.1"></times><cn id="S4.SS2.p2.12.m12.1.1.2.cmml" type="integer" xref="S4.SS2.p2.12.m12.1.1.2">1024</cn><cn id="S4.SS2.p2.12.m12.1.1.3.cmml" type="integer" xref="S4.SS2.p2.12.m12.1.1.3">1024</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.12.m12.1c">1024\times 1024</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.12.m12.1d">1024 × 1024</annotation></semantics></math>. The model is first trained for 100 epochs on the first-stage dataset and then trained for 150 epochs on the second-stage dataset. The model is trained with a binary cross entropy loss function with equal weights for the invasive melanoma and the backgrounds. All experiments are implemented in PyTorch and executed on 4 NVIDIA Quadro RTX 8000 GPUs.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p3">
<p class="ltx_p" id="S4.SS2.p3.8"><span class="ltx_text ltx_font_bold" id="S4.SS2.p3.8.1">Inference</span>. To generate the segmentation mask with Segformer, we process each microscopy slide image into patches. Specifically, we use a sliding window to create patches by shifting the window both horizontally and vertically with a step size of <math alttext="128" class="ltx_Math" display="inline" id="S4.SS2.p3.1.m1.1"><semantics id="S4.SS2.p3.1.m1.1a"><mn id="S4.SS2.p3.1.m1.1.1" xref="S4.SS2.p3.1.m1.1.1.cmml">128</mn><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.1.m1.1b"><cn id="S4.SS2.p3.1.m1.1.1.cmml" type="integer" xref="S4.SS2.p3.1.m1.1.1">128</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.1.m1.1c">128</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.1.m1.1d">128</annotation></semantics></math> pixels. In addition, we apply a 2D Gaussian kernel as a weighting mechanism for each pixel within a patch. The kernel has the same size as the patch and a standard deviation of <math alttext="\frac{1}{4}" class="ltx_Math" display="inline" id="S4.SS2.p3.2.m2.1"><semantics id="S4.SS2.p3.2.m2.1a"><mfrac id="S4.SS2.p3.2.m2.1.1" xref="S4.SS2.p3.2.m2.1.1.cmml"><mn id="S4.SS2.p3.2.m2.1.1.2" xref="S4.SS2.p3.2.m2.1.1.2.cmml">1</mn><mn id="S4.SS2.p3.2.m2.1.1.3" xref="S4.SS2.p3.2.m2.1.1.3.cmml">4</mn></mfrac><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.2.m2.1b"><apply id="S4.SS2.p3.2.m2.1.1.cmml" xref="S4.SS2.p3.2.m2.1.1"><divide id="S4.SS2.p3.2.m2.1.1.1.cmml" xref="S4.SS2.p3.2.m2.1.1"></divide><cn id="S4.SS2.p3.2.m2.1.1.2.cmml" type="integer" xref="S4.SS2.p3.2.m2.1.1.2">1</cn><cn id="S4.SS2.p3.2.m2.1.1.3.cmml" type="integer" xref="S4.SS2.p3.2.m2.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.2.m2.1c">\frac{1}{4}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.2.m2.1d">divide start_ARG 1 end_ARG start_ARG 4 end_ARG</annotation></semantics></math> of the patch’s side length. To generate the segmentation mask for EfficientSAM, we run our method with a fixed set of hyperparameters. We set the threshold for determining in-situ melanoma <math alttext="\alpha_{m}=0.1" class="ltx_Math" display="inline" id="S4.SS2.p3.3.m3.1"><semantics id="S4.SS2.p3.3.m3.1a"><mrow id="S4.SS2.p3.3.m3.1.1" xref="S4.SS2.p3.3.m3.1.1.cmml"><msub id="S4.SS2.p3.3.m3.1.1.2" xref="S4.SS2.p3.3.m3.1.1.2.cmml"><mi id="S4.SS2.p3.3.m3.1.1.2.2" xref="S4.SS2.p3.3.m3.1.1.2.2.cmml">α</mi><mi id="S4.SS2.p3.3.m3.1.1.2.3" xref="S4.SS2.p3.3.m3.1.1.2.3.cmml">m</mi></msub><mo id="S4.SS2.p3.3.m3.1.1.1" xref="S4.SS2.p3.3.m3.1.1.1.cmml">=</mo><mn id="S4.SS2.p3.3.m3.1.1.3" xref="S4.SS2.p3.3.m3.1.1.3.cmml">0.1</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.3.m3.1b"><apply id="S4.SS2.p3.3.m3.1.1.cmml" xref="S4.SS2.p3.3.m3.1.1"><eq id="S4.SS2.p3.3.m3.1.1.1.cmml" xref="S4.SS2.p3.3.m3.1.1.1"></eq><apply id="S4.SS2.p3.3.m3.1.1.2.cmml" xref="S4.SS2.p3.3.m3.1.1.2"><csymbol cd="ambiguous" id="S4.SS2.p3.3.m3.1.1.2.1.cmml" xref="S4.SS2.p3.3.m3.1.1.2">subscript</csymbol><ci id="S4.SS2.p3.3.m3.1.1.2.2.cmml" xref="S4.SS2.p3.3.m3.1.1.2.2">𝛼</ci><ci id="S4.SS2.p3.3.m3.1.1.2.3.cmml" xref="S4.SS2.p3.3.m3.1.1.2.3">𝑚</ci></apply><cn id="S4.SS2.p3.3.m3.1.1.3.cmml" type="float" xref="S4.SS2.p3.3.m3.1.1.3">0.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.3.m3.1c">\alpha_{m}=0.1</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.3.m3.1d">italic_α start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT = 0.1</annotation></semantics></math>, the probability threshold for high-confidence regions <math alttext="\beta=0.8" class="ltx_Math" display="inline" id="S4.SS2.p3.4.m4.1"><semantics id="S4.SS2.p3.4.m4.1a"><mrow id="S4.SS2.p3.4.m4.1.1" xref="S4.SS2.p3.4.m4.1.1.cmml"><mi id="S4.SS2.p3.4.m4.1.1.2" xref="S4.SS2.p3.4.m4.1.1.2.cmml">β</mi><mo id="S4.SS2.p3.4.m4.1.1.1" xref="S4.SS2.p3.4.m4.1.1.1.cmml">=</mo><mn id="S4.SS2.p3.4.m4.1.1.3" xref="S4.SS2.p3.4.m4.1.1.3.cmml">0.8</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.4.m4.1b"><apply id="S4.SS2.p3.4.m4.1.1.cmml" xref="S4.SS2.p3.4.m4.1.1"><eq id="S4.SS2.p3.4.m4.1.1.1.cmml" xref="S4.SS2.p3.4.m4.1.1.1"></eq><ci id="S4.SS2.p3.4.m4.1.1.2.cmml" xref="S4.SS2.p3.4.m4.1.1.2">𝛽</ci><cn id="S4.SS2.p3.4.m4.1.1.3.cmml" type="float" xref="S4.SS2.p3.4.m4.1.1.3">0.8</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.4.m4.1c">\beta=0.8</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.4.m4.1d">italic_β = 0.8</annotation></semantics></math>, and the threshold for excluding low-confidence regions <math alttext="\alpha_{c}=0.4" class="ltx_Math" display="inline" id="S4.SS2.p3.5.m5.1"><semantics id="S4.SS2.p3.5.m5.1a"><mrow id="S4.SS2.p3.5.m5.1.1" xref="S4.SS2.p3.5.m5.1.1.cmml"><msub id="S4.SS2.p3.5.m5.1.1.2" xref="S4.SS2.p3.5.m5.1.1.2.cmml"><mi id="S4.SS2.p3.5.m5.1.1.2.2" xref="S4.SS2.p3.5.m5.1.1.2.2.cmml">α</mi><mi id="S4.SS2.p3.5.m5.1.1.2.3" xref="S4.SS2.p3.5.m5.1.1.2.3.cmml">c</mi></msub><mo id="S4.SS2.p3.5.m5.1.1.1" xref="S4.SS2.p3.5.m5.1.1.1.cmml">=</mo><mn id="S4.SS2.p3.5.m5.1.1.3" xref="S4.SS2.p3.5.m5.1.1.3.cmml">0.4</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.5.m5.1b"><apply id="S4.SS2.p3.5.m5.1.1.cmml" xref="S4.SS2.p3.5.m5.1.1"><eq id="S4.SS2.p3.5.m5.1.1.1.cmml" xref="S4.SS2.p3.5.m5.1.1.1"></eq><apply id="S4.SS2.p3.5.m5.1.1.2.cmml" xref="S4.SS2.p3.5.m5.1.1.2"><csymbol cd="ambiguous" id="S4.SS2.p3.5.m5.1.1.2.1.cmml" xref="S4.SS2.p3.5.m5.1.1.2">subscript</csymbol><ci id="S4.SS2.p3.5.m5.1.1.2.2.cmml" xref="S4.SS2.p3.5.m5.1.1.2.2">𝛼</ci><ci id="S4.SS2.p3.5.m5.1.1.2.3.cmml" xref="S4.SS2.p3.5.m5.1.1.2.3">𝑐</ci></apply><cn id="S4.SS2.p3.5.m5.1.1.3.cmml" type="float" xref="S4.SS2.p3.5.m5.1.1.3">0.4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.5.m5.1c">\alpha_{c}=0.4</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.5.m5.1d">italic_α start_POSTSUBSCRIPT italic_c end_POSTSUBSCRIPT = 0.4</annotation></semantics></math>. Additionally, the threshold for the ratio between the sides of a minimum bounding box <math alttext="\alpha_{b}" class="ltx_Math" display="inline" id="S4.SS2.p3.6.m6.1"><semantics id="S4.SS2.p3.6.m6.1a"><msub id="S4.SS2.p3.6.m6.1.1" xref="S4.SS2.p3.6.m6.1.1.cmml"><mi id="S4.SS2.p3.6.m6.1.1.2" xref="S4.SS2.p3.6.m6.1.1.2.cmml">α</mi><mi id="S4.SS2.p3.6.m6.1.1.3" xref="S4.SS2.p3.6.m6.1.1.3.cmml">b</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.6.m6.1b"><apply id="S4.SS2.p3.6.m6.1.1.cmml" xref="S4.SS2.p3.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.6.m6.1.1.1.cmml" xref="S4.SS2.p3.6.m6.1.1">subscript</csymbol><ci id="S4.SS2.p3.6.m6.1.1.2.cmml" xref="S4.SS2.p3.6.m6.1.1.2">𝛼</ci><ci id="S4.SS2.p3.6.m6.1.1.3.cmml" xref="S4.SS2.p3.6.m6.1.1.3">𝑏</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.6.m6.1c">\alpha_{b}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.6.m6.1d">italic_α start_POSTSUBSCRIPT italic_b end_POSTSUBSCRIPT</annotation></semantics></math>, as described in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#alg1" title="In 3.3 Low-Confidence Region Filtering ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Algorithm</span> <span class="ltx_text ltx_ref_tag">1</span></a>, is set to <math alttext="3" class="ltx_Math" display="inline" id="S4.SS2.p3.7.m7.1"><semantics id="S4.SS2.p3.7.m7.1a"><mn id="S4.SS2.p3.7.m7.1.1" xref="S4.SS2.p3.7.m7.1.1.cmml">3</mn><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.7.m7.1b"><cn id="S4.SS2.p3.7.m7.1.1.cmml" type="integer" xref="S4.SS2.p3.7.m7.1.1">3</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.7.m7.1c">3</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.7.m7.1d">3</annotation></semantics></math>. The grid prompt employs a vertical and horizontal gap of <math alttext="64" class="ltx_Math" display="inline" id="S4.SS2.p3.8.m8.1"><semantics id="S4.SS2.p3.8.m8.1a"><mn id="S4.SS2.p3.8.m8.1.1" xref="S4.SS2.p3.8.m8.1.1.cmml">64</mn><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.8.m8.1b"><cn id="S4.SS2.p3.8.m8.1.1.cmml" type="integer" xref="S4.SS2.p3.8.m8.1.1">64</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.8.m8.1c">64</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.8.m8.1d">64</annotation></semantics></math> pixels between neighboring points.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Results </h3>
<figure class="ltx_table" id="S4.T1">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span class="ltx_text" id="S4.T1.2.1.1" style="font-size:90%;">Table 1</span>: </span><span class="ltx_text" id="S4.T1.3.2" style="font-size:90%;">The results of invasive melanoma segmentation on our dataset. We compare our proposed methods with other state-of-the-art segmentation methods.</span></figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T1.4">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.4.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.4.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T1.4.1.1.1.1">Model</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.4.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T1.4.1.1.2.1">Resolution</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.1.1.3"><span class="ltx_text ltx_font_bold" id="S4.T1.4.1.1.3.1">IoU (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.1.1.4"><span class="ltx_text ltx_font_bold" id="S4.T1.4.1.1.4.1">F1 (%)</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.4.2.2.1">Multi-Scale FCN <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib18" title="">18</a>]</cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.4.2.2.2">512</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.2.2.3">13.0</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.2.2.4">14.0</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.3.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.3.3.1">HRNet &amp; OCR <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib21" title="">21</a>]</cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.3.3.2">788</th>
<td class="ltx_td ltx_align_center" id="S4.T1.4.3.3.3">29.1</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.3.3.4">44.0</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.4.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.4.4.1">HIPT <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib26" title="">26</a>]</cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.4.4.2">512</th>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.4.3">40.1</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.4.4">57.3</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.5.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.5.5.1">Seg. B0 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib28" title="">28</a>]</cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.5.5.2">512</th>
<td class="ltx_td ltx_align_center" id="S4.T1.4.5.5.3">44.6</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.5.5.4">61.6</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.6.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.6.6.1">Seg. B1 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib28" title="">28</a>]</cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.6.6.2">512</th>
<td class="ltx_td ltx_align_center" id="S4.T1.4.6.6.3">42.0</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.6.6.4">59.2</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.7.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.4.7.7.1">Seg. B0 &amp; EfficientSAM-S (ours)</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.4.7.7.2">512</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.7.7.3"><span class="ltx_text ltx_font_bold" id="S4.T1.4.7.7.3.1">54.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.7.7.4"><span class="ltx_text ltx_font_bold" id="S4.T1.4.7.7.4.1">70.2</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.8.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.8.8.1">Seg. B1 &amp; EfficientSAM-S (ours)</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.8.8.2">512</th>
<td class="ltx_td ltx_align_center" id="S4.T1.4.8.8.3">47.5</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.8.8.4">64.4</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.9.9">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_tt" id="S4.T1.4.9.9.1">HIPT <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib26" title="">26</a>]</cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_tt" id="S4.T1.4.9.9.2">1024</th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.4.9.9.3">33.0</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.4.9.9.4">46.0</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.10.10">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.10.10.1">Seg. B0 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib28" title="">28</a>]</cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.10.10.2">1024</th>
<td class="ltx_td ltx_align_center" id="S4.T1.4.10.10.3">44.0</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.10.10.4">61.1</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.11.11">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.11.11.1">Seg. B1 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib28" title="">28</a>]</cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.11.11.2">1024</th>
<td class="ltx_td ltx_align_center" id="S4.T1.4.11.11.3">45.0</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.11.11.4">62.0</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.12.12">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.4.12.12.1">Seg. B0 &amp; EfficientSAM-S (ours)</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.4.12.12.2">1024</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.12.12.3"><span class="ltx_text ltx_font_bold" id="S4.T1.4.12.12.3.1">49.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.12.12.4"><span class="ltx_text ltx_font_bold" id="S4.T1.4.12.12.4.1">66.2</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.13.13">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T1.4.13.13.1">Seg. B1 &amp; EfficientSAM-S (ours)</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T1.4.13.13.2">1024</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.4.13.13.3">49.4</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.4.13.13.4">66.1</td>
</tr>
</tbody>
</table>
</figure>
<figure class="ltx_figure" id="S4.F4">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="S4.F4.1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="336" id="S4.F4.1.g1" src="extracted/5886878/outputs/0-gt.jpg" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="S4.F4.2"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="336" id="S4.F4.2.g1" src="extracted/5886878/outputs/0-s.jpg" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="S4.F4.3"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="336" id="S4.F4.3.g1" src="extracted/5886878/outputs/0-p.jpg" width="598"/>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="S4.F4.4"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="540" id="S4.F4.4.g1" src="extracted/5886878/outputs/1-gt.jpg" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="S4.F4.5"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="540" id="S4.F4.5.g1" src="extracted/5886878/outputs/1-s.jpg" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="S4.F4.6"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="540" id="S4.F4.6.g1" src="extracted/5886878/outputs/1-p.jpg" width="598"/>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="S4.F4.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="533" id="S4.F4.sf1.g1" src="extracted/5886878/outputs/12-gt.jpg" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F4.sf1.2.1.1" style="font-size:90%;">(a)</span> </span><span class="ltx_text" id="S4.F4.sf1.3.2" style="font-size:90%;">Ground Truth</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S4.F4.sf2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="533" id="S4.F4.sf2.g1" src="extracted/5886878/outputs/12-s.jpg" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F4.sf2.2.1.1" style="font-size:90%;">(b)</span> </span><span class="ltx_text" id="S4.F4.sf2.3.2" style="font-size:90%;">Segformer-B0</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S4.F4.sf3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="533" id="S4.F4.sf3.g1" src="extracted/5886878/outputs/12-p.jpg" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F4.sf3.2.1.1" style="font-size:90%;">(c)</span> </span><span class="ltx_text" id="S4.F4.sf3.3.2" style="font-size:90%;">Ours</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F4.8.1.1" style="font-size:90%;">Figure 4</span>: </span><span class="ltx_text" id="S4.F4.9.2" style="font-size:90%;">Qualitative results on our dataset. Red denotes invasive melanoma and green denotes the epidermis. Compared to Segformer, our method significantly improves the accuracy of predictions for invasive melanoma regions, especially in areas where distinguishing from the epidermis is challenging.</span></figcaption>
</figure>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">To evaluate the effectiveness of our proposed method, we compare it with state-of-the-art melanoma segmentation methods on our dataset. As shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.T1" title="In 4.3 Results ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Tab.</span> <span class="ltx_text ltx_ref_tag">1</span></a>, we compare our method with melanoma segmentation methods including Multi-Scale FCN <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib18" title="">18</a>]</cite>, HRNet &amp; OCR <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib21" title="">21</a>]</cite>, HIPT <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib26" title="">26</a>]</cite>, and Segformer <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib28" title="">28</a>]</cite>. The results for Segformer B0 and B1 are reproduced following the methods described in Wang et al <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#bib.bib26" title="">26</a>]</cite>. All EfficientSAM methods shown in the table use a <math alttext="1024\times 1024" class="ltx_Math" display="inline" id="S4.SS3.p1.1.m1.1"><semantics id="S4.SS3.p1.1.m1.1a"><mrow id="S4.SS3.p1.1.m1.1.1" xref="S4.SS3.p1.1.m1.1.1.cmml"><mn id="S4.SS3.p1.1.m1.1.1.2" xref="S4.SS3.p1.1.m1.1.1.2.cmml">1024</mn><mo id="S4.SS3.p1.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS3.p1.1.m1.1.1.1.cmml">×</mo><mn id="S4.SS3.p1.1.m1.1.1.3" xref="S4.SS3.p1.1.m1.1.1.3.cmml">1024</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.1.m1.1b"><apply id="S4.SS3.p1.1.m1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1"><times id="S4.SS3.p1.1.m1.1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1.1"></times><cn id="S4.SS3.p1.1.m1.1.1.2.cmml" type="integer" xref="S4.SS3.p1.1.m1.1.1.2">1024</cn><cn id="S4.SS3.p1.1.m1.1.1.3.cmml" type="integer" xref="S4.SS3.p1.1.m1.1.1.3">1024</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.1.m1.1c">1024\times 1024</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p1.1.m1.1d">1024 × 1024</annotation></semantics></math> patch size, which is different from the resolution field in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.T1" title="In 4.3 Results ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Tab.</span> <span class="ltx_text ltx_ref_tag">1</span></a> that represents the side length of a patch used for the initial segmentation model.</p>
</div>
<div class="ltx_para" id="S4.SS3.p2">
<p class="ltx_p" id="S4.SS3.p2.1">As shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.T1" title="In 4.3 Results ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Tab.</span> <span class="ltx_text ltx_ref_tag">1</span></a>, our method outperforms all other baselines in terms of IoU and F1 score. Compared to using solely the Segformer, which is also used as the initial segmentation model in our method, our method achieves a gain of 9.1% IoU and 8.2% F1 over the state-of-the-art segmentation method. <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.F4" title="In 4.3 Results ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">4</span></a> presents representative qualitative results on our dataset, where our method significantly reduces errors in in-situ melanoma regions and enhances segmentation accuracy in areas where distinguishing between invasive melanoma and the epidermis is particularly challenging. Additionally, the best result is achieved with using EfficientSAM and Segformer B0 with <math alttext="512\times 512" class="ltx_Math" display="inline" id="S4.SS3.p2.1.m1.1"><semantics id="S4.SS3.p2.1.m1.1a"><mrow id="S4.SS3.p2.1.m1.1.1" xref="S4.SS3.p2.1.m1.1.1.cmml"><mn id="S4.SS3.p2.1.m1.1.1.2" xref="S4.SS3.p2.1.m1.1.1.2.cmml">512</mn><mo id="S4.SS3.p2.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS3.p2.1.m1.1.1.1.cmml">×</mo><mn id="S4.SS3.p2.1.m1.1.1.3" xref="S4.SS3.p2.1.m1.1.1.3.cmml">512</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p2.1.m1.1b"><apply id="S4.SS3.p2.1.m1.1.1.cmml" xref="S4.SS3.p2.1.m1.1.1"><times id="S4.SS3.p2.1.m1.1.1.1.cmml" xref="S4.SS3.p2.1.m1.1.1.1"></times><cn id="S4.SS3.p2.1.m1.1.1.2.cmml" type="integer" xref="S4.SS3.p2.1.m1.1.1.2">512</cn><cn id="S4.SS3.p2.1.m1.1.1.3.cmml" type="integer" xref="S4.SS3.p2.1.m1.1.1.3">512</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p2.1.m1.1c">512\times 512</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p2.1.m1.1d">512 × 512</annotation></semantics></math> patches, even though this is not the best performing Segformer in terms of IoU and F1 score. A higher IoU for the initial segmentation mask does not necessarily indicate a higher improvement in IoU in the final mask of our method. The amount of improvement depends on the quality of sampled prompts and the room left for improvement for each prompt.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Ablation Studies </h3>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">We now analyze our method through a series of ablation studies on each component of the framework.</p>
</div>
<section class="ltx_subsubsection" id="S4.SS4.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.4.1 </span>In-situ Melanoma Detection</h4>
<figure class="ltx_table" id="S4.T2">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span class="ltx_text" id="S4.T2.2.1.1" style="font-size:90%;">Table 2</span>: </span><span class="ltx_text" id="S4.T2.3.2" style="font-size:90%;">Ablation study on in-situ melanoma detection and low-confidence region filtering in preparation for prompt generation, as described in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS2" title="3.2 In-situ Melanoma Detection ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Sec.</span> <span class="ltx_text ltx_ref_tag">3.2</span></a> and <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS3" title="3.3 Low-Confidence Region Filtering ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Sec.</span> <span class="ltx_text ltx_ref_tag">3.3</span></a>.</span></figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T2.4">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T2.4.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.1.1.1">
<table class="ltx_tabular ltx_align_middle" id="S4.T2.4.1.1.1.1">
<tr class="ltx_tr" id="S4.T2.4.1.1.1.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.4.1.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.4.1.1.1.1.1.1.1">Initial</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.1.1.1.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.4.1.1.1.1.2.1"><span class="ltx_text ltx_font_bold" id="S4.T2.4.1.1.1.1.2.1.1">Model</span></td>
</tr>
</table>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T2.4.1.1.2.1">Resolution</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.1.1.3">
<table class="ltx_tabular ltx_align_middle" id="S4.T2.4.1.1.3.1">
<tr class="ltx_tr" id="S4.T2.4.1.1.3.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.4.1.1.3.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.4.1.1.3.1.1.1.1">In-situ Melanoma</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.1.1.3.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.4.1.1.3.1.2.1"><span class="ltx_text ltx_font_bold" id="S4.T2.4.1.1.3.1.2.1.1">Detection</span></td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.4.1.1.4">
<table class="ltx_tabular ltx_align_middle" id="S4.T2.4.1.1.4.1">
<tr class="ltx_tr" id="S4.T2.4.1.1.4.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.4.1.1.4.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.4.1.1.4.1.1.1.1">Low-Confidence</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.1.1.4.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.4.1.1.4.1.2.1"><span class="ltx_text ltx_font_bold" id="S4.T2.4.1.1.4.1.2.1.1">Region Filtering</span></td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.1.1.5"><span class="ltx_text ltx_font_bold" id="S4.T2.4.1.1.5.1">IoU (%)</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.2.2.1">Seg. B0</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.2.2.2">512</th>
<td class="ltx_td ltx_border_t" id="S4.T2.4.2.2.3"></td>
<td class="ltx_td ltx_border_r ltx_border_t" id="S4.T2.4.2.2.4"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.2.2.5">42.4</td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.3.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.3.3.1">Seg. B0</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.3.3.2">512</th>
<td class="ltx_td ltx_align_center" id="S4.T2.4.3.3.3">✓</td>
<td class="ltx_td ltx_border_r" id="S4.T2.4.3.3.4"></td>
<td class="ltx_td ltx_align_center" id="S4.T2.4.3.3.5"><span class="ltx_text ltx_font_bold" id="S4.T2.4.3.3.5.1">54.2</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.4.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.4.4.1">Seg. B0</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.4.4.2">512</th>
<td class="ltx_td ltx_align_center" id="S4.T2.4.4.4.3">✓</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.4.4.4.4">✓</td>
<td class="ltx_td ltx_align_center" id="S4.T2.4.4.4.5">54.1</td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.5.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.5.5.1">Seg. B0</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.5.5.2">1024</th>
<td class="ltx_td ltx_border_t" id="S4.T2.4.5.5.3"></td>
<td class="ltx_td ltx_border_r ltx_border_t" id="S4.T2.4.5.5.4"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.5.5.5">41.4</td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.6.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.6.6.1">Seg. B0</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.6.6.2">1024</th>
<td class="ltx_td ltx_align_center" id="S4.T2.4.6.6.3">✓</td>
<td class="ltx_td ltx_border_r" id="S4.T2.4.6.6.4"></td>
<td class="ltx_td ltx_align_center" id="S4.T2.4.6.6.5">45.6</td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.7.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.7.7.1">Seg. B0</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.7.7.2">1024</th>
<td class="ltx_td ltx_align_center" id="S4.T2.4.7.7.3">✓</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.4.7.7.4">✓</td>
<td class="ltx_td ltx_align_center" id="S4.T2.4.7.7.5"><span class="ltx_text ltx_font_bold" id="S4.T2.4.7.7.5.1">49.5</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.8.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.8.8.1">Seg. B1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.8.8.2">512</th>
<td class="ltx_td ltx_border_t" id="S4.T2.4.8.8.3"></td>
<td class="ltx_td ltx_border_r ltx_border_t" id="S4.T2.4.8.8.4"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.8.8.5">44.1</td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.9.9">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.9.9.1">Seg. B1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.9.9.2">512</th>
<td class="ltx_td ltx_align_center" id="S4.T2.4.9.9.3">✓</td>
<td class="ltx_td ltx_border_r" id="S4.T2.4.9.9.4"></td>
<td class="ltx_td ltx_align_center" id="S4.T2.4.9.9.5">47.5</td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.10.10">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.10.10.1">Seg. B1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.10.10.2">512</th>
<td class="ltx_td ltx_align_center" id="S4.T2.4.10.10.3">✓</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.4.10.10.4">✓</td>
<td class="ltx_td ltx_align_center" id="S4.T2.4.10.10.5"><span class="ltx_text ltx_font_bold" id="S4.T2.4.10.10.5.1">47.5</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.11.11">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.11.11.1">Seg. B1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.4.11.11.2">1024</th>
<td class="ltx_td ltx_border_t" id="S4.T2.4.11.11.3"></td>
<td class="ltx_td ltx_border_r ltx_border_t" id="S4.T2.4.11.11.4"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.11.11.5">44.3</td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.12.12">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.12.12.1">Seg. B1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.4.12.12.2">1024</th>
<td class="ltx_td ltx_align_center" id="S4.T2.4.12.12.3">✓</td>
<td class="ltx_td ltx_border_r" id="S4.T2.4.12.12.4"></td>
<td class="ltx_td ltx_align_center" id="S4.T2.4.12.12.5">44.8</td>
</tr>
<tr class="ltx_tr" id="S4.T2.4.13.13">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T2.4.13.13.1">Seg. B1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T2.4.13.13.2">1024</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.4.13.13.3">✓</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S4.T2.4.13.13.4">✓</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.4.13.13.5"><span class="ltx_text ltx_font_bold" id="S4.T2.4.13.13.5.1">49.4</span></td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para" id="S4.SS4.SSS1.p1">
<p class="ltx_p" id="S4.SS4.SSS1.p1.1">We investigate the impact of in-situ melanoma detection described in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS2" title="3.2 In-situ Melanoma Detection ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Sec.</span> <span class="ltx_text ltx_ref_tag">3.2</span></a> by filtering out all detected estimated in-situ melanoma regions regardless of their confidence levels. <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.T2" title="In 4.4.1 In-situ Melanoma Detection ‣ 4.4 Ablation Studies ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Tab.</span> <span class="ltx_text ltx_ref_tag">2</span></a> shows that this consistently improves performance, with IoU gains ranging from 0.5% to 11.8%. The improvement varies based on the quality of the initial segmentation mask and the room left for improvement. In contrast, disabling in-situ melanoma detection results in a performance drop compared to the original mask produced by Segformer. This drop occurs because prompts generated from incorrect predictions lead SAM to make additional errors. Therefore, enabling in-situ melanoma detection not only mitigates errors from incorrect initial predictions but also leverages the strengths of the remaining high-confidence predictions to improve the final segmentation results.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS4.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.4.2 </span>Low-Confidence Region Filtering</h4>
<div class="ltx_para" id="S4.SS4.SSS2.p1">
<p class="ltx_p" id="S4.SS4.SSS2.p1.2">We study the impact of low-confidence region filtering presented in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS3" title="3.3 Low-Confidence Region Filtering ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Sec.</span> <span class="ltx_text ltx_ref_tag">3.3</span></a>. As shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.T2" title="In 4.4.1 In-situ Melanoma Detection ‣ 4.4 Ablation Studies ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Tab.</span> <span class="ltx_text ltx_ref_tag">2</span></a>, our method achieves a 3.9% IoU gain for Segformer B0 and a 4.6% IoU gain for Segformer B1 when using a <math alttext="1024\times 1024" class="ltx_Math" display="inline" id="S4.SS4.SSS2.p1.1.m1.1"><semantics id="S4.SS4.SSS2.p1.1.m1.1a"><mrow id="S4.SS4.SSS2.p1.1.m1.1.1" xref="S4.SS4.SSS2.p1.1.m1.1.1.cmml"><mn id="S4.SS4.SSS2.p1.1.m1.1.1.2" xref="S4.SS4.SSS2.p1.1.m1.1.1.2.cmml">1024</mn><mo id="S4.SS4.SSS2.p1.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS4.SSS2.p1.1.m1.1.1.1.cmml">×</mo><mn id="S4.SS4.SSS2.p1.1.m1.1.1.3" xref="S4.SS4.SSS2.p1.1.m1.1.1.3.cmml">1024</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS4.SSS2.p1.1.m1.1b"><apply id="S4.SS4.SSS2.p1.1.m1.1.1.cmml" xref="S4.SS4.SSS2.p1.1.m1.1.1"><times id="S4.SS4.SSS2.p1.1.m1.1.1.1.cmml" xref="S4.SS4.SSS2.p1.1.m1.1.1.1"></times><cn id="S4.SS4.SSS2.p1.1.m1.1.1.2.cmml" type="integer" xref="S4.SS4.SSS2.p1.1.m1.1.1.2">1024</cn><cn id="S4.SS4.SSS2.p1.1.m1.1.1.3.cmml" type="integer" xref="S4.SS4.SSS2.p1.1.m1.1.1.3">1024</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.SSS2.p1.1.m1.1c">1024\times 1024</annotation><annotation encoding="application/x-llamapun" id="S4.SS4.SSS2.p1.1.m1.1d">1024 × 1024</annotation></semantics></math> patch size. However, there is a slight drop of 0.1% in IoU for Segformer B0 with a <math alttext="512\times 512" class="ltx_Math" display="inline" id="S4.SS4.SSS2.p1.2.m2.1"><semantics id="S4.SS4.SSS2.p1.2.m2.1a"><mrow id="S4.SS4.SSS2.p1.2.m2.1.1" xref="S4.SS4.SSS2.p1.2.m2.1.1.cmml"><mn id="S4.SS4.SSS2.p1.2.m2.1.1.2" xref="S4.SS4.SSS2.p1.2.m2.1.1.2.cmml">512</mn><mo id="S4.SS4.SSS2.p1.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS4.SSS2.p1.2.m2.1.1.1.cmml">×</mo><mn id="S4.SS4.SSS2.p1.2.m2.1.1.3" xref="S4.SS4.SSS2.p1.2.m2.1.1.3.cmml">512</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS4.SSS2.p1.2.m2.1b"><apply id="S4.SS4.SSS2.p1.2.m2.1.1.cmml" xref="S4.SS4.SSS2.p1.2.m2.1.1"><times id="S4.SS4.SSS2.p1.2.m2.1.1.1.cmml" xref="S4.SS4.SSS2.p1.2.m2.1.1.1"></times><cn id="S4.SS4.SSS2.p1.2.m2.1.1.2.cmml" type="integer" xref="S4.SS4.SSS2.p1.2.m2.1.1.2">512</cn><cn id="S4.SS4.SSS2.p1.2.m2.1.1.3.cmml" type="integer" xref="S4.SS4.SSS2.p1.2.m2.1.1.3">512</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.SSS2.p1.2.m2.1c">512\times 512</annotation><annotation encoding="application/x-llamapun" id="S4.SS4.SSS2.p1.2.m2.1d">512 × 512</annotation></semantics></math> patch size. This suggests that some high-confidence invasive melanoma regions touch the epidermis, which are not filtered by the algorithm, are actually in-situ melanoma. Overall, this demonstrates that low-confidence region filtering improves the robustness of our segmentation results.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS4.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.4.3 </span>Prompt Types</h4>
<figure class="ltx_table" id="S4.T3">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span class="ltx_text" id="S4.T3.2.1.1" style="font-size:90%;">Table 3</span>: </span><span class="ltx_text" id="S4.T3.3.2" style="font-size:90%;">Ablation study on the effects of using different prompts. "Both" denotes the method that dynamically uses both centroid and grid prompts based on the shape distributions of melanoma components, as shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS4" title="3.4 Prompt Generation ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Sec.</span> <span class="ltx_text ltx_ref_tag">3.4</span></a>.</span></figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T3.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T3.4.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T3.4.1.1.1">
<table class="ltx_tabular ltx_align_middle" id="S4.T3.4.1.1.1.1">
<tr class="ltx_tr" id="S4.T3.4.1.1.1.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.1.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.4.1.1.1.1.1.1.1">Initial</span></td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.1.1.1.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.1.1.1.1.2.1"><span class="ltx_text ltx_font_bold" id="S4.T3.4.1.1.1.1.2.1.1">Segmentaion Model</span></td>
</tr>
</table>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T3.4.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T3.4.1.1.2.1">Prompt</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T3.4.1.1.3"><span class="ltx_text ltx_font_bold" id="S4.T3.4.1.1.3.1">Resolution</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T3.4.1.1.4">
<table class="ltx_tabular ltx_align_middle" id="S4.T3.4.1.1.4.1">
<tr class="ltx_tr" id="S4.T3.4.1.1.4.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.1.1.4.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.4.1.1.4.1.1.1.1">EfficientSAM</span></td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.1.1.4.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.1.1.4.1.2.1">
<span class="ltx_text ltx_font_bold" id="S4.T3.4.1.1.4.1.2.1.1">IoU</span> (%)</td>
</tr>
</table>
</th>
<th class="ltx_td ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T3.4.1.1.5">
<table class="ltx_tabular ltx_align_middle" id="S4.T3.4.1.1.5.1">
<tr class="ltx_tr" id="S4.T3.4.1.1.5.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.1.1.5.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.4.1.1.5.1.1.1.1">Final Mask</span></td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.1.1.5.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.1.1.5.1.2.1"><span class="ltx_text ltx_font_bold" id="S4.T3.4.1.1.5.1.2.1.1">IoU (%)</span></td>
</tr>
</table>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T3.4.2.1">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.2.1.1">Seg. B0</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.2.1.2">Centroid</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.2.1.3">512</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.2.1.4">43.3</td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T3.4.2.1.5">53.1</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.3.2">
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.3.2.1">Seg. B0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.3.2.2">Grid</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.3.2.3">512</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.3.2.4">50.6</td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.3.2.5">51.7</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.4.3">
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.4.3.1">Seg. B0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.4.3.2">Both</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.4.3.3">512</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.4.3.4"><span class="ltx_text ltx_font_bold" id="S4.T3.4.4.3.4.1">52.2</span></td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.4.3.5"><span class="ltx_text ltx_font_bold" id="S4.T3.4.4.3.5.1">54.1</span></td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.5.4">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.5.4.1">Seg. B1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.5.4.2">Centroid</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.5.4.3">512</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.5.4.4">44.3</td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T3.4.5.4.5">47.5</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.6.5">
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.6.5.1">Seg. B1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.6.5.2">Grid</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.6.5.3">512</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.6.5.4"><span class="ltx_text ltx_font_bold" id="S4.T3.4.6.5.4.1">46.4</span></td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.6.5.5">46.5</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.7.6">
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.7.6.1">Seg. B1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.7.6.2">Both</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.7.6.3">512</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.7.6.4">46.1</td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.7.6.5"><span class="ltx_text ltx_font_bold" id="S4.T3.4.7.6.5.1">47.5</span></td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.8.7">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.8.7.1">Seg. B0</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.8.7.2">Centroid</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.8.7.3">1024</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.8.7.4">40.8</td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T3.4.8.7.5">48.5</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.9.8">
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.9.8.1">Seg. B0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.9.8.2">Grid</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.9.8.3">1024</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.9.8.4">45.5</td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.9.8.5">45.8</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.10.9">
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.10.9.1">Seg. B0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.10.9.2">Both</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.10.9.3">1024</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.10.9.4"><span class="ltx_text ltx_font_bold" id="S4.T3.4.10.9.4.1">48.7</span></td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.10.9.5"><span class="ltx_text ltx_font_bold" id="S4.T3.4.10.9.5.1">49.5</span></td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.11.10">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.11.10.1">Seg. B1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.11.10.2">Centroid</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T3.4.11.10.3">1024</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.11.10.4">37.7</td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T3.4.11.10.5">47.3</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.12.11">
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.12.11.1">Seg. B1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.12.11.2">Grid</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T3.4.12.11.3">1024</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.12.11.4">46.0</td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T3.4.12.11.5">47.2</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.13.12">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S4.T3.4.13.12.1">Seg. B1</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S4.T3.4.13.12.2">Both</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S4.T3.4.13.12.3">1024</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T3.4.13.12.4"><span class="ltx_text ltx_font_bold" id="S4.T3.4.13.12.4.1">47.1</span></td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_b" id="S4.T3.4.13.12.5"><span class="ltx_text ltx_font_bold" id="S4.T3.4.13.12.5.1">49.4</span></td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para" id="S4.SS4.SSS3.p1">
<p class="ltx_p" id="S4.SS4.SSS3.p1.1">We study the effectiveness of different prompt types. We test prompts with centroid alone, grid alone and our proposed strategy that uses both as presented in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S3.SS4" title="3.4 Prompt Generation ‣ 3 Method ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Sec.</span> <span class="ltx_text ltx_ref_tag">3.4</span></a>. <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.T3" title="In 4.4.3 Prompt Types ‣ 4.4 Ablation Studies ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Tab.</span> <span class="ltx_text ltx_ref_tag">3</span></a> shows that in most cases using both achieves the highest IoU in the final mask. Compared to grid prompts alone, using both achieves a gain as high as 3.7% IoU. Compared to centroid prompts alone, using both achieves gains up to 2.1% IoU with one case showing no improvement. It is noticeable that centroid prompts alone outperforms grid prompts alone in the final mask, but performs much worse in pre-merged mask. This shows that centroid prompts allow more accurate segmentation and thus complement the initial mask well, achieving high IoU in the final mask after merging. In contrast, grid prompts alone achieve full coverage over the initial mask, but not all points serve as effective prompts for accurate segmentation. This demonstrates that our method effectively leverages the strengths of both prompts by using grid prompts for large, irregular melanoma components and centroid prompts for small, regular melanoma components, maximizing the advantages of each prompt type.</p>
</div>
<figure class="ltx_table" id="S4.T4">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span class="ltx_text" id="S4.T4.2.1.1" style="font-size:90%;">Table 4</span>: </span><span class="ltx_text" id="S4.T4.3.2" style="font-size:90%;">Ablation study on final mask generation. The last row represents the result when prompts are generated from the ground truth instead of the mask produced by Segformer.</span></figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T4.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T4.4.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S4.T4.4.1.1.1">
<table class="ltx_tabular ltx_align_middle" id="S4.T4.4.1.1.1.1">
<tr class="ltx_tr" id="S4.T4.4.1.1.1.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.1.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T4.4.1.1.1.1.1.1.1">Initial</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.4.1.1.1.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.1.1.1.1.2.1"><span class="ltx_text ltx_font_bold" id="S4.T4.4.1.1.1.1.2.1.1">Segmentaion Model</span></td>
</tr>
</table>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S4.T4.4.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T4.4.1.1.2.1">Resolution</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T4.4.1.1.3">
<table class="ltx_tabular ltx_align_middle" id="S4.T4.4.1.1.3.1">
<tr class="ltx_tr" id="S4.T4.4.1.1.3.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.1.1.3.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T4.4.1.1.3.1.1.1.1">Post-processed</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.4.1.1.3.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.1.1.3.1.2.1"><span class="ltx_text ltx_font_bold" id="S4.T4.4.1.1.3.1.2.1.1">IoU (%)</span></td>
</tr>
</table>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T4.4.1.1.4">
<table class="ltx_tabular ltx_align_middle" id="S4.T4.4.1.1.4.1">
<tr class="ltx_tr" id="S4.T4.4.1.1.4.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.1.1.4.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T4.4.1.1.4.1.1.1.1">EfficientSAM</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.4.1.1.4.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.1.1.4.1.2.1"><span class="ltx_text ltx_font_bold" id="S4.T4.4.1.1.4.1.2.1.1">IoU (%)</span></td>
</tr>
</table>
</th>
<th class="ltx_td ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T4.4.1.1.5">
<table class="ltx_tabular ltx_align_middle" id="S4.T4.4.1.1.5.1">
<tr class="ltx_tr" id="S4.T4.4.1.1.5.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.1.1.5.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T4.4.1.1.5.1.1.1.1">Final</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.4.1.1.5.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.1.1.5.1.2.1">
<span class="ltx_text ltx_font_bold" id="S4.T4.4.1.1.5.1.2.1.1">IoU</span> (%)</td>
</tr>
</table>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T4.4.2.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T4.4.2.1.1">Seg. B0</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T4.4.2.1.2">512</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.4.2.1.3">48.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.4.2.1.4">52.2</td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T4.4.2.1.5"><span class="ltx_text ltx_font_bold" id="S4.T4.4.2.1.5.1">54.1</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.4.3.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T4.4.3.2.1">Seg. B1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T4.4.3.2.2">512</th>
<td class="ltx_td ltx_align_center" id="S4.T4.4.3.2.3">43.4</td>
<td class="ltx_td ltx_align_center" id="S4.T4.4.3.2.4">46.1</td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.3.2.5"><span class="ltx_text ltx_font_bold" id="S4.T4.4.3.2.5.1">47.5</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.4.4.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T4.4.4.3.1">Seg. B0</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T4.4.4.3.2">1024</th>
<td class="ltx_td ltx_align_center" id="S4.T4.4.4.3.3">46.7</td>
<td class="ltx_td ltx_align_center" id="S4.T4.4.4.3.4">48.7</td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.4.3.5"><span class="ltx_text ltx_font_bold" id="S4.T4.4.4.3.5.1">49.5</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.4.5.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T4.4.5.4.1">Seg. B1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T4.4.5.4.2">1024</th>
<td class="ltx_td ltx_align_center" id="S4.T4.4.5.4.3">47.2</td>
<td class="ltx_td ltx_align_center" id="S4.T4.4.5.4.4">47.1</td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T4.4.5.4.5"><span class="ltx_text ltx_font_bold" id="S4.T4.4.5.4.5.1">49.4</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.4.6.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t" id="S4.T4.4.6.5.1">GT</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t" id="S4.T4.4.6.5.2">-</th>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S4.T4.4.6.5.3">-</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S4.T4.4.6.5.4">63.0</td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_b ltx_border_t" id="S4.T4.4.6.5.5">-</td>
</tr>
</tbody>
</table>
</figure>
</section>
<section class="ltx_subsubsection" id="S4.SS4.SSS4">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.4.4 </span>Final Mask Generation</h4>
<div class="ltx_para" id="S4.SS4.SSS4.p1">
<p class="ltx_p" id="S4.SS4.SSS4.p1.1">We study the impact of final mask generation. As shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.02207v1#S4.T4" title="In 4.4.3 Prompt Types ‣ 4.4 Ablation Studies ‣ 4 Experiments ‣ Adapting Segment Anything Model to Melanoma Segmentation in Microscopy Slide Images"><span class="ltx_text ltx_ref_tag">Tab.</span> <span class="ltx_text ltx_ref_tag">4</span></a>, the final mask consistently achieves the highest IoU in all cases. EfficientSAM’s mask outperforms the post-prococessed mask in most cases, with the most significant improvement being a 5.5% increase for Segformer B0 using <math alttext="512\times 512" class="ltx_Math" display="inline" id="S4.SS4.SSS4.p1.1.m1.1"><semantics id="S4.SS4.SSS4.p1.1.m1.1a"><mrow id="S4.SS4.SSS4.p1.1.m1.1.1" xref="S4.SS4.SSS4.p1.1.m1.1.1.cmml"><mn id="S4.SS4.SSS4.p1.1.m1.1.1.2" xref="S4.SS4.SSS4.p1.1.m1.1.1.2.cmml">512</mn><mo id="S4.SS4.SSS4.p1.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS4.SSS4.p1.1.m1.1.1.1.cmml">×</mo><mn id="S4.SS4.SSS4.p1.1.m1.1.1.3" xref="S4.SS4.SSS4.p1.1.m1.1.1.3.cmml">512</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS4.SSS4.p1.1.m1.1b"><apply id="S4.SS4.SSS4.p1.1.m1.1.1.cmml" xref="S4.SS4.SSS4.p1.1.m1.1.1"><times id="S4.SS4.SSS4.p1.1.m1.1.1.1.cmml" xref="S4.SS4.SSS4.p1.1.m1.1.1.1"></times><cn id="S4.SS4.SSS4.p1.1.m1.1.1.2.cmml" type="integer" xref="S4.SS4.SSS4.p1.1.m1.1.1.2">512</cn><cn id="S4.SS4.SSS4.p1.1.m1.1.1.3.cmml" type="integer" xref="S4.SS4.SSS4.p1.1.m1.1.1.3">512</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.SSS4.p1.1.m1.1c">512\times 512</annotation><annotation encoding="application/x-llamapun" id="S4.SS4.SSS4.p1.1.m1.1d">512 × 512</annotation></semantics></math> patches. Merging two masks into a final mask significantly enhances accuracy. The post-processed mask shows gains ranging from 2.2% to 5.5% IoU, while the EfficientSAM’s mask gains improvements between 0.8% and 2.3% IoU. This demonstrates that EfficientSAM compliments well the post-processsed mask in generating the final mask. In addition, we evaluate the EfficientSAM’s performance with prompts generated from the ground truth. Its IoU performance is 10.8% higher than the best result of using EfficientSAM alone and 8.9% higher than the best final mask. This demonstrates the upper limit of the performance of our method when using fully accurate prompts.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Conclusion</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">We proposed a novel approach to explore the potential of SAM for melanoma segmentation in microscopy slide images. Our method utilizes Segformer to generate initial segmentation masks and subsequently prompts EfficientSAM using a dynamic selection of centroid and grid prompts for automatic invasive melanoma segmentation. Our experimental results demonstrate that this approach surpasses other state-of-the-art melanoma segmentation methods by a large margin of 9.1% in IoU.</p>
</div>
</section>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Acknowledgements</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">We would like to express our gratitude to Michael Wang and Timothy McCalmont for providing the data, and to Shinwoo Choi for sharing valuable insights, without which this paper would not be possible.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Abeloff, M.D., Armitage, J.O., Niederhuber, J.E., Kastan, M.B., McKenna, W.G.: Abeloff’s Clinical Oncology E-Book. Elsevier Health Sciences (2008)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Alheejawi, S., Mandal, M., Xu, H., Lu, C., Berendt, R., Jha, N.: Deep learning-based histopathological image analysis for automated detection and staging of melanoma. In: Deep Learning Techniques for Biomedical and Health Informatics, pp. 237–265. Elsevier (2020)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
American Cancer Society: Cancer facts and figures 2024 (2024), <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://www.cancer.org/research/cancer-facts-statistics/all-cancer-facts-figures/2024-cancer-facts-figures.html" title="">https://www.cancer.org/research/cancer-facts-statistics/all-cancer-facts-figures/2024-cancer-facts-figures.html</a>, accessed: 2024-06-08

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Arbelaez, P., Maire, M., Fowlkes, C., Malik, J.: Contour detection and hierarchical image segmentation. IEEE transactions on pattern analysis and machine intelligence <span class="ltx_text ltx_font_bold" id="bib.bib4.1.1">33</span>(5), 898–916 (2010)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Chen, S., Ge, C., Tong, Z., Wang, J., Song, Y., Wang, J., Luo, P.: Adaptformer: Adapting vision transformers for scalable visual recognition. Advances in Neural Information Processing Systems <span class="ltx_text ltx_font_bold" id="bib.bib5.1.1">35</span>, 16664–16678 (2022)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Conic, R.Z., Cabrera, C.I., Khorana, A.A., Gastman, B.R.: Determination of the impact of melanoma surgical timing on survival using the national cancer database. Journal of the American Academy of Dermatology <span class="ltx_text ltx_font_bold" id="bib.bib6.1.1">78</span>(1), 40–46 (2018)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Deng, J., Dong, W., Socher, R., Li, L.J., Li, K., Fei-Fei, L.: Imagenet: A large-scale hierarchical image database. In: 2009 IEEE conference on computer vision and pattern recognition. pp. 248–255. Ieee (2009)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Deng, R., Cui, C., Liu, Q., Yao, T., Remedios, L.W., Bao, S., Landman, B.A., Wheless, L.E., Coburn, L.A., Wilson, K.T., et al.: Segment anything model (sam) for digital pathology: Assess zero-shot segmentation on whole slide imaging. arXiv preprint arXiv:2304.04155 (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Dosovitskiy, A., Beyer, L., Kolesnikov, A., Weissenborn, D., Zhai, X., Unterthiner, T., Dehghani, M., Minderer, M., Heigold, G., Gelly, S., et al.: An image is worth 16x16 words: Transformers for image recognition at scale. arXiv preprint arXiv:2010.11929 (2020)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Fischer, A.H., Jacobson, K.A., Rose, J., Zeller, R.: Hematoxylin and eosin staining of tissue and cell sections. Cold spring harbor protocols <span class="ltx_text ltx_font_bold" id="bib.bib10.1.1">2008</span>(5), pdb–prot4986 (2008)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Goodson, A.G., Grossman, D.: Strategies for early melanoma detection: Approaches to the patient with nevi. Journal of the American Academy of Dermatology <span class="ltx_text ltx_font_bold" id="bib.bib11.1.1">60</span>(5), 719–735 (2009)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Huang, Y., Yang, X., Liu, L., Zhou, H., Chang, A., Zhou, X., Chen, R., Yu, J., Chen, J., Chen, C., et al.: Segment anything model for medical images? Medical Image Analysis <span class="ltx_text ltx_font_bold" id="bib.bib12.1.1">92</span>, 103061 (2024)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Kirillov, A., Mintun, E., Ravi, N., Mao, H., Rolland, C., Gustafson, L., Xiao, T., Whitehead, S., Berg, A.C., Lo, W.Y., et al.: Segment anything. In: Proceedings of the IEEE/CVF International Conference on Computer Vision. pp. 4015–4026 (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Loshchilov, I., Hutter, F.: Decoupled weight decay regularization. arXiv preprint arXiv:1711.05101 (2017)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Ma, J., He, Y., Li, F., Han, L., You, C., Wang, B.: Segment anything in medical images. Nature Communications <span class="ltx_text ltx_font_bold" id="bib.bib15.1.1">15</span>(1),  654 (2024)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Nofallah, S., Mokhtari, M., Wu, W., Mehta, S., Knezevich, S., May, C.J., Chang, O.H., Lee, A.C., Elmore, J.G., Shapiro, L.G.: Segmenting skin biopsy images with coarse and sparse annotations using u-net. Journal of digital imaging <span class="ltx_text ltx_font_bold" id="bib.bib16.1.1">35</span>(5), 1238–1249 (2022)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Oskal, K.R., Risdal, M., Janssen, E.A., Undersrud, E.S., Gulsrud, T.O.: A u-net based approach to epidermal tissue segmentation in whole slide histopathological images. SN Applied Sciences <span class="ltx_text ltx_font_bold" id="bib.bib17.1.1">1</span>, 1–12 (2019)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Phillips, A., Teo, I., Lang, J.: Segmentation of prognostic tissue structures in cutaneous melanoma using whole slide images. In: Proceedings of the IEEE/CVF conference on computer vision and pattern recognition workshops (2019)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Roy, S., Wald, T., Koehler, G., Rokuss, M.R., Disch, N., Holzschuh, J., Zimmerer, D., Maier-Hein, K.H.: Sam. md: Zero-shot medical image segmentation capabilities of the segment anything model. arXiv preprint arXiv:2304.05396 (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Van de Sande, K.E., Uijlings, J.R., Gevers, T., Smeulders, A.W.: Segmentation as selective search for object recognition. In: 2011 international conference on computer vision. pp. 1879–1886. IEEE (2011)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Shah, A., Mehta, A., Wang, M., Neumann, N., Zakhor, A., McCalmont, T.: Deep learning segmentation of invasive melanoma. In: Medical Imaging 2023: Digital and Computational Pathology. vol. 12471, pp. 447–452. SPIE (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Skin Cancer Foundation: Melanoma overview: A dangerous skin cancer (2024), <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://www.skincancer.org/skin-cancer-information/melanoma" title="">https://www.skincancer.org/skin-cancer-information/melanoma</a>, accessed: 2024-06-08

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Van Rijthoven, M., Balkenhol, M., Siliņa, K., Van Der Laak, J., Ciompi, F.: Hooknet: Multi-resolution convolutional neural networks for semantic segmentation in histopathology whole-slide images. Medical image analysis <span class="ltx_text ltx_font_bold" id="bib.bib23.1.1">68</span>, 101890 (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Van Zon, M., Stathonikos, N., Blokx, W.A., Komina, S., Maas, S.L., Pluim, J.P., Van Diest, P.J., Veta, M.: Segmentation and classification of melanoma and nevus in whole slide images. In: 2020 IEEE 17th International Symposium on Biomedical Imaging (ISBI). pp. 263–266. IEEE (2020)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Vaswani, A., Shazeer, N., Parmar, N., Uszkoreit, J., Jones, L., Gomez, A.N., Kaiser, Ł., Polosukhin, I.: Attention is all you need. Advances in neural information processing systems <span class="ltx_text ltx_font_bold" id="bib.bib25.1.1">30</span> (2017)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
Wang, F., Wang, M., Zakhor, A., McCalmont, T.: Transformers for microscopy slide image segmentation of invasive melanoma. Electronic Imaging <span class="ltx_text ltx_font_bold" id="bib.bib26.1.1">36</span>,  1–5 (2024)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
Wu, J., Fu, R., Fang, H., Liu, Y., Wang, Z., Xu, Y., Jin, Y., Arbel, T.: Medical sam adapter: Adapting segment anything model for medical image segmentation. arXiv preprint arXiv:2304.12620 (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Xie, E., Wang, W., Yu, Z., Anandkumar, A., Alvarez, J.M., Luo, P.: Segformer: Simple and efficient design for semantic segmentation with transformers. Advances in neural information processing systems <span class="ltx_text ltx_font_bold" id="bib.bib28.1.1">34</span>, 12077–12090 (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
Xiong, Y., Varadarajan, B., Wu, L., Xiang, X., Xiao, F., Zhu, C., Dai, X., Wang, D., Sun, F., Iandola, F., et al.: Efficientsam: Leveraged masked image pretraining for efficient segment anything. arXiv preprint arXiv:2312.00863 (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
Yuan, Y., Chen, X., Wang, J.: Object-contextual representations for semantic segmentation. In: Computer Vision–ECCV 2020: 16th European Conference, Glasgow, UK, August 23–28, 2020, Proceedings, Part VI 16. pp. 173–190. Springer (2020)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Zhang, Y., Zhou, T., Wang, S., Liang, P., Zhang, Y., Chen, D.Z.: Input augmentation with sam: Boosting medical image segmentation with segmentation foundation model. In: International Conference on Medical Image Computing and Computer-Assisted Intervention. pp. 129–139. Springer (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Zhou, T., Zhang, Y., Zhou, Y., Wu, Y., Gong, C.: Can sam segment polyps? arXiv preprint arXiv:2304.07583 (2023)

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Thu Oct  3 04:19:12 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
